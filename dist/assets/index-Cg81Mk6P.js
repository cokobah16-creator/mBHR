function Iv(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Cg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ag={exports:{}},ac={},Pg={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),Dv=Symbol.for("react.portal"),Tv=Symbol.for("react.fragment"),Ov=Symbol.for("react.strict_mode"),Lv=Symbol.for("react.profiler"),Rv=Symbol.for("react.provider"),Mv=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Fv=Symbol.for("react.suspense"),Bv=Symbol.for("react.memo"),Vv=Symbol.for("react.lazy"),Kf=Symbol.iterator;function Uv(e){return e===null||typeof e!="object"?null:(e=Kf&&e[Kf]||e["@@iterator"],typeof e=="function"?e:null)}var Ig={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dg=Object.assign,Tg={};function fa(e,t,n){this.props=e,this.context=t,this.refs=Tg,this.updater=n||Ig}fa.prototype.isReactComponent={};fa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Og(){}Og.prototype=fa.prototype;function mm(e,t,n){this.props=e,this.context=t,this.refs=Tg,this.updater=n||Ig}var fm=mm.prototype=new Og;fm.constructor=mm;Dg(fm,fa.prototype);fm.isPureReactComponent=!0;var Wf=Array.isArray,Lg=Object.prototype.hasOwnProperty,hm={current:null},Rg={key:!0,ref:!0,__self:!0,__source:!0};function Mg(e,t,n){var s,r={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Lg.call(t,s)&&!Rg.hasOwnProperty(s)&&(r[s]=t[s]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)r[s]===void 0&&(r[s]=o[s]);return{$$typeof:el,type:e,key:i,ref:l,props:r,_owner:hm.current}}function zv(e,t){return{$$typeof:el,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pm(e){return typeof e=="object"&&e!==null&&e.$$typeof===el}function Hv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qf=/\/+/g;function Bc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hv(""+e.key):t.toString(36)}function zl(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case el:case Dv:l=!0}}if(l)return l=e,r=r(l),e=s===""?"."+Bc(l,0):s,Wf(r)?(n="",e!=null&&(n=e.replace(Qf,"$&/")+"/"),zl(r,t,n,"",function(d){return d})):r!=null&&(pm(r)&&(r=zv(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(Qf,"$&/")+"/")+e)),t.push(r)),1;if(l=0,s=s===""?".":s+":",Wf(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+Bc(i,o);l+=zl(i,t,n,c,r)}else if(c=Uv(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+Bc(i,o++),l+=zl(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function pl(e,t,n){if(e==null)return e;var s=[],r=0;return zl(e,s,"","",function(i){return t.call(n,i,r++)}),s}function qv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},Hl={transition:null},Kv={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:hm};function $g(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:pl,forEach:function(e,t,n){pl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pl(e,function(){t++}),t},toArray:function(e){return pl(e,function(t){return t})||[]},only:function(e){if(!pm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=fa;ue.Fragment=Tv;ue.Profiler=Lv;ue.PureComponent=mm;ue.StrictMode=Ov;ue.Suspense=Fv;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kv;ue.act=$g;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Dg({},e.props),r=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=hm.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Lg.call(t,c)&&!Rg.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:el,type:e.type,key:r,ref:i,props:s,_owner:l}};ue.createContext=function(e){return e={$$typeof:Mv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rv,_context:e},e.Consumer=e};ue.createElement=Mg;ue.createFactory=function(e){var t=Mg.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:$v,render:e}};ue.isValidElement=pm;ue.lazy=function(e){return{$$typeof:Vv,_payload:{_status:-1,_result:e},_init:qv}};ue.memo=function(e,t){return{$$typeof:Bv,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Hl.transition;Hl.transition={};try{e()}finally{Hl.transition=t}};ue.unstable_act=$g;ue.useCallback=function(e,t){return gt.current.useCallback(e,t)};ue.useContext=function(e){return gt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return gt.current.useEffect(e,t)};ue.useId=function(){return gt.current.useId()};ue.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return gt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};ue.useRef=function(e){return gt.current.useRef(e)};ue.useState=function(e){return gt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return gt.current.useTransition()};ue.version="18.3.1";Pg.exports=ue;var x=Pg.exports;const Se=Cg(x),Wv=Iv({__proto__:null,default:Se},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv=x,Zv=Symbol.for("react.element"),Gv=Symbol.for("react.fragment"),Jv=Object.prototype.hasOwnProperty,Yv=Qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xv={key:!0,ref:!0,__self:!0,__source:!0};function Fg(e,t,n){var s,r={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Jv.call(t,s)&&!Xv.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:Zv,type:e,key:i,ref:l,props:r,_owner:Yv.current}}ac.Fragment=Gv;ac.jsx=Fg;ac.jsxs=Fg;Ag.exports=ac;var a=Ag.exports,Dd={},Bg={exports:{}},Rt={},Vg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,A){var M=R.length;R.push(A);e:for(;0<M;){var oe=M-1>>>1,be=R[oe];if(0<r(be,A))R[oe]=A,R[M]=be,M=oe;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var A=R[0],M=R.pop();if(M!==A){R[0]=M;e:for(var oe=0,be=R.length,kt=be>>>1;oe<kt;){var St=2*(oe+1)-1,Xn=R[St],Qt=St+1,un=R[Qt];if(0>r(Xn,M))Qt<be&&0>r(un,Xn)?(R[oe]=un,R[Qt]=M,oe=Qt):(R[oe]=Xn,R[St]=M,oe=St);else if(Qt<be&&0>r(un,M))R[oe]=un,R[Qt]=M,oe=Qt;else break e}}return A}function r(R,A){var M=R.sortIndex-A.sortIndex;return M!==0?M:R.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,g=!1,j=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var A=n(d);A!==null;){if(A.callback===null)s(d);else if(A.startTime<=R)s(d),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(d)}}function N(R){if(v=!1,y(R),!j)if(n(c)!==null)j=!0,re(b);else{var A=n(d);A!==null&&ie(N,A.startTime-R)}}function b(R,A){j=!1,v&&(v=!1,p(E),E=-1),g=!0;var M=m;try{for(y(A),h=n(c);h!==null&&(!(h.expirationTime>A)||R&&!T());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,m=h.priorityLevel;var be=oe(h.expirationTime<=A);A=e.unstable_now(),typeof be=="function"?h.callback=be:h===n(c)&&s(c),y(A)}else s(c);h=n(c)}if(h!==null)var kt=!0;else{var St=n(d);St!==null&&ie(N,St.startTime-A),kt=!1}return kt}finally{h=null,m=M,g=!1}}var S=!1,k=null,E=-1,_=5,I=-1;function T(){return!(e.unstable_now()-I<_)}function L(){if(k!==null){var R=e.unstable_now();I=R;var A=!0;try{A=k(!0,R)}finally{A?z():(S=!1,k=null)}}else S=!1}var z;if(typeof f=="function")z=function(){f(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ee=H.port2;H.port1.onmessage=L,z=function(){ee.postMessage(null)}}else z=function(){w(L,0)};function re(R){k=R,S||(S=!0,z())}function ie(R,A){E=w(function(){R(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){j||g||(j=!0,re(b))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var M=m;m=A;try{return R()}finally{m=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,A){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var M=m;m=R;try{return A()}finally{m=M}},e.unstable_scheduleCallback=function(R,A,M){var oe=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?oe+M:oe):M=oe,R){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=M+be,R={id:u++,callback:A,priorityLevel:R,startTime:M,expirationTime:be,sortIndex:-1},M>oe?(R.sortIndex=M,t(d,R),n(c)===null&&R===n(d)&&(v?(p(E),E=-1):v=!0,ie(N,M-oe))):(R.sortIndex=be,t(c,R),j||g||(j=!0,re(b))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var A=m;return function(){var M=m;m=A;try{return R.apply(this,arguments)}finally{m=M}}}})(Ug);Vg.exports=Ug;var e1=Vg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1=x,Ot=e1;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zg=new Set,di={};function fr(e,t){Xr(e,t),Xr(e+"Capture",t)}function Xr(e,t){for(di[e]=t,e=0;e<t.length;e++)zg.add(t[e])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=Object.prototype.hasOwnProperty,n1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zf={},Gf={};function s1(e){return Td.call(Gf,e)?!0:Td.call(Zf,e)?!1:n1.test(e)?Gf[e]=!0:(Zf[e]=!0,!1)}function r1(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function a1(e,t,n,s){if(t===null||typeof t>"u"||r1(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xt(e,t,n,s,r,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var gm=/[\-:]([a-z])/g;function xm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gm,xm);Xe[t]=new xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gm,xm);Xe[t]=new xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gm,xm);Xe[t]=new xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ym(e,t,n,s){var r=Xe.hasOwnProperty(t)?Xe[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a1(t,n,r,s)&&(n=null),s||r===null?s1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Gn=t1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gl=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),vm=Symbol.for("react.strict_mode"),Od=Symbol.for("react.profiler"),Hg=Symbol.for("react.provider"),qg=Symbol.for("react.context"),wm=Symbol.for("react.forward_ref"),Ld=Symbol.for("react.suspense"),Rd=Symbol.for("react.suspense_list"),bm=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),Kg=Symbol.for("react.offscreen"),Jf=Symbol.iterator;function Na(e){return e===null||typeof e!="object"?null:(e=Jf&&e[Jf]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,Vc;function Ra(e){if(Vc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vc=t&&t[1]||""}return`
`+Vc+e}var Uc=!1;function zc(e,t){if(!e||Uc)return"";Uc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),l=r.length-1,o=i.length-1;1<=l&&0<=o&&r[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(r[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||r[l]!==i[o]){var c=`
`+r[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Uc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ra(e):""}function i1(e){switch(e.tag){case 5:return Ra(e.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 2:case 15:return e=zc(e.type,!1),e;case 11:return e=zc(e.type.render,!1),e;case 1:return e=zc(e.type,!0),e;default:return""}}function Md(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ar:return"Fragment";case Cr:return"Portal";case Od:return"Profiler";case vm:return"StrictMode";case Ld:return"Suspense";case Rd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qg:return(e.displayName||"Context")+".Consumer";case Hg:return(e._context.displayName||"Context")+".Provider";case wm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bm:return t=e.displayName||null,t!==null?t:Md(e.type)||"Memo";case as:t=e._payload,e=e._init;try{return Md(e(t))}catch{}}return null}function l1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(t);case 8:return t===vm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Es(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function o1(e){var t=Wg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xl(e){e._valueTracker||(e._valueTracker=o1(e))}function Qg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Wg(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function co(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $d(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yf(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Es(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zg(e,t){t=t.checked,t!=null&&ym(e,"checked",t,!1)}function Fd(e,t){Zg(e,t);var n=Es(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bd(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bd(e,t.type,Es(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bd(e,t,n){(t!=="number"||co(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ma=Array.isArray;function Vr(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Es(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Vd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Ma(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Es(n)}}function Gg(e,t){var n=Es(t.value),s=Es(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function th(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ud(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yl,Yg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yl=yl||document.createElement("div"),yl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ui(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c1=["Webkit","ms","Moz","O"];Object.keys(qa).forEach(function(e){c1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qa[t]=qa[e]})});function Xg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||qa.hasOwnProperty(e)&&qa[e]?(""+t).trim():t+"px"}function ex(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Xg(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var d1=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(e,t){if(t){if(d1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Hd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function jm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kd=null,Ur=null,zr=null;function nh(e){if(e=sl(e)){if(typeof Kd!="function")throw Error($(280));var t=e.stateNode;t&&(t=dc(t),Kd(e.stateNode,e.type,t))}}function tx(e){Ur?zr?zr.push(e):zr=[e]:Ur=e}function nx(){if(Ur){var e=Ur,t=zr;if(zr=Ur=null,nh(e),t)for(e=0;e<t.length;e++)nh(t[e])}}function sx(e,t){return e(t)}function rx(){}var Hc=!1;function ax(e,t,n){if(Hc)return e(t,n);Hc=!0;try{return sx(e,t,n)}finally{Hc=!1,(Ur!==null||zr!==null)&&(rx(),nx())}}function mi(e,t){var n=e.stateNode;if(n===null)return null;var s=dc(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Wd=!1;if(Un)try{var ka={};Object.defineProperty(ka,"passive",{get:function(){Wd=!0}}),window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,ka)}catch{Wd=!1}function u1(e,t,n,s,r,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Ka=!1,uo=null,mo=!1,Qd=null,m1={onError:function(e){Ka=!0,uo=e}};function f1(e,t,n,s,r,i,l,o,c){Ka=!1,uo=null,u1.apply(m1,arguments)}function h1(e,t,n,s,r,i,l,o,c){if(f1.apply(this,arguments),Ka){if(Ka){var d=uo;Ka=!1,uo=null}else throw Error($(198));mo||(mo=!0,Qd=d)}}function hr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ix(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sh(e){if(hr(e)!==e)throw Error($(188))}function p1(e){var t=e.alternate;if(!t){if(t=hr(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return sh(r),e;if(i===s)return sh(r),t;i=i.sibling}throw Error($(188))}if(n.return!==s.return)n=r,s=i;else{for(var l=!1,o=r.child;o;){if(o===n){l=!0,n=r,s=i;break}if(o===s){l=!0,s=r,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,s=r;break}if(o===s){l=!0,s=i,n=r;break}o=o.sibling}if(!l)throw Error($(189))}}if(n.alternate!==s)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function lx(e){return e=p1(e),e!==null?ox(e):null}function ox(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ox(e);if(t!==null)return t;e=e.sibling}return null}var cx=Ot.unstable_scheduleCallback,rh=Ot.unstable_cancelCallback,g1=Ot.unstable_shouldYield,x1=Ot.unstable_requestPaint,Oe=Ot.unstable_now,y1=Ot.unstable_getCurrentPriorityLevel,Nm=Ot.unstable_ImmediatePriority,dx=Ot.unstable_UserBlockingPriority,fo=Ot.unstable_NormalPriority,v1=Ot.unstable_LowPriority,ux=Ot.unstable_IdlePriority,ic=null,yn=null;function w1(e){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(ic,e,void 0,(e.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:N1,b1=Math.log,j1=Math.LN2;function N1(e){return e>>>=0,e===0?32:31-(b1(e)/j1|0)|0}var vl=64,wl=4194304;function $a(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ho(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~r;o!==0?s=$a(o):(i&=l,i!==0&&(s=$a(i)))}else l=n&~r,l!==0?s=$a(l):i!==0&&(s=$a(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-nn(t),r=1<<n,s|=e[n],t&=~r;return s}function k1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S1(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-nn(i),o=1<<l,c=r[l];c===-1?(!(o&n)||o&s)&&(r[l]=k1(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Zd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mx(){var e=vl;return vl<<=1,!(vl&4194240)&&(vl=64),e}function qc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nn(t),e[t]=n}function _1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-nn(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function km(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-nn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var pe=0;function fx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hx,Sm,px,gx,xx,Gd=!1,bl=[],gs=null,xs=null,ys=null,fi=new Map,hi=new Map,os=[],E1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ah(e,t){switch(e){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":fi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hi.delete(t.pointerId)}}function Sa(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=sl(t),t!==null&&Sm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function C1(e,t,n,s,r){switch(t){case"focusin":return gs=Sa(gs,e,t,n,s,r),!0;case"dragenter":return xs=Sa(xs,e,t,n,s,r),!0;case"mouseover":return ys=Sa(ys,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return fi.set(i,Sa(fi.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,hi.set(i,Sa(hi.get(i)||null,e,t,n,s,r)),!0}return!1}function yx(e){var t=Ks(e.target);if(t!==null){var n=hr(t);if(n!==null){if(t=n.tag,t===13){if(t=ix(n),t!==null){e.blockedOn=t,xx(e.priority,function(){px(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);qd=s,n.target.dispatchEvent(s),qd=null}else return t=sl(n),t!==null&&Sm(t),e.blockedOn=n,!1;t.shift()}return!0}function ih(e,t,n){ql(e)&&n.delete(t)}function A1(){Gd=!1,gs!==null&&ql(gs)&&(gs=null),xs!==null&&ql(xs)&&(xs=null),ys!==null&&ql(ys)&&(ys=null),fi.forEach(ih),hi.forEach(ih)}function _a(e,t){e.blockedOn===t&&(e.blockedOn=null,Gd||(Gd=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,A1)))}function pi(e){function t(r){return _a(r,e)}if(0<bl.length){_a(bl[0],e);for(var n=1;n<bl.length;n++){var s=bl[n];s.blockedOn===e&&(s.blockedOn=null)}}for(gs!==null&&_a(gs,e),xs!==null&&_a(xs,e),ys!==null&&_a(ys,e),fi.forEach(t),hi.forEach(t),n=0;n<os.length;n++)s=os[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<os.length&&(n=os[0],n.blockedOn===null);)yx(n),n.blockedOn===null&&os.shift()}var Hr=Gn.ReactCurrentBatchConfig,po=!0;function P1(e,t,n,s){var r=pe,i=Hr.transition;Hr.transition=null;try{pe=1,_m(e,t,n,s)}finally{pe=r,Hr.transition=i}}function I1(e,t,n,s){var r=pe,i=Hr.transition;Hr.transition=null;try{pe=4,_m(e,t,n,s)}finally{pe=r,Hr.transition=i}}function _m(e,t,n,s){if(po){var r=Jd(e,t,n,s);if(r===null)td(e,t,s,go,n),ah(e,s);else if(C1(r,e,t,n,s))s.stopPropagation();else if(ah(e,s),t&4&&-1<E1.indexOf(e)){for(;r!==null;){var i=sl(r);if(i!==null&&hx(i),i=Jd(e,t,n,s),i===null&&td(e,t,s,go,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else td(e,t,s,null,n)}}var go=null;function Jd(e,t,n,s){if(go=null,e=jm(s),e=Ks(e),e!==null)if(t=hr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ix(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function vx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y1()){case Nm:return 1;case dx:return 4;case fo:case v1:return 16;case ux:return 536870912;default:return 16}default:return 16}}var fs=null,Em=null,Kl=null;function wx(){if(Kl)return Kl;var e,t=Em,n=t.length,s,r="value"in fs?fs.value:fs.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===r[i-s];s++);return Kl=r.slice(e,1<s?1-s:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function lh(){return!1}function Mt(e){function t(n,s,r,i,l){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:lh,this.isPropagationStopped=lh,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),t}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cm=Mt(ha),nl=Ie({},ha,{view:0,detail:0}),D1=Mt(nl),Kc,Wc,Ea,lc=Ie({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Am,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ea&&(Ea&&e.type==="mousemove"?(Kc=e.screenX-Ea.screenX,Wc=e.screenY-Ea.screenY):Wc=Kc=0,Ea=e),Kc)},movementY:function(e){return"movementY"in e?e.movementY:Wc}}),oh=Mt(lc),T1=Ie({},lc,{dataTransfer:0}),O1=Mt(T1),L1=Ie({},nl,{relatedTarget:0}),Qc=Mt(L1),R1=Ie({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),M1=Mt(R1),$1=Ie({},ha,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F1=Mt($1),B1=Ie({},ha,{data:0}),ch=Mt(B1),V1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z1[e])?!!t[e]:!1}function Am(){return H1}var q1=Ie({},nl,{key:function(e){if(e.key){var t=V1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?U1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Am,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),K1=Mt(q1),W1=Ie({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=Mt(W1),Q1=Ie({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Am}),Z1=Mt(Q1),G1=Ie({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),J1=Mt(G1),Y1=Ie({},lc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X1=Mt(Y1),ew=[9,13,27,32],Pm=Un&&"CompositionEvent"in window,Wa=null;Un&&"documentMode"in document&&(Wa=document.documentMode);var tw=Un&&"TextEvent"in window&&!Wa,bx=Un&&(!Pm||Wa&&8<Wa&&11>=Wa),uh=" ",mh=!1;function jx(e,t){switch(e){case"keyup":return ew.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pr=!1;function nw(e,t){switch(e){case"compositionend":return Nx(t);case"keypress":return t.which!==32?null:(mh=!0,uh);case"textInput":return e=t.data,e===uh&&mh?null:e;default:return null}}function sw(e,t){if(Pr)return e==="compositionend"||!Pm&&jx(e,t)?(e=wx(),Kl=Em=fs=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bx&&t.locale!=="ko"?null:t.data;default:return null}}var rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rw[e.type]:t==="textarea"}function kx(e,t,n,s){tx(s),t=xo(t,"onChange"),0<t.length&&(n=new Cm("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Qa=null,gi=null;function aw(e){Lx(e,0)}function oc(e){var t=Tr(e);if(Qg(t))return e}function iw(e,t){if(e==="change")return t}var Sx=!1;if(Un){var Zc;if(Un){var Gc="oninput"in document;if(!Gc){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),Gc=typeof hh.oninput=="function"}Zc=Gc}else Zc=!1;Sx=Zc&&(!document.documentMode||9<document.documentMode)}function ph(){Qa&&(Qa.detachEvent("onpropertychange",_x),gi=Qa=null)}function _x(e){if(e.propertyName==="value"&&oc(gi)){var t=[];kx(t,gi,e,jm(e)),ax(aw,t)}}function lw(e,t,n){e==="focusin"?(ph(),Qa=t,gi=n,Qa.attachEvent("onpropertychange",_x)):e==="focusout"&&ph()}function ow(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oc(gi)}function cw(e,t){if(e==="click")return oc(t)}function dw(e,t){if(e==="input"||e==="change")return oc(t)}function uw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:uw;function xi(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Td.call(t,r)||!ln(e[r],t[r]))return!1}return!0}function gh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xh(e,t){var n=gh(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gh(n)}}function Ex(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ex(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cx(){for(var e=window,t=co();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=co(e.document)}return t}function Im(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mw(e){var t=Cx(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ex(n.ownerDocument.documentElement,n)){if(s!==null&&Im(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=xh(n,i);var l=xh(n,s);r&&l&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fw=Un&&"documentMode"in document&&11>=document.documentMode,Ir=null,Yd=null,Za=null,Xd=!1;function yh(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||Ir==null||Ir!==co(s)||(s=Ir,"selectionStart"in s&&Im(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Za&&xi(Za,s)||(Za=s,s=xo(Yd,"onSelect"),0<s.length&&(t=new Cm("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ir)))}function Nl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dr={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},Jc={},Ax={};Un&&(Ax=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function cc(e){if(Jc[e])return Jc[e];if(!Dr[e])return e;var t=Dr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ax)return Jc[e]=t[n];return e}var Px=cc("animationend"),Ix=cc("animationiteration"),Dx=cc("animationstart"),Tx=cc("transitionend"),Ox=new Map,vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(e,t){Ox.set(e,t),fr(t,[e])}for(var Yc=0;Yc<vh.length;Yc++){var Xc=vh[Yc],hw=Xc.toLowerCase(),pw=Xc[0].toUpperCase()+Xc.slice(1);Ms(hw,"on"+pw)}Ms(Px,"onAnimationEnd");Ms(Ix,"onAnimationIteration");Ms(Dx,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(Tx,"onTransitionEnd");Xr("onMouseEnter",["mouseout","mouseover"]);Xr("onMouseLeave",["mouseout","mouseover"]);Xr("onPointerEnter",["pointerout","pointerover"]);Xr("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fa));function wh(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,h1(s,t,void 0,e),e.currentTarget=null}function Lx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&r.isPropagationStopped())break e;wh(r,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&r.isPropagationStopped())break e;wh(r,o,d),i=c}}}if(mo)throw e=Qd,mo=!1,Qd=null,e}function je(e,t){var n=t[ru];n===void 0&&(n=t[ru]=new Set);var s=e+"__bubble";n.has(s)||(Rx(t,e,2,!1),n.add(s))}function ed(e,t,n){var s=0;t&&(s|=4),Rx(n,e,s,t)}var kl="_reactListening"+Math.random().toString(36).slice(2);function yi(e){if(!e[kl]){e[kl]=!0,zg.forEach(function(n){n!=="selectionchange"&&(gw.has(n)||ed(n,!1,e),ed(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kl]||(t[kl]=!0,ed("selectionchange",!1,t))}}function Rx(e,t,n,s){switch(vx(t)){case 1:var r=P1;break;case 4:r=I1;break;default:r=_m}n=r.bind(null,t,n,e),r=void 0,!Wd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function td(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;l=l.return}for(;o!==null;){if(l=Ks(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}ax(function(){var d=i,u=jm(n),h=[];e:{var m=Ox.get(e);if(m!==void 0){var g=Cm,j=e;switch(e){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":g=K1;break;case"focusin":j="focus",g=Qc;break;case"focusout":j="blur",g=Qc;break;case"beforeblur":case"afterblur":g=Qc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=O1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Z1;break;case Px:case Ix:case Dx:g=M1;break;case Tx:g=J1;break;case"scroll":g=D1;break;case"wheel":g=X1;break;case"copy":case"cut":case"paste":g=F1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dh}var v=(t&4)!==0,w=!v&&e==="scroll",p=v?m!==null?m+"Capture":null:m;v=[];for(var f=d,y;f!==null;){y=f;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,p!==null&&(N=mi(f,p),N!=null&&v.push(vi(f,N,y)))),w)break;f=f.return}0<v.length&&(m=new g(m,j,null,n,u),h.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==qd&&(j=n.relatedTarget||n.fromElement)&&(Ks(j)||j[zn]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(j=n.relatedTarget||n.toElement,g=d,j=j?Ks(j):null,j!==null&&(w=hr(j),j!==w||j.tag!==5&&j.tag!==6)&&(j=null)):(g=null,j=d),g!==j)){if(v=oh,N="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(v=dh,N="onPointerLeave",p="onPointerEnter",f="pointer"),w=g==null?m:Tr(g),y=j==null?m:Tr(j),m=new v(N,f+"leave",g,n,u),m.target=w,m.relatedTarget=y,N=null,Ks(u)===d&&(v=new v(p,f+"enter",j,n,u),v.target=y,v.relatedTarget=w,N=v),w=N,g&&j)t:{for(v=g,p=j,f=0,y=v;y;y=xr(y))f++;for(y=0,N=p;N;N=xr(N))y++;for(;0<f-y;)v=xr(v),f--;for(;0<y-f;)p=xr(p),y--;for(;f--;){if(v===p||p!==null&&v===p.alternate)break t;v=xr(v),p=xr(p)}v=null}else v=null;g!==null&&bh(h,m,g,v,!1),j!==null&&w!==null&&bh(h,w,j,v,!0)}}e:{if(m=d?Tr(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var b=iw;else if(fh(m))if(Sx)b=dw;else{b=ow;var S=lw}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=cw);if(b&&(b=b(e,d))){kx(h,b,n,u);break e}S&&S(e,m,d),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Bd(m,"number",m.value)}switch(S=d?Tr(d):window,e){case"focusin":(fh(S)||S.contentEditable==="true")&&(Ir=S,Yd=d,Za=null);break;case"focusout":Za=Yd=Ir=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,yh(h,n,u);break;case"selectionchange":if(fw)break;case"keydown":case"keyup":yh(h,n,u)}var k;if(Pm)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pr?jx(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(bx&&n.locale!=="ko"&&(Pr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pr&&(k=wx()):(fs=u,Em="value"in fs?fs.value:fs.textContent,Pr=!0)),S=xo(d,E),0<S.length&&(E=new ch(E,e,null,n,u),h.push({event:E,listeners:S}),k?E.data=k:(k=Nx(n),k!==null&&(E.data=k)))),(k=tw?nw(e,n):sw(e,n))&&(d=xo(d,"onBeforeInput"),0<d.length&&(u=new ch("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=k))}Lx(h,t)})}function vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xo(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=mi(e,n),i!=null&&s.unshift(vi(e,i,r)),i=mi(e,t),i!=null&&s.push(vi(e,i,r))),e=e.return}return s}function xr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bh(e,t,n,s,r){for(var i=t._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,r?(c=mi(n,i),c!=null&&l.unshift(vi(n,c,o))):r||(c=mi(n,i),c!=null&&l.push(vi(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var xw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function jh(e){return(typeof e=="string"?e:""+e).replace(xw,`
`).replace(yw,"")}function Sl(e,t,n){if(t=jh(t),jh(e)!==t&&n)throw Error($(425))}function yo(){}var eu=null,tu=null;function nu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var su=typeof setTimeout=="function"?setTimeout:void 0,vw=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,ww=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(bw)}:su;function bw(e){setTimeout(function(){throw e})}function nd(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),pi(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);pi(t)}function vs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pa=Math.random().toString(36).slice(2),gn="__reactFiber$"+pa,wi="__reactProps$"+pa,zn="__reactContainer$"+pa,ru="__reactEvents$"+pa,jw="__reactListeners$"+pa,Nw="__reactHandles$"+pa;function Ks(e){var t=e[gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zn]||n[gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kh(e);e!==null;){if(n=e[gn])return n;e=kh(e)}return t}e=n,n=e.parentNode}return null}function sl(e){return e=e[gn]||e[zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function dc(e){return e[wi]||null}var au=[],Or=-1;function $s(e){return{current:e}}function ke(e){0>Or||(e.current=au[Or],au[Or]=null,Or--)}function we(e,t){Or++,au[Or]=e.current,e.current=t}var Cs={},it=$s(Cs),bt=$s(!1),sr=Cs;function ea(e,t){var n=e.type.contextTypes;if(!n)return Cs;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function jt(e){return e=e.childContextTypes,e!=null}function vo(){ke(bt),ke(it)}function Sh(e,t,n){if(it.current!==Cs)throw Error($(168));we(it,t),we(bt,n)}function Mx(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error($(108,l1(e)||"Unknown",r));return Ie({},n,s)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,sr=it.current,we(it,e),we(bt,bt.current),!0}function _h(e,t,n){var s=e.stateNode;if(!s)throw Error($(169));n?(e=Mx(e,t,sr),s.__reactInternalMemoizedMergedChildContext=e,ke(bt),ke(it),we(it,e)):ke(bt),we(bt,n)}var Dn=null,uc=!1,sd=!1;function $x(e){Dn===null?Dn=[e]:Dn.push(e)}function kw(e){uc=!0,$x(e)}function Fs(){if(!sd&&Dn!==null){sd=!0;var e=0,t=pe;try{var n=Dn;for(pe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Dn=null,uc=!1}catch(r){throw Dn!==null&&(Dn=Dn.slice(e+1)),cx(Nm,Fs),r}finally{pe=t,sd=!1}}return null}var Lr=[],Rr=0,bo=null,jo=0,Bt=[],Vt=0,rr=null,Ln=1,Rn="";function Hs(e,t){Lr[Rr++]=jo,Lr[Rr++]=bo,bo=e,jo=t}function Fx(e,t,n){Bt[Vt++]=Ln,Bt[Vt++]=Rn,Bt[Vt++]=rr,rr=e;var s=Ln;e=Rn;var r=32-nn(s)-1;s&=~(1<<r),n+=1;var i=32-nn(t)+r;if(30<i){var l=r-r%5;i=(s&(1<<l)-1).toString(32),s>>=l,r-=l,Ln=1<<32-nn(t)+r|n<<r|s,Rn=i+e}else Ln=1<<i|n<<r|s,Rn=e}function Dm(e){e.return!==null&&(Hs(e,1),Fx(e,1,0))}function Tm(e){for(;e===bo;)bo=Lr[--Rr],Lr[Rr]=null,jo=Lr[--Rr],Lr[Rr]=null;for(;e===rr;)rr=Bt[--Vt],Bt[Vt]=null,Rn=Bt[--Vt],Bt[Vt]=null,Ln=Bt[--Vt],Bt[Vt]=null}var It=null,Pt=null,Ee=!1,Yt=null;function Bx(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Eh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Pt=vs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=rr!==null?{id:Ln,overflow:Rn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,It=e,Pt=null,!0):!1;default:return!1}}function iu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lu(e){if(Ee){var t=Pt;if(t){var n=t;if(!Eh(e,t)){if(iu(e))throw Error($(418));t=vs(n.nextSibling);var s=It;t&&Eh(e,t)?Bx(s,n):(e.flags=e.flags&-4097|2,Ee=!1,It=e)}}else{if(iu(e))throw Error($(418));e.flags=e.flags&-4097|2,Ee=!1,It=e}}}function Ch(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function _l(e){if(e!==It)return!1;if(!Ee)return Ch(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nu(e.type,e.memoizedProps)),t&&(t=Pt)){if(iu(e))throw Vx(),Error($(418));for(;t;)Bx(e,t),t=vs(t.nextSibling)}if(Ch(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Pt=vs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Pt=null}}else Pt=It?vs(e.stateNode.nextSibling):null;return!0}function Vx(){for(var e=Pt;e;)e=vs(e.nextSibling)}function ta(){Pt=It=null,Ee=!1}function Om(e){Yt===null?Yt=[e]:Yt.push(e)}var Sw=Gn.ReactCurrentBatchConfig;function Ca(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var s=n.stateNode}if(!s)throw Error($(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=r.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function El(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ah(e){var t=e._init;return t(e._payload)}function Ux(e){function t(p,f){if(e){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function s(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function r(p,f){return p=Ns(p,f),p.index=0,p.sibling=null,p}function i(p,f,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,f,y,N){return f===null||f.tag!==6?(f=dd(y,p.mode,N),f.return=p,f):(f=r(f,y),f.return=p,f)}function c(p,f,y,N){var b=y.type;return b===Ar?u(p,f,y.props.children,N,y.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===as&&Ah(b)===f.type)?(N=r(f,y.props),N.ref=Ca(p,f,y),N.return=p,N):(N=eo(y.type,y.key,y.props,null,p.mode,N),N.ref=Ca(p,f,y),N.return=p,N)}function d(p,f,y,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=ud(y,p.mode,N),f.return=p,f):(f=r(f,y.children||[]),f.return=p,f)}function u(p,f,y,N,b){return f===null||f.tag!==7?(f=Ys(y,p.mode,N,b),f.return=p,f):(f=r(f,y),f.return=p,f)}function h(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=dd(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case gl:return y=eo(f.type,f.key,f.props,null,p.mode,y),y.ref=Ca(p,null,f),y.return=p,y;case Cr:return f=ud(f,p.mode,y),f.return=p,f;case as:var N=f._init;return h(p,N(f._payload),y)}if(Ma(f)||Na(f))return f=Ys(f,p.mode,y,null),f.return=p,f;El(p,f)}return null}function m(p,f,y,N){var b=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:o(p,f,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case gl:return y.key===b?c(p,f,y,N):null;case Cr:return y.key===b?d(p,f,y,N):null;case as:return b=y._init,m(p,f,b(y._payload),N)}if(Ma(y)||Na(y))return b!==null?null:u(p,f,y,N,null);El(p,y)}return null}function g(p,f,y,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(y)||null,o(f,p,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case gl:return p=p.get(N.key===null?y:N.key)||null,c(f,p,N,b);case Cr:return p=p.get(N.key===null?y:N.key)||null,d(f,p,N,b);case as:var S=N._init;return g(p,f,y,S(N._payload),b)}if(Ma(N)||Na(N))return p=p.get(y)||null,u(f,p,N,b,null);El(f,N)}return null}function j(p,f,y,N){for(var b=null,S=null,k=f,E=f=0,_=null;k!==null&&E<y.length;E++){k.index>E?(_=k,k=null):_=k.sibling;var I=m(p,k,y[E],N);if(I===null){k===null&&(k=_);break}e&&k&&I.alternate===null&&t(p,k),f=i(I,f,E),S===null?b=I:S.sibling=I,S=I,k=_}if(E===y.length)return n(p,k),Ee&&Hs(p,E),b;if(k===null){for(;E<y.length;E++)k=h(p,y[E],N),k!==null&&(f=i(k,f,E),S===null?b=k:S.sibling=k,S=k);return Ee&&Hs(p,E),b}for(k=s(p,k);E<y.length;E++)_=g(k,p,E,y[E],N),_!==null&&(e&&_.alternate!==null&&k.delete(_.key===null?E:_.key),f=i(_,f,E),S===null?b=_:S.sibling=_,S=_);return e&&k.forEach(function(T){return t(p,T)}),Ee&&Hs(p,E),b}function v(p,f,y,N){var b=Na(y);if(typeof b!="function")throw Error($(150));if(y=b.call(y),y==null)throw Error($(151));for(var S=b=null,k=f,E=f=0,_=null,I=y.next();k!==null&&!I.done;E++,I=y.next()){k.index>E?(_=k,k=null):_=k.sibling;var T=m(p,k,I.value,N);if(T===null){k===null&&(k=_);break}e&&k&&T.alternate===null&&t(p,k),f=i(T,f,E),S===null?b=T:S.sibling=T,S=T,k=_}if(I.done)return n(p,k),Ee&&Hs(p,E),b;if(k===null){for(;!I.done;E++,I=y.next())I=h(p,I.value,N),I!==null&&(f=i(I,f,E),S===null?b=I:S.sibling=I,S=I);return Ee&&Hs(p,E),b}for(k=s(p,k);!I.done;E++,I=y.next())I=g(k,p,E,I.value,N),I!==null&&(e&&I.alternate!==null&&k.delete(I.key===null?E:I.key),f=i(I,f,E),S===null?b=I:S.sibling=I,S=I);return e&&k.forEach(function(L){return t(p,L)}),Ee&&Hs(p,E),b}function w(p,f,y,N){if(typeof y=="object"&&y!==null&&y.type===Ar&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case gl:e:{for(var b=y.key,S=f;S!==null;){if(S.key===b){if(b=y.type,b===Ar){if(S.tag===7){n(p,S.sibling),f=r(S,y.props.children),f.return=p,p=f;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===as&&Ah(b)===S.type){n(p,S.sibling),f=r(S,y.props),f.ref=Ca(p,S,y),f.return=p,p=f;break e}n(p,S);break}else t(p,S);S=S.sibling}y.type===Ar?(f=Ys(y.props.children,p.mode,N,y.key),f.return=p,p=f):(N=eo(y.type,y.key,y.props,null,p.mode,N),N.ref=Ca(p,f,y),N.return=p,p=N)}return l(p);case Cr:e:{for(S=y.key;f!==null;){if(f.key===S)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=r(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=ud(y,p.mode,N),f.return=p,p=f}return l(p);case as:return S=y._init,w(p,f,S(y._payload),N)}if(Ma(y))return j(p,f,y,N);if(Na(y))return v(p,f,y,N);El(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=r(f,y),f.return=p,p=f):(n(p,f),f=dd(y,p.mode,N),f.return=p,p=f),l(p)):n(p,f)}return w}var na=Ux(!0),zx=Ux(!1),No=$s(null),ko=null,Mr=null,Lm=null;function Rm(){Lm=Mr=ko=null}function Mm(e){var t=No.current;ke(No),e._currentValue=t}function ou(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function qr(e,t){ko=e,Lm=Mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(Lm!==e)if(e={context:e,memoizedValue:t,next:null},Mr===null){if(ko===null)throw Error($(308));Mr=e,ko.dependencies={lanes:0,firstContext:e}}else Mr=Mr.next=e;return t}var Ws=null;function $m(e){Ws===null?Ws=[e]:Ws.push(e)}function Hx(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,$m(t)):(n.next=r.next,r.next=n),t.interleaved=n,Hn(e,s)}function Hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var is=!1;function Fm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $n(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ws(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,fe&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Hn(e,n)}return r=s.interleaved,r===null?(t.next=t,$m(s)):(t.next=r.next,r.next=t),s.interleaved=t,Hn(e,n)}function Ql(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,km(e,n)}}function Ph(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function So(e,t,n,s){var r=e.updateQueue;is=!1;var i=r.firstBaseUpdate,l=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;l=0,u=d=c=null,o=i;do{var m=o.lane,g=o.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var j=e,v=o;switch(m=t,g=n,v.tag){case 1:if(j=v.payload,typeof j=="function"){h=j.call(g,h,m);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=v.payload,m=typeof j=="function"?j.call(g,h,m):j,m==null)break e;h=Ie({},h,m);break e;case 2:is=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=r.effects,m===null?r.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,l|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;m=o,o=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,t=r.shared.interleaved,t!==null){r=t;do l|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);ir|=l,e.lanes=l,e.memoizedState=h}}function Ih(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error($(191,r));r.call(s)}}}var rl={},vn=$s(rl),bi=$s(rl),ji=$s(rl);function Qs(e){if(e===rl)throw Error($(174));return e}function Bm(e,t){switch(we(ji,t),we(bi,e),we(vn,rl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ud(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ud(t,e)}ke(vn),we(vn,t)}function sa(){ke(vn),ke(bi),ke(ji)}function Kx(e){Qs(ji.current);var t=Qs(vn.current),n=Ud(t,e.type);t!==n&&(we(bi,e),we(vn,n))}function Vm(e){bi.current===e&&(ke(vn),ke(bi))}var Ae=$s(0);function _o(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rd=[];function Um(){for(var e=0;e<rd.length;e++)rd[e]._workInProgressVersionPrimary=null;rd.length=0}var Zl=Gn.ReactCurrentDispatcher,ad=Gn.ReactCurrentBatchConfig,ar=0,Pe=null,Ue=null,Qe=null,Eo=!1,Ga=!1,Ni=0,_w=0;function et(){throw Error($(321))}function zm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ln(e[n],t[n]))return!1;return!0}function Hm(e,t,n,s,r,i){if(ar=i,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zl.current=e===null||e.memoizedState===null?Pw:Iw,e=n(s,r),Ga){i=0;do{if(Ga=!1,Ni=0,25<=i)throw Error($(301));i+=1,Qe=Ue=null,t.updateQueue=null,Zl.current=Dw,e=n(s,r)}while(Ga)}if(Zl.current=Co,t=Ue!==null&&Ue.next!==null,ar=0,Qe=Ue=Pe=null,Eo=!1,t)throw Error($(300));return e}function qm(){var e=Ni!==0;return Ni=0,e}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Pe.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Wt(){if(Ue===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Qe===null?Pe.memoizedState:Qe.next;if(t!==null)Qe=t,Ue=e;else{if(e===null)throw Error($(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Qe===null?Pe.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function ki(e,t){return typeof t=="function"?t(e):t}function id(e){var t=Wt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var s=Ue,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var l=r.next;r.next=i.next,i.next=l}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ar&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=s):c=c.next=h,Pe.lanes|=u,ir|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,ln(s,t.memoizedState)||(wt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Pe.lanes|=i,ir|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ld(e){var t=Wt(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do i=e(i,l.action),l=l.next;while(l!==r);ln(i,t.memoizedState)||(wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Wx(){}function Qx(e,t){var n=Pe,s=Wt(),r=t(),i=!ln(s.memoizedState,r);if(i&&(s.memoizedState=r,wt=!0),s=s.queue,Km(Jx.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Si(9,Gx.bind(null,n,s,r,t),void 0,null),Ze===null)throw Error($(349));ar&30||Zx(n,t,r)}return r}function Zx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gx(e,t,n,s){t.value=n,t.getSnapshot=s,Yx(t)&&Xx(e)}function Jx(e,t,n){return n(function(){Yx(t)&&Xx(e)})}function Yx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ln(e,n)}catch{return!0}}function Xx(e){var t=Hn(e,1);t!==null&&sn(t,e,1,-1)}function Dh(e){var t=fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:e},t.queue=e,e=e.dispatch=Aw.bind(null,Pe,e),[t.memoizedState,e]}function Si(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function ey(){return Wt().memoizedState}function Gl(e,t,n,s){var r=fn();Pe.flags|=e,r.memoizedState=Si(1|t,n,void 0,s===void 0?null:s)}function mc(e,t,n,s){var r=Wt();s=s===void 0?null:s;var i=void 0;if(Ue!==null){var l=Ue.memoizedState;if(i=l.destroy,s!==null&&zm(s,l.deps)){r.memoizedState=Si(t,n,i,s);return}}Pe.flags|=e,r.memoizedState=Si(1|t,n,i,s)}function Th(e,t){return Gl(8390656,8,e,t)}function Km(e,t){return mc(2048,8,e,t)}function ty(e,t){return mc(4,2,e,t)}function ny(e,t){return mc(4,4,e,t)}function sy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ry(e,t,n){return n=n!=null?n.concat([e]):null,mc(4,4,sy.bind(null,t,e),n)}function Wm(){}function ay(e,t){var n=Wt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&zm(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function iy(e,t){var n=Wt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&zm(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function ly(e,t,n){return ar&21?(ln(n,t)||(n=mx(),Pe.lanes|=n,ir|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=n)}function Ew(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var s=ad.transition;ad.transition={};try{e(!1),t()}finally{pe=n,ad.transition=s}}function oy(){return Wt().memoizedState}function Cw(e,t,n){var s=js(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},cy(e))dy(t,n);else if(n=Hx(e,t,n,s),n!==null){var r=ft();sn(n,e,s,r),uy(n,t,s)}}function Aw(e,t,n){var s=js(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(cy(e))dy(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(r.hasEagerState=!0,r.eagerState=o,ln(o,l)){var c=t.interleaved;c===null?(r.next=r,$m(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Hx(e,t,r,s),n!==null&&(r=ft(),sn(n,e,s,r),uy(n,t,s))}}function cy(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function dy(e,t){Ga=Eo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uy(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,km(e,n)}}var Co={readContext:Kt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Pw={readContext:Kt,useCallback:function(e,t){return fn().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Th,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Gl(4194308,4,sy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Gl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gl(4,2,e,t)},useMemo:function(e,t){var n=fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=fn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Cw.bind(null,Pe,e),[s.memoizedState,e]},useRef:function(e){var t=fn();return e={current:e},t.memoizedState=e},useState:Dh,useDebugValue:Wm,useDeferredValue:function(e){return fn().memoizedState=e},useTransition:function(){var e=Dh(!1),t=e[0];return e=Ew.bind(null,e[1]),fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Pe,r=fn();if(Ee){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),Ze===null)throw Error($(349));ar&30||Zx(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Th(Jx.bind(null,s,i,e),[e]),s.flags|=2048,Si(9,Gx.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=fn(),t=Ze.identifierPrefix;if(Ee){var n=Rn,s=Ln;n=(s&~(1<<32-nn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ni++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_w++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Iw={readContext:Kt,useCallback:ay,useContext:Kt,useEffect:Km,useImperativeHandle:ry,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:iy,useReducer:id,useRef:ey,useState:function(){return id(ki)},useDebugValue:Wm,useDeferredValue:function(e){var t=Wt();return ly(t,Ue.memoizedState,e)},useTransition:function(){var e=id(ki)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Wx,useSyncExternalStore:Qx,useId:oy,unstable_isNewReconciler:!1},Dw={readContext:Kt,useCallback:ay,useContext:Kt,useEffect:Km,useImperativeHandle:ry,useInsertionEffect:ty,useLayoutEffect:ny,useMemo:iy,useReducer:ld,useRef:ey,useState:function(){return ld(ki)},useDebugValue:Wm,useDeferredValue:function(e){var t=Wt();return Ue===null?t.memoizedState=e:ly(t,Ue.memoizedState,e)},useTransition:function(){var e=ld(ki)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Wx,useSyncExternalStore:Qx,useId:oy,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cu(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fc={isMounted:function(e){return(e=e._reactInternals)?hr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ft(),r=js(e),i=$n(s,r);i.payload=t,n!=null&&(i.callback=n),t=ws(e,i,r),t!==null&&(sn(t,e,r,s),Ql(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ft(),r=js(e),i=$n(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ws(e,i,r),t!==null&&(sn(t,e,r,s),Ql(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ft(),s=js(e),r=$n(n,s);r.tag=2,t!=null&&(r.callback=t),t=ws(e,r,s),t!==null&&(sn(t,e,s,n),Ql(t,e,s))}};function Oh(e,t,n,s,r,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!xi(n,s)||!xi(r,i):!0}function my(e,t,n){var s=!1,r=Cs,i=t.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(r=jt(t)?sr:it.current,s=t.contextTypes,i=(s=s!=null)?ea(e,r):Cs),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fc,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function Lh(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&fc.enqueueReplaceState(t,t.state,null)}function du(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Fm(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Kt(i):(i=jt(t)?sr:it.current,r.context=ea(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(cu(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&fc.enqueueReplaceState(r,r.state,null),So(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function ra(e,t){try{var n="",s=t;do n+=i1(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function od(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Tw=typeof WeakMap=="function"?WeakMap:Map;function fy(e,t,n){n=$n(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Po||(Po=!0,bu=s),uu(e,t)},n}function hy(e,t,n){n=$n(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){uu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){uu(e,t),typeof s!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Rh(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Tw;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=Ww.bind(null,e,t,n),t.then(e,e))}function Mh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $h(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$n(-1,1),t.tag=2,ws(n,t,1))),n.lanes|=1),e)}var Ow=Gn.ReactCurrentOwner,wt=!1;function dt(e,t,n,s){t.child=e===null?zx(t,null,n,s):na(t,e.child,n,s)}function Fh(e,t,n,s,r){n=n.render;var i=t.ref;return qr(t,r),s=Hm(e,t,n,s,i,r),n=qm(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qn(e,t,r)):(Ee&&n&&Dm(t),t.flags|=1,dt(e,t,s,r),t.child)}function Bh(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!tf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,py(e,t,i,s,r)):(e=eo(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:xi,n(l,s)&&e.ref===t.ref)return qn(e,t,r)}return t.flags|=1,e=Ns(i,s),e.ref=t.ref,e.return=t,t.child=e}function py(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(xi(i,s)&&e.ref===t.ref)if(wt=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,qn(e,t,r)}return mu(e,t,n,s,r)}function gy(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Fr,Ct),Ct|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Fr,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,we(Fr,Ct),Ct|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,we(Fr,Ct),Ct|=s;return dt(e,t,r,n),t.child}function xy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mu(e,t,n,s,r){var i=jt(n)?sr:it.current;return i=ea(t,i),qr(t,r),n=Hm(e,t,n,s,i,r),s=qm(),e!==null&&!wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qn(e,t,r)):(Ee&&s&&Dm(t),t.flags|=1,dt(e,t,n,r),t.child)}function Vh(e,t,n,s,r){if(jt(n)){var i=!0;wo(t)}else i=!1;if(qr(t,r),t.stateNode===null)Jl(e,t),my(t,n,s),du(t,n,s,r),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=jt(n)?sr:it.current,d=ea(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&Lh(t,l,s,d),is=!1;var m=t.memoizedState;l.state=m,So(t,s,l,r),c=t.memoizedState,o!==s||m!==c||bt.current||is?(typeof u=="function"&&(cu(t,n,u,s),c=t.memoizedState),(o=is||Oh(t,n,o,s,m,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,qx(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Gt(t.type,o),l.props=d,h=t.pendingProps,m=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=jt(n)?sr:it.current,c=ea(t,c));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||m!==c)&&Lh(t,l,s,c),is=!1,m=t.memoizedState,l.state=m,So(t,s,l,r);var j=t.memoizedState;o!==h||m!==j||bt.current||is?(typeof g=="function"&&(cu(t,n,g,s),j=t.memoizedState),(d=is||Oh(t,n,d,s,m,j,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,j,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,j,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=j),l.props=s,l.state=j,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return fu(e,t,n,s,i,r)}function fu(e,t,n,s,r,i){xy(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return r&&_h(t,n,!1),qn(e,t,i);s=t.stateNode,Ow.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=na(t,e.child,null,i),t.child=na(t,null,o,i)):dt(e,t,o,i),t.memoizedState=s.state,r&&_h(t,n,!0),t.child}function yy(e){var t=e.stateNode;t.pendingContext?Sh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sh(e,t.context,!1),Bm(e,t.containerInfo)}function Uh(e,t,n,s,r){return ta(),Om(r),t.flags|=256,dt(e,t,n,s),t.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function pu(e){return{baseLanes:e,cachePool:null,transitions:null}}function vy(e,t,n){var s=t.pendingProps,r=Ae.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(r&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),we(Ae,r&1),e===null)return lu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=gc(l,s,0,null),e=Ys(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pu(n),t.memoizedState=hu,e):Qm(t,l));if(r=e.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return Lw(e,t,l,s,o,r,n);if(i){i=s.fallback,l=t.mode,r=e.child,o=r.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ns(r,c),s.subtreeFlags=r.subtreeFlags&14680064),o!==null?i=Ns(o,i):(i=Ys(i,l,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?pu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=hu,s}return i=e.child,e=i.sibling,s=Ns(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Qm(e,t){return t=gc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cl(e,t,n,s){return s!==null&&Om(s),na(t,e.child,null,n),e=Qm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lw(e,t,n,s,r,i,l){if(n)return t.flags&256?(t.flags&=-257,s=od(Error($(422))),Cl(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=gc({mode:"visible",children:s.children},r,0,null),i=Ys(i,r,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&na(t,e.child,null,l),t.child.memoizedState=pu(l),t.memoizedState=hu,i);if(!(t.mode&1))return Cl(e,t,l,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error($(419)),s=od(i,s,void 0),Cl(e,t,l,s)}if(o=(l&e.childLanes)!==0,wt||o){if(s=Ze,s!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|l)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Hn(e,r),sn(s,e,r,-1))}return ef(),s=od(Error($(421))),Cl(e,t,l,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Qw.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,Pt=vs(r.nextSibling),It=t,Ee=!0,Yt=null,e!==null&&(Bt[Vt++]=Ln,Bt[Vt++]=Rn,Bt[Vt++]=rr,Ln=e.id,Rn=e.overflow,rr=t),t=Qm(t,s.children),t.flags|=4096,t)}function zh(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ou(e.return,t,n)}function cd(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function wy(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(dt(e,t,s.children,n),s=Ae.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zh(e,n,t);else if(e.tag===19)zh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(we(Ae,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&_o(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),cd(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&_o(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}cd(t,!0,n,null,i);break;case"together":cd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ir|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Ns(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ns(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rw(e,t,n){switch(t.tag){case 3:yy(t),ta();break;case 5:Kx(t);break;case 1:jt(t.type)&&wo(t);break;case 4:Bm(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;we(No,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(we(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?vy(e,t,n):(we(Ae,Ae.current&1),e=qn(e,t,n),e!==null?e.sibling:null);we(Ae,Ae.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return wy(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),we(Ae,Ae.current),s)break;return null;case 22:case 23:return t.lanes=0,gy(e,t,n)}return qn(e,t,n)}var by,gu,jy,Ny;by=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gu=function(){};jy=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Qs(vn.current);var i=null;switch(n){case"input":r=$d(e,r),s=$d(e,s),i=[];break;case"select":r=Ie({},r,{value:void 0}),s=Ie({},s,{value:void 0}),i=[];break;case"textarea":r=Vd(e,r),s=Vd(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=yo)}zd(n,s);var l;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var o=r[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(di.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(di.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&je("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Ny=function(e,t,n,s){n!==s&&(t.flags|=4)};function Aa(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Mw(e,t,n){var s=t.pendingProps;switch(Tm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return jt(t.type)&&vo(),tt(t),null;case 3:return s=t.stateNode,sa(),ke(bt),ke(it),Um(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(_l(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yt!==null&&(ku(Yt),Yt=null))),gu(e,t),tt(t),null;case 5:Vm(t);var r=Qs(ji.current);if(n=t.type,e!==null&&t.stateNode!=null)jy(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error($(166));return tt(t),null}if(e=Qs(vn.current),_l(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[gn]=t,s[wi]=i,e=(t.mode&1)!==0,n){case"dialog":je("cancel",s),je("close",s);break;case"iframe":case"object":case"embed":je("load",s);break;case"video":case"audio":for(r=0;r<Fa.length;r++)je(Fa[r],s);break;case"source":je("error",s);break;case"img":case"image":case"link":je("error",s),je("load",s);break;case"details":je("toggle",s);break;case"input":Yf(s,i),je("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},je("invalid",s);break;case"textarea":eh(s,i),je("invalid",s)}zd(n,i),r=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&Sl(s.textContent,o,e),r=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Sl(s.textContent,o,e),r=["children",""+o]):di.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&je("scroll",s)}switch(n){case"input":xl(s),Xf(s,i,!0);break;case"textarea":xl(s),th(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=yo)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[gn]=t,e[wi]=s,by(e,t,!1,!1),t.stateNode=e;e:{switch(l=Hd(n,s),n){case"dialog":je("cancel",e),je("close",e),r=s;break;case"iframe":case"object":case"embed":je("load",e),r=s;break;case"video":case"audio":for(r=0;r<Fa.length;r++)je(Fa[r],e);r=s;break;case"source":je("error",e),r=s;break;case"img":case"image":case"link":je("error",e),je("load",e),r=s;break;case"details":je("toggle",e),r=s;break;case"input":Yf(e,s),r=$d(e,s),je("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=Ie({},s,{value:void 0}),je("invalid",e);break;case"textarea":eh(e,s),r=Vd(e,s),je("invalid",e);break;default:r=s}zd(n,r),o=r;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?ex(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yg(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ui(e,c):typeof c=="number"&&ui(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(di.hasOwnProperty(i)?c!=null&&i==="onScroll"&&je("scroll",e):c!=null&&ym(e,i,c,l))}switch(n){case"input":xl(e),Xf(e,s,!1);break;case"textarea":xl(e),th(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Es(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Vr(e,!!s.multiple,i,!1):s.defaultValue!=null&&Vr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=yo)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)Ny(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error($(166));if(n=Qs(ji.current),Qs(vn.current),_l(t)){if(s=t.stateNode,n=t.memoizedProps,s[gn]=t,(i=s.nodeValue!==n)&&(e=It,e!==null))switch(e.tag){case 3:Sl(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[gn]=t,t.stateNode=s}return tt(t),null;case 13:if(ke(Ae),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&Pt!==null&&t.mode&1&&!(t.flags&128))Vx(),ta(),t.flags|=98560,i=!1;else if(i=_l(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[gn]=t}else ta(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else Yt!==null&&(ku(Yt),Yt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?He===0&&(He=3):ef())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return sa(),gu(e,t),e===null&&yi(t.stateNode.containerInfo),tt(t),null;case 10:return Mm(t.type._context),tt(t),null;case 17:return jt(t.type)&&vo(),tt(t),null;case 19:if(ke(Ae),i=t.memoizedState,i===null)return tt(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)Aa(i,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=_o(e),l!==null){for(t.flags|=128,Aa(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(Ae,Ae.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oe()>aa&&(t.flags|=128,s=!0,Aa(i,!1),t.lanes=4194304)}else{if(!s)if(e=_o(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Aa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ee)return tt(t),null}else 2*Oe()-i.renderingStartTime>aa&&n!==1073741824&&(t.flags|=128,s=!0,Aa(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oe(),t.sibling=null,n=Ae.current,we(Ae,s?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Xm(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ct&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function $w(e,t){switch(Tm(t),t.tag){case 1:return jt(t.type)&&vo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sa(),ke(bt),ke(it),Um(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vm(t),null;case 13:if(ke(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Ae),null;case 4:return sa(),null;case 10:return Mm(t.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var Al=!1,st=!1,Fw=typeof WeakSet=="function"?WeakSet:Set,Z=null;function $r(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Te(e,t,s)}else n.current=null}function xu(e,t,n){try{n()}catch(s){Te(e,t,s)}}var Hh=!1;function Bw(e,t){if(eu=po,e=Cx(),Im(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(o=l+r),h!==i||s!==0&&h.nodeType!==3||(c=l+s),h.nodeType===3&&(l+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===n&&++d===r&&(o=l),m===i&&++u===s&&(c=l),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tu={focusedElem:e,selectionRange:n},po=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var v=j.memoizedProps,w=j.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:Gt(t.type,v),w);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){Te(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return j=Hh,Hh=!1,j}function Ja(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&xu(t,n,i)}r=r.next}while(r!==s)}}function hc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function yu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ky(e){var t=e.alternate;t!==null&&(e.alternate=null,ky(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gn],delete t[wi],delete t[ru],delete t[jw],delete t[Nw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sy(e){return e.tag===5||e.tag===3||e.tag===4}function qh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yo));else if(s!==4&&(e=e.child,e!==null))for(vu(e,t,n),e=e.sibling;e!==null;)vu(e,t,n),e=e.sibling}function wu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(wu(e,t,n),e=e.sibling;e!==null;)wu(e,t,n),e=e.sibling}var Je=null,Jt=!1;function ns(e,t,n){for(n=n.child;n!==null;)_y(e,t,n),n=n.sibling}function _y(e,t,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(ic,n)}catch{}switch(n.tag){case 5:st||$r(n,t);case 6:var s=Je,r=Jt;Je=null,ns(e,t,n),Je=s,Jt=r,Je!==null&&(Jt?(e=Je,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Jt?(e=Je,n=n.stateNode,e.nodeType===8?nd(e.parentNode,n):e.nodeType===1&&nd(e,n),pi(e)):nd(Je,n.stateNode));break;case 4:s=Je,r=Jt,Je=n.stateNode.containerInfo,Jt=!0,ns(e,t,n),Je=s,Jt=r;break;case 0:case 11:case 14:case 15:if(!st&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&xu(n,t,l),r=r.next}while(r!==s)}ns(e,t,n);break;case 1:if(!st&&($r(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Te(n,t,o)}ns(e,t,n);break;case 21:ns(e,t,n);break;case 22:n.mode&1?(st=(s=st)||n.memoizedState!==null,ns(e,t,n),st=s):ns(e,t,n);break;default:ns(e,t,n)}}function Kh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fw),t.forEach(function(s){var r=Zw.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Zt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Je=o.stateNode,Jt=!1;break e;case 3:Je=o.stateNode.containerInfo,Jt=!0;break e;case 4:Je=o.stateNode.containerInfo,Jt=!0;break e}o=o.return}if(Je===null)throw Error($(160));_y(i,l,r),Je=null,Jt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Te(r,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ey(t,e),t=t.sibling}function Ey(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zt(t,e),mn(e),s&4){try{Ja(3,e,e.return),hc(3,e)}catch(v){Te(e,e.return,v)}try{Ja(5,e,e.return)}catch(v){Te(e,e.return,v)}}break;case 1:Zt(t,e),mn(e),s&512&&n!==null&&$r(n,n.return);break;case 5:if(Zt(t,e),mn(e),s&512&&n!==null&&$r(n,n.return),e.flags&32){var r=e.stateNode;try{ui(r,"")}catch(v){Te(e,e.return,v)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Zg(r,i),Hd(o,l);var d=Hd(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?ex(r,h):u==="dangerouslySetInnerHTML"?Yg(r,h):u==="children"?ui(r,h):ym(r,u,h,d)}switch(o){case"input":Fd(r,i);break;case"textarea":Gg(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vr(r,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Vr(r,!!i.multiple,i.defaultValue,!0):Vr(r,!!i.multiple,i.multiple?[]:"",!1))}r[wi]=i}catch(v){Te(e,e.return,v)}}break;case 6:if(Zt(t,e),mn(e),s&4){if(e.stateNode===null)throw Error($(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(v){Te(e,e.return,v)}}break;case 3:if(Zt(t,e),mn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{pi(t.containerInfo)}catch(v){Te(e,e.return,v)}break;case 4:Zt(t,e),mn(e);break;case 13:Zt(t,e),mn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Jm=Oe())),s&4&&Kh(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(st=(d=st)||u,Zt(t,e),st=d):Zt(t,e),mn(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Z=e,u=e.child;u!==null;){for(h=Z=u;Z!==null;){switch(m=Z,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ja(4,m,m.return);break;case 1:$r(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){s=m,n=m.return;try{t=s,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(v){Te(s,n,v)}}break;case 5:$r(m,m.return);break;case 22:if(m.memoizedState!==null){Qh(h);continue}}g!==null?(g.return=m,Z=g):Qh(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Xg("display",l))}catch(v){Te(e,e.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(v){Te(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zt(t,e),mn(e),s&4&&Kh(e);break;case 21:break;default:Zt(t,e),mn(e)}}function mn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sy(n)){var s=n;break e}n=n.return}throw Error($(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(ui(r,""),s.flags&=-33);var i=qh(e);wu(e,i,r);break;case 3:case 4:var l=s.stateNode.containerInfo,o=qh(e);vu(e,o,l);break;default:throw Error($(161))}}catch(c){Te(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vw(e,t,n){Z=e,Cy(e)}function Cy(e,t,n){for(var s=(e.mode&1)!==0;Z!==null;){var r=Z,i=r.child;if(r.tag===22&&s){var l=r.memoizedState!==null||Al;if(!l){var o=r.alternate,c=o!==null&&o.memoizedState!==null||st;o=Al;var d=st;if(Al=l,(st=c)&&!d)for(Z=r;Z!==null;)l=Z,c=l.child,l.tag===22&&l.memoizedState!==null?Zh(r):c!==null?(c.return=l,Z=c):Zh(r);for(;i!==null;)Z=i,Cy(i),i=i.sibling;Z=r,Al=o,st=d}Wh(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Z=i):Wh(e)}}function Wh(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||hc(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!st)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Gt(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ih(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ih(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&pi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}st||t.flags&512&&yu(t)}catch(m){Te(t,t.return,m)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Qh(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Zh(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hc(4,t)}catch(c){Te(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){Te(t,r,c)}}var i=t.return;try{yu(t)}catch(c){Te(t,i,c)}break;case 5:var l=t.return;try{yu(t)}catch(c){Te(t,l,c)}}}catch(c){Te(t,t.return,c)}if(t===e){Z=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Z=o;break}Z=t.return}}var Uw=Math.ceil,Ao=Gn.ReactCurrentDispatcher,Zm=Gn.ReactCurrentOwner,Ht=Gn.ReactCurrentBatchConfig,fe=0,Ze=null,$e=null,Ye=0,Ct=0,Fr=$s(0),He=0,_i=null,ir=0,pc=0,Gm=0,Ya=null,vt=null,Jm=0,aa=1/0,In=null,Po=!1,bu=null,bs=null,Pl=!1,hs=null,Io=0,Xa=0,ju=null,Yl=-1,Xl=0;function ft(){return fe&6?Oe():Yl!==-1?Yl:Yl=Oe()}function js(e){return e.mode&1?fe&2&&Ye!==0?Ye&-Ye:Sw.transition!==null?(Xl===0&&(Xl=mx()),Xl):(e=pe,e!==0||(e=window.event,e=e===void 0?16:vx(e.type)),e):1}function sn(e,t,n,s){if(50<Xa)throw Xa=0,ju=null,Error($(185));tl(e,n,s),(!(fe&2)||e!==Ze)&&(e===Ze&&(!(fe&2)&&(pc|=n),He===4&&cs(e,Ye)),Nt(e,s),n===1&&fe===0&&!(t.mode&1)&&(aa=Oe()+500,uc&&Fs()))}function Nt(e,t){var n=e.callbackNode;S1(e,t);var s=ho(e,e===Ze?Ye:0);if(s===0)n!==null&&rh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&rh(n),t===1)e.tag===0?kw(Gh.bind(null,e)):$x(Gh.bind(null,e)),ww(function(){!(fe&6)&&Fs()}),n=null;else{switch(fx(s)){case 1:n=Nm;break;case 4:n=dx;break;case 16:n=fo;break;case 536870912:n=ux;break;default:n=fo}n=Ry(n,Ay.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ay(e,t){if(Yl=-1,Xl=0,fe&6)throw Error($(327));var n=e.callbackNode;if(Kr()&&e.callbackNode!==n)return null;var s=ho(e,e===Ze?Ye:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Do(e,s);else{t=s;var r=fe;fe|=2;var i=Iy();(Ze!==e||Ye!==t)&&(In=null,aa=Oe()+500,Js(e,t));do try{qw();break}catch(o){Py(e,o)}while(!0);Rm(),Ao.current=i,fe=r,$e!==null?t=0:(Ze=null,Ye=0,t=He)}if(t!==0){if(t===2&&(r=Zd(e),r!==0&&(s=r,t=Nu(e,r))),t===1)throw n=_i,Js(e,0),cs(e,s),Nt(e,Oe()),n;if(t===6)cs(e,s);else{if(r=e.current.alternate,!(s&30)&&!zw(r)&&(t=Do(e,s),t===2&&(i=Zd(e),i!==0&&(s=i,t=Nu(e,i))),t===1))throw n=_i,Js(e,0),cs(e,s),Nt(e,Oe()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error($(345));case 2:qs(e,vt,In);break;case 3:if(cs(e,s),(s&130023424)===s&&(t=Jm+500-Oe(),10<t)){if(ho(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){ft(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=su(qs.bind(null,e,vt,In),t);break}qs(e,vt,In);break;case 4:if(cs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var l=31-nn(s);i=1<<l,l=t[l],l>r&&(r=l),s&=~i}if(s=r,s=Oe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Uw(s/1960))-s,10<s){e.timeoutHandle=su(qs.bind(null,e,vt,In),s);break}qs(e,vt,In);break;case 5:qs(e,vt,In);break;default:throw Error($(329))}}}return Nt(e,Oe()),e.callbackNode===n?Ay.bind(null,e):null}function Nu(e,t){var n=Ya;return e.current.memoizedState.isDehydrated&&(Js(e,t).flags|=256),e=Do(e,t),e!==2&&(t=vt,vt=n,t!==null&&ku(t)),e}function ku(e){vt===null?vt=e:vt.push.apply(vt,e)}function zw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!ln(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cs(e,t){for(t&=~Gm,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nn(t),s=1<<n;e[n]=-1,t&=~s}}function Gh(e){if(fe&6)throw Error($(327));Kr();var t=ho(e,0);if(!(t&1))return Nt(e,Oe()),null;var n=Do(e,t);if(e.tag!==0&&n===2){var s=Zd(e);s!==0&&(t=s,n=Nu(e,s))}if(n===1)throw n=_i,Js(e,0),cs(e,t),Nt(e,Oe()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qs(e,vt,In),Nt(e,Oe()),null}function Ym(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(aa=Oe()+500,uc&&Fs())}}function lr(e){hs!==null&&hs.tag===0&&!(fe&6)&&Kr();var t=fe;fe|=1;var n=Ht.transition,s=pe;try{if(Ht.transition=null,pe=1,e)return e()}finally{pe=s,Ht.transition=n,fe=t,!(fe&6)&&Fs()}}function Xm(){Ct=Fr.current,ke(Fr)}function Js(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,vw(n)),$e!==null)for(n=$e.return;n!==null;){var s=n;switch(Tm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&vo();break;case 3:sa(),ke(bt),ke(it),Um();break;case 5:Vm(s);break;case 4:sa();break;case 13:ke(Ae);break;case 19:ke(Ae);break;case 10:Mm(s.type._context);break;case 22:case 23:Xm()}n=n.return}if(Ze=e,$e=e=Ns(e.current,null),Ye=Ct=t,He=0,_i=null,Gm=pc=ir=0,vt=Ya=null,Ws!==null){for(t=0;t<Ws.length;t++)if(n=Ws[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var l=i.next;i.next=r,s.next=l}n.pending=s}Ws=null}return e}function Py(e,t){do{var n=$e;try{if(Rm(),Zl.current=Co,Eo){for(var s=Pe.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Eo=!1}if(ar=0,Qe=Ue=Pe=null,Ga=!1,Ni=0,Zm.current=null,n===null||n.return===null){He=1,_i=t,$e=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Ye,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Mh(l);if(g!==null){g.flags&=-257,$h(g,l,o,i,t),g.mode&1&&Rh(i,d,t),t=g,c=d;var j=t.updateQueue;if(j===null){var v=new Set;v.add(c),t.updateQueue=v}else j.add(c);break e}else{if(!(t&1)){Rh(i,d,t),ef();break e}c=Error($(426))}}else if(Ee&&o.mode&1){var w=Mh(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$h(w,l,o,i,t),Om(ra(c,o));break e}}i=c=ra(c,o),He!==4&&(He=2),Ya===null?Ya=[i]:Ya.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=fy(i,c,t);Ph(i,p);break e;case 1:o=c;var f=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(bs===null||!bs.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=hy(i,o,t);Ph(i,N);break e}}i=i.return}while(i!==null)}Ty(n)}catch(b){t=b,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function Iy(){var e=Ao.current;return Ao.current=Co,e===null?Co:e}function ef(){(He===0||He===3||He===2)&&(He=4),Ze===null||!(ir&268435455)&&!(pc&268435455)||cs(Ze,Ye)}function Do(e,t){var n=fe;fe|=2;var s=Iy();(Ze!==e||Ye!==t)&&(In=null,Js(e,t));do try{Hw();break}catch(r){Py(e,r)}while(!0);if(Rm(),fe=n,Ao.current=s,$e!==null)throw Error($(261));return Ze=null,Ye=0,He}function Hw(){for(;$e!==null;)Dy($e)}function qw(){for(;$e!==null&&!g1();)Dy($e)}function Dy(e){var t=Ly(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?Ty(e):$e=t,Zm.current=null}function Ty(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=$w(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,$e=null;return}}else if(n=Mw(n,t,Ct),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);He===0&&(He=5)}function qs(e,t,n){var s=pe,r=Ht.transition;try{Ht.transition=null,pe=1,Kw(e,t,n,s)}finally{Ht.transition=r,pe=s}return null}function Kw(e,t,n,s){do Kr();while(hs!==null);if(fe&6)throw Error($(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(_1(e,i),e===Ze&&($e=Ze=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pl||(Pl=!0,Ry(fo,function(){return Kr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var l=pe;pe=1;var o=fe;fe|=4,Zm.current=null,Bw(e,n),Ey(n,e),mw(tu),po=!!eu,tu=eu=null,e.current=n,Vw(n),x1(),fe=o,pe=l,Ht.transition=i}else e.current=n;if(Pl&&(Pl=!1,hs=e,Io=r),i=e.pendingLanes,i===0&&(bs=null),w1(n.stateNode),Nt(e,Oe()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Po)throw Po=!1,e=bu,bu=null,e;return Io&1&&e.tag!==0&&Kr(),i=e.pendingLanes,i&1?e===ju?Xa++:(Xa=0,ju=e):Xa=0,Fs(),null}function Kr(){if(hs!==null){var e=fx(Io),t=Ht.transition,n=pe;try{if(Ht.transition=null,pe=16>e?16:e,hs===null)var s=!1;else{if(e=hs,hs=null,Io=0,fe&6)throw Error($(331));var r=fe;for(fe|=4,Z=e.current;Z!==null;){var i=Z,l=i.child;if(Z.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Z=d;Z!==null;){var u=Z;switch(u.tag){case 0:case 11:case 15:Ja(8,u,i)}var h=u.child;if(h!==null)h.return=u,Z=h;else for(;Z!==null;){u=Z;var m=u.sibling,g=u.return;if(ky(u),u===d){Z=null;break}if(m!==null){m.return=g,Z=m;break}Z=g}}}var j=i.alternate;if(j!==null){var v=j.child;if(v!==null){j.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Z=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Z=l;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ja(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Z=p;break e}Z=i.return}}var f=e.current;for(Z=f;Z!==null;){l=Z;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,Z=y;else e:for(l=f;Z!==null;){if(o=Z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hc(9,o)}}catch(b){Te(o,o.return,b)}if(o===l){Z=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,Z=N;break e}Z=o.return}}if(fe=r,Fs(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(ic,e)}catch{}s=!0}return s}finally{pe=n,Ht.transition=t}}return!1}function Jh(e,t,n){t=ra(n,t),t=fy(e,t,1),e=ws(e,t,1),t=ft(),e!==null&&(tl(e,1,t),Nt(e,t))}function Te(e,t,n){if(e.tag===3)Jh(e,e,n);else for(;t!==null;){if(t.tag===3){Jh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(bs===null||!bs.has(s))){e=ra(n,e),e=hy(t,e,1),t=ws(t,e,1),e=ft(),t!==null&&(tl(t,1,e),Nt(t,e));break}}t=t.return}}function Ww(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&n,Ze===e&&(Ye&n)===n&&(He===4||He===3&&(Ye&130023424)===Ye&&500>Oe()-Jm?Js(e,0):Gm|=n),Nt(e,t)}function Oy(e,t){t===0&&(e.mode&1?(t=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):t=1);var n=ft();e=Hn(e,t),e!==null&&(tl(e,t,n),Nt(e,n))}function Qw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Oy(e,n)}function Zw(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error($(314))}s!==null&&s.delete(t),Oy(e,n)}var Ly;Ly=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wt=!1,Rw(e,t,n);wt=!!(e.flags&131072)}else wt=!1,Ee&&t.flags&1048576&&Fx(t,jo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Jl(e,t),e=t.pendingProps;var r=ea(t,it.current);qr(t,n),r=Hm(null,t,s,e,r,n);var i=qm();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(s)?(i=!0,wo(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Fm(t),r.updater=fc,t.stateNode=r,r._reactInternals=t,du(t,s,e,n),t=fu(null,t,s,!0,i,n)):(t.tag=0,Ee&&i&&Dm(t),dt(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Jl(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=Jw(s),e=Gt(s,e),r){case 0:t=mu(null,t,s,e,n);break e;case 1:t=Vh(null,t,s,e,n);break e;case 11:t=Fh(null,t,s,e,n);break e;case 14:t=Bh(null,t,s,Gt(s.type,e),n);break e}throw Error($(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Gt(s,r),mu(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Gt(s,r),Vh(e,t,s,r,n);case 3:e:{if(yy(t),e===null)throw Error($(387));s=t.pendingProps,i=t.memoizedState,r=i.element,qx(e,t),So(t,s,null,n);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=ra(Error($(423)),t),t=Uh(e,t,s,n,r);break e}else if(s!==r){r=ra(Error($(424)),t),t=Uh(e,t,s,n,r);break e}else for(Pt=vs(t.stateNode.containerInfo.firstChild),It=t,Ee=!0,Yt=null,n=zx(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),s===r){t=qn(e,t,n);break e}dt(e,t,s,n)}t=t.child}return t;case 5:return Kx(t),e===null&&lu(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,l=r.children,nu(s,r)?l=null:i!==null&&nu(s,i)&&(t.flags|=32),xy(e,t),dt(e,t,l,n),t.child;case 6:return e===null&&lu(t),null;case 13:return vy(e,t,n);case 4:return Bm(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=na(t,null,s,n):dt(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Gt(s,r),Fh(e,t,s,r,n);case 7:return dt(e,t,t.pendingProps,n),t.child;case 8:return dt(e,t,t.pendingProps.children,n),t.child;case 12:return dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,l=r.value,we(No,s._currentValue),s._currentValue=l,i!==null)if(ln(i.value,l)){if(i.children===r.children&&!bt.current){t=qn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=$n(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ou(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error($(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),ou(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}dt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,qr(t,n),r=Kt(r),s=s(r),t.flags|=1,dt(e,t,s,n),t.child;case 14:return s=t.type,r=Gt(s,t.pendingProps),r=Gt(s.type,r),Bh(e,t,s,r,n);case 15:return py(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Gt(s,r),Jl(e,t),t.tag=1,jt(s)?(e=!0,wo(t)):e=!1,qr(t,n),my(t,s,r),du(t,s,r,n),fu(null,t,s,!0,e,n);case 19:return wy(e,t,n);case 22:return gy(e,t,n)}throw Error($(156,t.tag))};function Ry(e,t){return cx(e,t)}function Gw(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,s){return new Gw(e,t,n,s)}function tf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jw(e){if(typeof e=="function")return tf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wm)return 11;if(e===bm)return 14}return 2}function Ns(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,s,r,i){var l=2;if(s=e,typeof e=="function")tf(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ar:return Ys(n.children,r,i,t);case vm:l=8,r|=8;break;case Od:return e=zt(12,n,t,r|2),e.elementType=Od,e.lanes=i,e;case Ld:return e=zt(13,n,t,r),e.elementType=Ld,e.lanes=i,e;case Rd:return e=zt(19,n,t,r),e.elementType=Rd,e.lanes=i,e;case Kg:return gc(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hg:l=10;break e;case qg:l=9;break e;case wm:l=11;break e;case bm:l=14;break e;case as:l=16,s=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=zt(l,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function Ys(e,t,n,s){return e=zt(7,e,s,t),e.lanes=n,e}function gc(e,t,n,s){return e=zt(22,e,s,t),e.elementType=Kg,e.lanes=n,e.stateNode={isHidden:!1},e}function dd(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function ud(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yw(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qc(0),this.expirationTimes=qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qc(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function nf(e,t,n,s,r,i,l,o,c){return e=new Yw(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=zt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fm(i),e}function Xw(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function My(e){if(!e)return Cs;e=e._reactInternals;e:{if(hr(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(jt(n))return Mx(e,n,t)}return t}function $y(e,t,n,s,r,i,l,o,c){return e=nf(n,s,!0,e,r,i,l,o,c),e.context=My(null),n=e.current,s=ft(),r=js(n),i=$n(s,r),i.callback=t??null,ws(n,i,r),e.current.lanes=r,tl(e,r,s),Nt(e,s),e}function xc(e,t,n,s){var r=t.current,i=ft(),l=js(r);return n=My(n),t.context===null?t.context=n:t.pendingContext=n,t=$n(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ws(r,t,l),e!==null&&(sn(e,r,l,i),Ql(e,r,l)),l}function To(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sf(e,t){Yh(e,t),(e=e.alternate)&&Yh(e,t)}function eb(){return null}var Fy=typeof reportError=="function"?reportError:function(e){console.error(e)};function rf(e){this._internalRoot=e}yc.prototype.render=rf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));xc(e,t,null,null)};yc.prototype.unmount=rf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){xc(null,e,null,null)}),t[zn]=null}};function yc(e){this._internalRoot=e}yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=gx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<os.length&&t!==0&&t<os[n].priority;n++);os.splice(n,0,e),n===0&&yx(e)}};function af(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xh(){}function tb(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=To(l);i.call(d)}}var l=$y(t,s,e,0,null,!1,!1,"",Xh);return e._reactRootContainer=l,e[zn]=l.current,yi(e.nodeType===8?e.parentNode:e),lr(),l}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var o=s;s=function(){var d=To(c);o.call(d)}}var c=nf(e,0,!1,null,null,!1,!1,"",Xh);return e._reactRootContainer=c,e[zn]=c.current,yi(e.nodeType===8?e.parentNode:e),lr(function(){xc(t,c,n,s)}),c}function wc(e,t,n,s,r){var i=n._reactRootContainer;if(i){var l=i;if(typeof r=="function"){var o=r;r=function(){var c=To(l);o.call(c)}}xc(t,l,e,r)}else l=tb(n,t,e,r,s);return To(l)}hx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$a(t.pendingLanes);n!==0&&(km(t,n|1),Nt(t,Oe()),!(fe&6)&&(aa=Oe()+500,Fs()))}break;case 13:lr(function(){var s=Hn(e,1);if(s!==null){var r=ft();sn(s,e,1,r)}}),sf(e,1)}};Sm=function(e){if(e.tag===13){var t=Hn(e,134217728);if(t!==null){var n=ft();sn(t,e,134217728,n)}sf(e,134217728)}};px=function(e){if(e.tag===13){var t=js(e),n=Hn(e,t);if(n!==null){var s=ft();sn(n,e,t,s)}sf(e,t)}};gx=function(){return pe};xx=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};Kd=function(e,t,n){switch(t){case"input":if(Fd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=dc(s);if(!r)throw Error($(90));Qg(s),Fd(s,r)}}}break;case"textarea":Gg(e,n);break;case"select":t=n.value,t!=null&&Vr(e,!!n.multiple,t,!1)}};sx=Ym;rx=lr;var nb={usingClientEntryPoint:!1,Events:[sl,Tr,dc,tx,nx,Ym]},Pa={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sb={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lx(e),e===null?null:e.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||eb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{ic=Il.inject(sb),yn=Il}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(t))throw Error($(200));return Xw(e,t,null,n)};Rt.createRoot=function(e,t){if(!af(e))throw Error($(299));var n=!1,s="",r=Fy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=nf(e,1,!1,null,null,n,!1,s,r),e[zn]=t.current,yi(e.nodeType===8?e.parentNode:e),new rf(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=lx(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return lr(e)};Rt.hydrate=function(e,t,n){if(!vc(t))throw Error($(200));return wc(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!af(e))throw Error($(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",l=Fy;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=$y(t,null,e,1,n??null,r,!1,i,l),e[zn]=t.current,yi(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new yc(t)};Rt.render=function(e,t,n){if(!vc(t))throw Error($(200));return wc(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!vc(e))throw Error($(40));return e._reactRootContainer?(lr(function(){wc(null,null,e,!1,function(){e._reactRootContainer=null,e[zn]=null})}),!0):!1};Rt.unstable_batchedUpdates=Ym;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!vc(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return wc(e,t,n,!1,s)};Rt.version="18.3.1-next-f1338f8080-20240426";function By(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(By)}catch(e){console.error(e)}}By(),Bg.exports=Rt;var rb=Bg.exports,ep=rb;Dd.createRoot=ep.createRoot,Dd.hydrateRoot=ep.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ei(){return Ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ei.apply(this,arguments)}var ps;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ps||(ps={}));const tp="popstate";function ab(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:l,hash:o}=s.location;return Su("",{pathname:i,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Oo(r)}return lb(t,n,null,e)}function Le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vy(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ib(){return Math.random().toString(36).substr(2,8)}function np(e,t){return{usr:e.state,key:e.key,idx:t}}function Su(e,t,n,s){return n===void 0&&(n=null),Ei({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ga(t):t,{state:n,key:t&&t.key||s||ib()})}function Oo(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ga(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function lb(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,l=r.history,o=ps.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Ei({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function h(){o=ps.Pop;let w=u(),p=w==null?null:w-d;d=w,c&&c({action:o,location:v.location,delta:p})}function m(w,p){o=ps.Push;let f=Su(v.location,w,p);d=u()+1;let y=np(f,d),N=v.createHref(f);try{l.pushState(y,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(N)}i&&c&&c({action:o,location:v.location,delta:1})}function g(w,p){o=ps.Replace;let f=Su(v.location,w,p);d=u();let y=np(f,d),N=v.createHref(f);l.replaceState(y,"",N),i&&c&&c({action:o,location:v.location,delta:0})}function j(w){let p=r.location.origin!=="null"?r.location.origin:r.location.href,f=typeof w=="string"?w:Oo(w);return f=f.replace(/ $/,"%20"),Le(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let v={get action(){return o},get location(){return e(r,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(tp,h),c=w,()=>{r.removeEventListener(tp,h),c=null}},createHref(w){return t(r,w)},createURL:j,encodeLocation(w){let p=j(w);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:g,go(w){return l.go(w)}};return v}var sp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sp||(sp={}));function ob(e,t,n){return n===void 0&&(n="/"),cb(e,t,n)}function cb(e,t,n,s){let r=typeof t=="string"?ga(t):t,i=lf(r.pathname||"/",n);if(i==null)return null;let l=Uy(e);db(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=jb(i);o=vb(l[c],d)}return o}function Uy(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Le(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=ks([s,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Le(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Uy(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:xb(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))r(i,l);else for(let c of zy(i.path))r(i,l,c)}),t}function zy(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let l=zy(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),r&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function db(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yb(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const ub=/^:[\w-]+$/,mb=3,fb=2,hb=1,pb=10,gb=-2,rp=e=>e==="*";function xb(e,t){let n=e.split("/"),s=n.length;return n.some(rp)&&(s+=gb),t&&(s+=fb),n.filter(r=>!rp(r)).reduce((r,i)=>r+(ub.test(i)?mb:i===""?hb:pb),s)}function yb(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function vb(e,t,n){let{routesMeta:s}=e,r={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=wb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h)return null;Object.assign(r,h.params),l.push({params:r,pathname:ks([i,h.pathname]),pathnameBase:_b(ks([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=ks([i,h.pathnameBase]))}return l}function wb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=bb(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let v=o[h]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const j=o[h];return g&&!j?d[m]=void 0:d[m]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function bb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vy(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function jb(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vy(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function Nb(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?ga(e):e;return{pathname:n?n.startsWith("/")?n:kb(n,t):t,search:Eb(s),hash:Cb(r)}}function kb(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function md(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sb(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function of(e,t){let n=Sb(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function cf(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=ga(e):(r=Ei({},e),Le(!r.pathname||!r.pathname.includes("?"),md("?","pathname","search",r)),Le(!r.pathname||!r.pathname.includes("#"),md("#","pathname","hash",r)),Le(!r.search||!r.search.includes("#"),md("#","search","hash",r)));let i=e===""||r.pathname==="",l=i?"/":r.pathname,o;if(l==null)o=n;else{let h=t.length-1;if(!s&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),h-=1;r.pathname=m.join("/")}o=h>=0?t[h]:"/"}let c=Nb(r,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ks=e=>e.join("/").replace(/\/\/+/g,"/"),_b=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Eb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ab(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Hy=["post","put","patch","delete"];new Set(Hy);const Pb=["get",...Hy];new Set(Pb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ci(){return Ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ci.apply(this,arguments)}const df=x.createContext(null),Ib=x.createContext(null),Bs=x.createContext(null),bc=x.createContext(null),Jn=x.createContext({outlet:null,matches:[],isDataRoute:!1}),qy=x.createContext(null);function Db(e,t){let{relative:n}=t===void 0?{}:t;xa()||Le(!1);let{basename:s,navigator:r}=x.useContext(Bs),{hash:i,pathname:l,search:o}=Wy(e,{relative:n}),c=l;return s!=="/"&&(c=l==="/"?s:ks([s,l])),r.createHref({pathname:c,search:o,hash:i})}function xa(){return x.useContext(bc)!=null}function ya(){return xa()||Le(!1),x.useContext(bc).location}function Ky(e){x.useContext(Bs).static||x.useLayoutEffect(e)}function cn(){let{isDataRoute:e}=x.useContext(Jn);return e?qb():Tb()}function Tb(){xa()||Le(!1);let e=x.useContext(df),{basename:t,future:n,navigator:s}=x.useContext(Bs),{matches:r}=x.useContext(Jn),{pathname:i}=ya(),l=JSON.stringify(of(r,n.v7_relativeSplatPath)),o=x.useRef(!1);return Ky(()=>{o.current=!0}),x.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let h=cf(d,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ks([t,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[t,s,l,i,e])}function jc(){let{matches:e}=x.useContext(Jn),t=e[e.length-1];return t?t.params:{}}function Wy(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=x.useContext(Bs),{matches:r}=x.useContext(Jn),{pathname:i}=ya(),l=JSON.stringify(of(r,s.v7_relativeSplatPath));return x.useMemo(()=>cf(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function Ob(e,t){return Lb(e,t)}function Lb(e,t,n,s){xa()||Le(!1);let{navigator:r}=x.useContext(Bs),{matches:i}=x.useContext(Jn),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=ya(),u;if(t){var h;let w=typeof t=="string"?ga(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Le(!1),u=w}else u=d;let m=u.pathname||"/",g=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=ob(e,{pathname:g}),v=Bb(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:ks([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:ks([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,s);return t&&v?x.createElement(bc.Provider,{value:{location:Ci({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ps.Pop}},v):v}function Rb(){let e=Hb(),t=Ab(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:r},n):null,null)}const Mb=x.createElement(Rb,null);class $b extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(Jn.Provider,{value:this.props.routeContext},x.createElement(qy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fb(e){let{routeContext:t,match:n,children:s}=e,r=x.useContext(df);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Jn.Provider,{value:t},s)}function Bb(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let u=l.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);u>=0||Le(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let h=l[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:g}=n,j=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||j){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,h,m)=>{let g,j=!1,v=null,w=null;n&&(g=o&&h.route.id?o[h.route.id]:void 0,v=h.route.errorElement||Mb,c&&(d<0&&m===0?(Kb("route-fallback"),j=!0,w=null):d===m&&(j=!0,w=h.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,m+1)),f=()=>{let y;return g?y=v:j?y=w:h.route.Component?y=x.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,x.createElement(Fb,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?x.createElement($b,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var Qy=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qy||{}),Zy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zy||{});function Vb(e){let t=x.useContext(df);return t||Le(!1),t}function Ub(e){let t=x.useContext(Ib);return t||Le(!1),t}function zb(e){let t=x.useContext(Jn);return t||Le(!1),t}function Gy(e){let t=zb(),n=t.matches[t.matches.length-1];return n.route.id||Le(!1),n.route.id}function Hb(){var e;let t=x.useContext(qy),n=Ub(),s=Gy();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function qb(){let{router:e}=Vb(Qy.UseNavigateStable),t=Gy(Zy.UseNavigateStable),n=x.useRef(!1);return Ky(()=>{n.current=!0}),x.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Ci({fromRouteId:t},i)))},[e,t])}const ap={};function Kb(e,t,n){ap[e]||(ap[e]=!0)}function Wb(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Qb(e){let{to:t,replace:n,state:s,relative:r}=e;xa()||Le(!1);let{future:i,static:l}=x.useContext(Bs),{matches:o}=x.useContext(Jn),{pathname:c}=ya(),d=cn(),u=cf(t,of(o,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(u);return x.useEffect(()=>d(JSON.parse(h),{replace:n,state:s,relative:r}),[d,h,r,n,s]),null}function de(e){Le(!1)}function Zb(e){let{basename:t="/",children:n=null,location:s,navigationType:r=ps.Pop,navigator:i,static:l=!1,future:o}=e;xa()&&Le(!1);let c=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:i,static:l,future:Ci({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof s=="string"&&(s=ga(s));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:j="default"}=s,v=x.useMemo(()=>{let w=lf(u,c);return w==null?null:{location:{pathname:w,search:h,hash:m,state:g,key:j},navigationType:r}},[c,u,h,m,g,j,r]);return v==null?null:x.createElement(Bs.Provider,{value:d},x.createElement(bc.Provider,{children:n,value:v}))}function ip(e){let{children:t,location:n}=e;return Ob(_u(t),n)}new Promise(()=>{});function _u(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(s,r)=>{if(!x.isValidElement(s))return;let i=[...t,r];if(s.type===x.Fragment){n.push.apply(n,_u(s.props.children,i));return}s.type!==de&&Le(!1),!s.props.index||!s.props.children||Le(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=_u(s.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Eu.apply(this,arguments)}function Gb(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Jb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yb(e,t){return e.button===0&&(!t||t==="_self")&&!Jb(e)}const Xb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ej="6";try{window.__reactRouterVersion=ej}catch{}const tj="startTransition",lp=Wv[tj];function nj(e){let{basename:t,children:n,future:s,window:r}=e,i=x.useRef();i.current==null&&(i.current=ab({window:r,v5Compat:!0}));let l=i.current,[o,c]=x.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},u=x.useCallback(h=>{d&&lp?lp(()=>c(h)):c(h)},[c,d]);return x.useLayoutEffect(()=>l.listen(u),[l,u]),x.useEffect(()=>Wb(s),[s]),x.createElement(Zb,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:l,future:s})}const sj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,As=x.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,m=Gb(t,Xb),{basename:g}=x.useContext(Bs),j,v=!1;if(typeof d=="string"&&rj.test(d)&&(j=d,sj))try{let y=new URL(window.location.href),N=d.startsWith("//")?new URL(y.protocol+d):new URL(d),b=lf(N.pathname,g);N.origin===y.origin&&b!=null?d=b+N.search+N.hash:v=!0}catch{}let w=Db(d,{relative:r}),p=aj(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:r,viewTransition:h});function f(y){s&&s(y),y.defaultPrevented||p(y)}return x.createElement("a",Eu({},m,{href:j||w,onClick:v||i?s:f,ref:n,target:c}))});var op;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(op||(op={}));var cp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cp||(cp={}));function aj(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=cn(),d=ya(),u=Wy(e,{relative:l});return x.useCallback(h=>{if(Yb(h,n)){h.preventDefault();let m=s!==void 0?s:Oo(d)===Oo(u);c(e,{replace:m,state:r,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,r,n,e,i,l,o])}const ij="modulepreload",lj=function(e){return"/"+e},dp={},Ut=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=lj(c),c in dp)return;dp[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ij,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return r.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};class oj extends x.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Something went wrong"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"An unexpected error occurred. Please refresh the page and try again."}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Refresh Page"})}),!1]})})}):this.props.children}}const cj=(e,t,n,s)=>{var i,l,o,c;const r=[n,{code:t,...s||{}}];if((l=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&l.forward)return e.services.logger.forward(r,"warn","react-i18next::",!0);Xs(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),(c=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&c.warn?e.services.logger.warn(...r):console!=null&&console.warn&&console.warn(...r)},up={},Cu=(e,t,n,s)=>{Xs(n)&&up[n]||(Xs(n)&&(up[n]=new Date),cj(e,t,n,s))},Jy=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Au=(e,t,n)=>{e.loadNamespaces(t,Jy(e,n))},mp=(e,t,n,s)=>{if(Xs(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Au(e,n,s);n.forEach(r=>{e.options.ns.indexOf(r)<0&&e.options.ns.push(r)}),e.loadLanguages(t,Jy(e,s))},dj=(e,t,n={})=>!t.languages||!t.languages.length?(Cu(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(s,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!r(s.isLanguageChangingTo,e))return!1}}),Xs=e=>typeof e=="string",uj=e=>typeof e=="object"&&e!==null,mj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,fj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},hj=e=>fj[e],pj=e=>e.replace(mj,hj);let Pu={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:pj};const gj=(e={})=>{Pu={...Pu,...e}},xj=()=>Pu;let Yy;const yj=e=>{Yy=e},vj=()=>Yy,wj={type:"3rdParty",init(e){gj(e.options.react),yj(e)}},bj=x.createContext();class jj{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Nj=(e,t)=>{const n=x.useRef();return x.useEffect(()=>{n.current=e},[e,t]),n.current},Xy=(e,t,n,s)=>e.getFixedT(t,n,s),kj=(e,t,n,s)=>x.useCallback(Xy(e,t,n,s),[e,t,n,s]),Yn=(e,t={})=>{var N,b,S,k;const{i18n:n}=t,{i18n:s,defaultNS:r}=x.useContext(bj)||{},i=n||s||vj();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new jj),!i){Cu(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(I,T)=>Xs(T)?T:uj(T)&&Xs(T.defaultValue)?T.defaultValue:Array.isArray(I)?I[I.length-1]:I,_=[E,{},!1];return _.t=E,_.i18n={},_.ready=!1,_}(N=i.options.react)!=null&&N.wait&&Cu(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...xj(),...i.options.react,...t},{useSuspense:o,keyPrefix:c}=l;let d=r||((b=i.options)==null?void 0:b.defaultNS);d=Xs(d)?[d]:d||["translation"],(k=(S=i.reportNamespaces).addUsedNamespaces)==null||k.call(S,d);const u=(i.isInitialized||i.initializedStoreOnce)&&d.every(E=>dj(E,i,l)),h=kj(i,t.lng||null,l.nsMode==="fallback"?d:d[0],c),m=()=>h,g=()=>Xy(i,t.lng||null,l.nsMode==="fallback"?d:d[0],c),[j,v]=x.useState(m);let w=d.join();t.lng&&(w=`${t.lng}${w}`);const p=Nj(w),f=x.useRef(!0);x.useEffect(()=>{const{bindI18n:E,bindI18nStore:_}=l;f.current=!0,!u&&!o&&(t.lng?mp(i,t.lng,d,()=>{f.current&&v(g)}):Au(i,d,()=>{f.current&&v(g)})),u&&p&&p!==w&&f.current&&v(g);const I=()=>{f.current&&v(g)};return E&&(i==null||i.on(E,I)),_&&(i==null||i.store.on(_,I)),()=>{f.current=!1,i&&E&&(E==null||E.split(" ").forEach(T=>i.off(T,I))),_&&i&&_.split(" ").forEach(T=>i.store.off(T,I))}},[i,w]),x.useEffect(()=>{f.current&&u&&v(m)},[i,c,u]);const y=[j,i,u];if(y.t=j,y.i18n=i,y.ready=u,u||!u&&!o)return y;throw new Promise(E=>{t.lng?mp(i,t.lng,d,()=>E()):Au(i,d,()=>E())})},Sj={},fp=e=>{let t;const n=new Set,s=(u,h)=>{const m=typeof u=="function"?u(t):u;if(!Object.is(m,t)){const g=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(j=>j(t,g))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Sj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(s,r,c);return c},_j=e=>e?fp(e):fp;var e0={exports:{}},t0={},n0={exports:{}},s0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=x;function Ej(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cj=typeof Object.is=="function"?Object.is:Ej,Aj=ia.useState,Pj=ia.useEffect,Ij=ia.useLayoutEffect,Dj=ia.useDebugValue;function Tj(e,t){var n=t(),s=Aj({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return Ij(function(){r.value=n,r.getSnapshot=t,fd(r)&&i({inst:r})},[e,n,t]),Pj(function(){return fd(r)&&i({inst:r}),e(function(){fd(r)&&i({inst:r})})},[e]),Dj(n),n}function fd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cj(e,n)}catch{return!0}}function Oj(e,t){return t()}var Lj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Oj:Tj;s0.useSyncExternalStore=ia.useSyncExternalStore!==void 0?ia.useSyncExternalStore:Lj;n0.exports=s0;var Rj=n0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc=x,Mj=Rj;function $j(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fj=typeof Object.is=="function"?Object.is:$j,Bj=Mj.useSyncExternalStore,Vj=Nc.useRef,Uj=Nc.useEffect,zj=Nc.useMemo,Hj=Nc.useDebugValue;t0.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=Vj(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=zj(function(){function c(g){if(!d){if(d=!0,u=g,g=s(g),r!==void 0&&l.hasValue){var j=l.value;if(r(j,g))return h=j}return h=g}if(j=h,Fj(u,g))return j;var v=s(g);return r!==void 0&&r(j,v)?(u=g,j):(u=g,h=v)}var d=!1,u,h,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,s,r]);var o=Bj(e,i[0],i[1]);return Uj(function(){l.hasValue=!0,l.value=o},[o]),Hj(o),o};e0.exports=t0;var qj=e0.exports;const Kj=Cg(qj),r0={},{useDebugValue:Wj}=Se,{useSyncExternalStoreWithSelector:Qj}=Kj;let hp=!1;const Zj=e=>e;function Gj(e,t=Zj,n){(r0?"production":void 0)!=="production"&&n&&!hp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hp=!0);const s=Qj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Wj(s),s}const pp=e=>{(r0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?_j(e):e,n=(s,r)=>Gj(t,s,r);return Object.assign(n,t),n},al=e=>e?pp(e):pp,Jj={};function Yj(e,t){let n;try{n=e()}catch{return}return{getItem:r=>{var i;const l=c=>c===null?null:JSON.parse(c,void 0),o=(i=n.getItem(r))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(r,i)=>n.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>n.removeItem(r)}}const Ai=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return Ai(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Ai(s)(n)}}}},Xj=(e,t)=>(n,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,p)=>({...p,...w}),...t},l=!1;const o=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...w)},s,r);const u=Ai(i.serialize),h=()=>{const w=i.partialize({...s()});let p;const f=u({state:w,version:i.version}).then(y=>d.setItem(i.name,y)).catch(y=>{p=y});if(p)throw p;return f},m=r.setState;r.setState=(w,p)=>{m(w,p),h()};const g=e((...w)=>{n(...w),h()},s,r);let j;const v=()=>{var w;if(!d)return;l=!1,o.forEach(f=>f(s()));const p=((w=i.onRehydrateStorage)==null?void 0:w.call(i,s()))||void 0;return Ai(d.getItem.bind(d))(i.name).then(f=>{if(f)return i.deserialize(f)}).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate)return i.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(f=>{var y;return j=i.merge(f,(y=s())!=null?y:g),n(j,!0),h()}).then(()=>{p==null||p(j,void 0),l=!0,c.forEach(f=>f(j))}).catch(f=>{p==null||p(void 0,f)})};return r.persist={setOptions:w=>{i={...i,...w},w.getStorage&&(d=w.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},v(),j||g},eN=(e,t)=>(n,s,r)=>{let i={storage:Yj(()=>localStorage),partialize:v=>v,version:0,merge:(v,w)=>({...w,...v}),...t},l=!1;const o=new Set,c=new Set;let d=i.storage;if(!d)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},s,r);const u=()=>{const v=i.partialize({...s()});return d.setItem(i.name,{state:v,version:i.version})},h=r.setState;r.setState=(v,w)=>{h(v,w),u()};const m=e((...v)=>{n(...v),u()},s,r);r.getInitialState=()=>m;let g;const j=()=>{var v,w;if(!d)return;l=!1,o.forEach(f=>{var y;return f((y=s())!=null?y:m)});const p=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(v=s())!=null?v:m))||void 0;return Ai(d.getItem.bind(d))(i.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate)return[!0,i.migrate(f.state,f.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var y;const[N,b]=f;if(g=i.merge(b,(y=s())!=null?y:m),n(g,!0),N)return u()}).then(()=>{p==null||p(g,void 0),g=s(),l=!0,c.forEach(f=>f(g))}).catch(f=>{p==null||p(void 0,f)})};return r.persist={setOptions:v=>{i={...i,...v},v.storage&&(d=v.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>j(),hasHydrated:()=>l,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},i.skipHydration||j(),g||m},tN=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Jj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Xj(e,t)):eN(e,t),nN=tN,Ne=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fe=Object.keys,at=Array.isArray;function ht(e,t){return typeof t!="object"||Fe(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Ne.Promise||(Ne.Promise=Promise);const Pi=Object.getPrototypeOf,sN={}.hasOwnProperty;function Lt(e,t){return sN.call(e,t)}function la(e,t){typeof t=="function"&&(t=t(Pi(e))),(typeof Reflect>"u"?Fe:Reflect.ownKeys)(t).forEach(n=>{Fn(e,n,t[n])})}const a0=Object.defineProperty;function Fn(e,t,n,s){a0(e,t,ht(n&&Lt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},s))}function Wr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Fn(e.prototype,"constructor",e),{extend:la.bind(null,e.prototype)}}}}const rN=Object.getOwnPropertyDescriptor;function uf(e,t){let n;return rN(e,t)||(n=Pi(e))&&uf(n,t)}const aN=[].slice;function Lo(e,t,n){return aN.call(e,t,n)}function i0(e,t){return t(e)}function Ba(e){if(!e)throw new Error("Assertion Failed")}function l0(e){Ne.setImmediate?setImmediate(e):setTimeout(e,0)}function o0(e,t){return e.reduce((n,s,r)=>{var i=t(s,r);return i&&(n[i[0]]=i[1]),n},{})}function Bn(e,t){if(typeof t=="string"&&Lt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],s=0,r=t.length;s<r;++s){var i=Bn(e,t[s]);n.push(i)}return n}var l=t.indexOf(".");if(l!==-1){var o=e[t.substr(0,l)];return o==null?void 0:Bn(o,t.substr(l+1))}}function rn(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Ba(typeof n!="string"&&"length"in n);for(var s=0,r=t.length;s<r;++s)rn(e,t[s],n[s])}else{var i=t.indexOf(".");if(i!==-1){var l=t.substr(0,i),o=t.substr(i+1);if(o==="")n===void 0?at(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n;else{var c=e[l];c&&Lt(e,l)||(c=e[l]={}),rn(c,o,n)}}else n===void 0?at(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function c0(e){var t={};for(var n in e)Lt(e,n)&&(t[n]=e[n]);return t}const iN=[].concat;function d0(e){return iN.apply([],e)}const u0="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(d0([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Ne[e]),lN=u0.map(e=>Ne[e]);o0(u0,e=>[e,!0]);let ls=null;function il(e){ls=typeof WeakMap<"u"&&new WeakMap;const t=Iu(e);return ls=null,t}function Iu(e){if(!e||typeof e!="object")return e;let t=ls&&ls.get(e);if(t)return t;if(at(e)){t=[],ls&&ls.set(e,t);for(var n=0,s=e.length;n<s;++n)t.push(Iu(e[n]))}else if(lN.indexOf(e.constructor)>=0)t=e;else{const i=Pi(e);for(var r in t=i===Object.prototype?{}:Object.create(i),ls&&ls.set(e,t),e)Lt(e,r)&&(t[r]=Iu(e[r]))}return t}const{toString:oN}={};function Du(e){return oN.call(e).slice(8,-1)}const Tu=typeof Symbol<"u"?Symbol.iterator:"@@iterator",cN=typeof Tu=="symbol"?function(e){var t;return e!=null&&(t=e[Tu])&&t.apply(e)}:function(){return null},Sr={};function On(e){var t,n,s,r;if(arguments.length===1){if(at(e))return e.slice();if(this===Sr&&typeof e=="string")return[e];if(r=cN(e)){for(n=[];!(s=r.next()).done;)n.push(s.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const mf=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var _n=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function m0(e,t){_n=e,f0=t}var f0=()=>!0;const dN=!new Error("").stack;function pr(){if(dN)try{throw pr.arguments,new Error}catch(e){return e}return new Error}function Ou(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(f0).map(s=>`
`+s).join("")):""}var h0=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ff=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(h0),uN={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qr(e,t){this._e=pr(),this.name=e,this.message=t}function p0(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,s,r)=>r.indexOf(n)===s).join(`
`)}function Ro(e,t,n,s){this._e=pr(),this.failures=t,this.failedKeys=s,this.successCount=n,this.message=p0(e,t)}function ei(e,t){this._e=pr(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=p0(e,t)}Wr(Qr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ou(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Wr(Ro).from(Qr),Wr(ei).from(Qr);var hf=ff.reduce((e,t)=>(e[t]=t+"Error",e),{});const mN=Qr;var ne=ff.reduce((e,t)=>{var n=t+"Error";function s(r,i){this._e=pr(),this.name=n,r?typeof r=="string"?(this.message=`${r}${i?`
 `+i:""}`,this.inner=i||null):typeof r=="object"&&(this.message=`${r.name} ${r.message}`,this.inner=r):(this.message=uN[t]||n,this.inner=null)}return Wr(s).from(mN),e[t]=s,e},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var gp=h0.reduce((e,t)=>(e[t+"Error"]=ne[t],e),{}),to=ff.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ne[t]),e),{});function ye(){}function Ii(e){return e}function fN(e,t){return e==null||e===Ii?t:function(n){return t(e(n))}}function or(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function hN(e,t){return e===ye?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var s=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?or(s,this.onsuccess):s),r&&(this.onerror=this.onerror?or(r,this.onerror):r),i!==void 0?i:n}}function pN(e,t){return e===ye?t:function(){e.apply(this,arguments);var n=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?or(n,this.onsuccess):n),s&&(this.onerror=this.onerror?or(s,this.onerror):s)}}function gN(e,t){return e===ye?t:function(n){var s=e.apply(this,arguments);ht(n,s);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?or(r,this.onsuccess):r),i&&(this.onerror=this.onerror?or(i,this.onerror):i),s===void 0?l===void 0?void 0:l:ht(s,l)}}function xN(e,t){return e===ye?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function pf(e,t){return e===ye?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var s=this,r=arguments.length,i=new Array(r);r--;)i[r]=arguments[r];return n.then(function(){return t.apply(s,i)})}return t.apply(this,arguments)}}to.ModifyError=Ro,to.DexieError=Qr,to.BulkError=ei;var Di={};const g0=100,[Lu,Mo,Ru]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Pi(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Pi(t),e]})(),x0=Mo&&Mo.then,no=Lu&&Lu.constructor,gf=!!Ru;var Mu=!1,yN=Ru?()=>{Ru.then(Dl)}:Ne.setImmediate?setImmediate.bind(null,Dl):Ne.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{Dl(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Dl,0)},ti=function(e,t){Va.push([e,t]),$o&&(yN(),$o=!1)},$u=!0,$o=!0,er=[],so=[],Fu=null,Bu=Ii,Zr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vp,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{vp(e[0],e[1])}catch{}})}},X=Zr,Va=[],tr=0,ro=[];function Q(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ye,this._lib=!1;var t=this._PSD=X;if(_n&&(this._stackHolder=pr(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Di)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Uu(this,this._value))}this._state=null,this._value=null,++t.ref,v0(this,e)}const Vu={get:function(){var e=X,t=Fo;function n(s,r){var i=!e.global&&(e!==X||t!==Fo);const l=i&&!Kn();var o=new Q((c,d)=>{xf(this,new y0(Bo(s,e,i,l),Bo(r,e,i,l),c,d,e))});return _n&&j0(o,this),o}return n.prototype=Di,n},set:function(e){Fn(this,"then",e&&e.prototype===Di?Vu:{get:function(){return e},set:Vu.set})}};function y0(e,t,n,s,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=s,this.psd=r}function v0(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var s=e._lib&&ll();n&&typeof n.then=="function"?v0(e,(r,i)=>{n instanceof Q?n._then(r,i):n.then(r,i)}):(e._state=!0,e._value=n,w0(e)),s&&ol()}},Uu.bind(null,e))}catch(n){Uu(e,n)}}function Uu(e,t){if(so.push(t),e._state===null){var n=e._lib&&ll();t=Bu(t),e._state=!1,e._value=t,_n&&t!==null&&typeof t=="object"&&!t._promise&&function(s,r,i){try{s.apply(null,i)}catch{}}(()=>{var s=uf(t,"stack");t._promise=e,Fn(t,"stack",{get:()=>Mu?s&&(s.get?s.get.apply(t):s.value):e.stack})}),function(s){er.some(r=>r._value===s._value)||er.push(s)}(e),w0(e),n&&ol()}}function w0(e){var t=e._listeners;e._listeners=[];for(var n=0,s=t.length;n<s;++n)xf(e,t[n]);var r=e._PSD;--r.ref||r.finalize(),tr===0&&(++tr,ti(()=>{--tr==0&&yf()},[]))}function xf(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++tr,ti(vN,[n,e,t])}else e._listeners.push(t)}function vN(e,t,n){try{Fu=t;var s,r=t._value;t._state?s=e(r):(so.length&&(so=[]),s=e(r),so.indexOf(r)===-1&&function(i){for(var l=er.length;l;)if(er[--l]._value===i._value)return void er.splice(l,1)}(t)),n.resolve(s)}catch(i){n.reject(i)}finally{Fu=null,--tr==0&&yf(),--n.psd.ref||n.psd.finalize()}}function b0(e,t,n){if(t.length===n)return t;var s="";if(e._state===!1){var r,i,l=e._value;l!=null?(r=l.name||"Error",i=l.message||l,s=Ou(l,0)):(r=l,i=""),t.push(r+(i?": "+i:"")+s)}return _n&&((s=Ou(e._stackHolder,2))&&t.indexOf(s)===-1&&t.push(s),e._prev&&b0(e._prev,t,n)),t}function j0(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Dl(){ll()&&ol()}function ll(){var e=$u;return $u=!1,$o=!1,e}function ol(){var e,t,n;do for(;Va.length>0;)for(e=Va,Va=[],n=e.length,t=0;t<n;++t){var s=e[t];s[0].apply(null,s[1])}while(Va.length>0);$u=!0,$o=!0}function yf(){var e=er;er=[],e.forEach(s=>{s._PSD.onunhandled.call(null,s._value,s)});for(var t=ro.slice(0),n=t.length;n;)t[--n]()}function Tl(e){return new Q(Di,!1,e)}function _e(e,t){var n=X;return function(){var s=ll(),r=X;try{return Is(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Is(r,!1),s&&ol()}}}la(Q.prototype,{then:Vu,_then:function(e,t){xf(this,new y0(null,null,e,t,X))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,s=>s instanceof t?n(s):Tl(s)):this.then(null,s=>s&&s.name===t?n(s):Tl(s))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Tl(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Mu=!0;var e=b0(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Mu=!1}}},timeout:function(e,t){return e<1/0?new Q((n,s)=>{var r=setTimeout(()=>s(new ne.Timeout(t)),e);this.then(n,s).finally(clearTimeout.bind(null,r))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Fn(Q.prototype,Symbol.toStringTag,"Dexie.Promise"),Zr.env=N0(),la(Q,{all:function(){var e=On.apply(null,arguments).map(Ol);return new Q(function(t,n){e.length===0&&t([]);var s=e.length;e.forEach((r,i)=>Q.resolve(r).then(l=>{e[i]=l,--s||t(e)},n))})},resolve:e=>{if(e instanceof Q)return e;if(e&&typeof e.then=="function")return new Q((n,s)=>{e.then(n,s)});var t=new Q(Di,!0,e);return j0(t,Fu),t},reject:Tl,race:function(){var e=On.apply(null,arguments).map(Ol);return new Q((t,n)=>{e.map(s=>Q.resolve(s).then(t,n))})},PSD:{get:()=>X,set:e=>X=e},totalEchoes:{get:()=>Fo},newPSD:Ps,usePSD:wa,scheduler:{get:()=>ti,set:e=>{ti=e}},rejectionMapper:{get:()=>Bu,set:e=>{Bu=e}},follow:(e,t)=>new Q((n,s)=>Ps((r,i)=>{var l=X;l.unhandleds=[],l.onunhandled=i,l.finalize=or(function(){(function(o){function c(){o(),ro.splice(ro.indexOf(c),1)}ro.push(c),++tr,ti(()=>{--tr==0&&yf()},[])})(()=>{this.unhandleds.length===0?r():i(this.unhandleds[0])})},l.finalize),e()},t,n,s))}),no&&(no.allSettled&&Fn(Q,"allSettled",function(){const e=On.apply(null,arguments).map(Ol);return new Q(t=>{e.length===0&&t([]);let n=e.length;const s=new Array(n);e.forEach((r,i)=>Q.resolve(r).then(l=>s[i]={status:"fulfilled",value:l},l=>s[i]={status:"rejected",reason:l}).then(()=>--n||t(s)))})}),no.any&&typeof AggregateError<"u"&&Fn(Q,"any",function(){const e=On.apply(null,arguments).map(Ol);return new Q((t,n)=>{e.length===0&&n(new AggregateError([]));let s=e.length;const r=new Array(s);e.forEach((i,l)=>Q.resolve(i).then(o=>t(o),o=>{r[l]=o,--s||n(new AggregateError(r))}))})}));const rt={awaits:0,echoes:0,id:0};var wN=0,ao=[],hd=0,Fo=0,bN=0;function Ps(e,t,n,s){var r=X,i=Object.create(r);i.parent=r,i.ref=0,i.global=!1,i.id=++bN;var l=Zr.env;i.env=gf?{Promise:Q,PromiseProp:{value:Q,configurable:!0,writable:!0},all:Q.all,race:Q.race,allSettled:Q.allSettled,any:Q.any,resolve:Q.resolve,reject:Q.reject,nthen:xp(l.nthen,i),gthen:xp(l.gthen,i)}:{},t&&ht(i,t),++r.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=wa(i,e,n,s);return i.ref===0&&i.finalize(),o}function va(){return rt.id||(rt.id=++wN),++rt.awaits,rt.echoes+=g0,rt.id}function Kn(){return!!rt.awaits&&(--rt.awaits==0&&(rt.id=0),rt.echoes=rt.awaits*g0,!0)}function Ol(e){return rt.echoes&&e&&e.constructor===no?(va(),e.then(t=>(Kn(),t),t=>(Kn(),qe(t)))):e}function jN(e){++Fo,rt.echoes&&--rt.echoes!=0||(rt.echoes=rt.id=0),ao.push(X),Is(e,!0)}function NN(){var e=ao[ao.length-1];ao.pop(),Is(e,!1)}function Is(e,t){var n=X;if((t?!rt.echoes||hd++&&e===X:!hd||--hd&&e===X)||k0(t?jN.bind(null,e):NN),e!==X&&(X=e,n===Zr&&(Zr.env=N0()),gf)){var s=Zr.env.Promise,r=e.env;Mo.then=r.nthen,s.prototype.then=r.gthen,(n.global||e.global)&&(Object.defineProperty(Ne,"Promise",r.PromiseProp),s.all=r.all,s.race=r.race,s.resolve=r.resolve,s.reject=r.reject,r.allSettled&&(s.allSettled=r.allSettled),r.any&&(s.any=r.any))}}function N0(){var e=Ne.Promise;return gf?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ne,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Mo.then,gthen:e.prototype.then}:{}}function wa(e,t,n,s,r){var i=X;try{return Is(e,!0),t(n,s,r)}finally{Is(i,!1)}}function k0(e){x0.call(Lu,e)}function Bo(e,t,n,s){return typeof e!="function"?e:function(){var r=X;n&&va(),Is(t,!0);try{return e.apply(this,arguments)}finally{Is(r,!1),s&&k0(Kn)}}}function xp(e,t){return function(n,s){return e.call(this,Bo(n,t),Bo(s,t))}}(""+x0).indexOf("[native code]")===-1&&(va=Kn=ye);const yp="unhandledrejection";function vp(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var s,r={promise:t,reason:e};if(Ne.document&&document.createEvent?((s=document.createEvent("Event")).initEvent(yp,!0,!0),ht(s,r)):Ne.CustomEvent&&ht(s=new CustomEvent(yp,{detail:r}),r),s&&Ne.dispatchEvent&&(dispatchEvent(s),!Ne.PromiseRejectionEvent&&Ne.onunhandledrejection))try{Ne.onunhandledrejection(s)}catch{}_n&&s&&!s.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var qe=Q.reject;function zu(e,t,n,s){if(e.idbdb&&(e._state.openComplete||X.letThrough||e._vip)){var r=e._createTransaction(t,n,e._dbSchema);try{r.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===hf.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>zu(e,t,n,s))):qe(i)}return r._promise(t,(i,l)=>Ps(()=>(X.trans=r,s(i,l,r)))).then(i=>r._completion.then(()=>i))}if(e._state.openComplete)return qe(new ne.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return qe(new ne.DatabaseClosed);e.open().catch(ye)}return e._state.dbReadyPromise.then(()=>zu(e,t,n,s))}const wp="3.2.7",Zs="",Hu=-1/0,En="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",S0="String expected.",ni=[],kc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),kN=kc,SN=kc,_0=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Sc="__dbnames",pd="readonly",gd="readwrite";function cr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const E0={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ll(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=il(t))[e],t)}class _N{_trans(t,n,s){const r=this._tx||X.trans,i=this.name;function l(c,d,u){if(!u.schema[i])throw new ne.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}const o=ll();try{return r&&r.db===this.db?r===X.trans?r._promise(t,l,s):Ps(()=>r._promise(t,l,s),{trans:r,transless:X.transless||X}):zu(this.db,t,[this.name],l)}finally{o&&ol()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",s=>this.core.get({trans:s,key:t}).then(r=>this.hook.reading.fire(r))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(at(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=Fe(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const s=this.schema.indexes.concat(this.schema.primKey).filter(d=>{if(d.compound&&n.every(u=>d.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(d.keyPath[u])===-1)return!1;return!0}return!1}).sort((d,u)=>d.keyPath.length-u.keyPath.length)[0];if(s&&this.db._maxKey!==Zs){const d=s.keyPath.slice(0,n.length);return this.where(d).equals(d.map(u=>t[u]))}!s&&_n&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:r}=this.schema,i=this.db._deps.indexedDB;function l(d,u){try{return i.cmp(d,u)===0}catch{return!1}}const[o,c]=n.reduce(([d,u],h)=>{const m=r[h],g=t[h];return[d||m,d||!m?cr(u,m&&m.multi?j=>{const v=Bn(j,h);return at(v)&&v.some(w=>l(g,w))}:j=>l(g,Bn(j,h))):u]},[null,null]);return o?this.where(o.name).equals(t[o.keyPath]).filter(c):s?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,at(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=s=>{if(!s)return s;const r=Object.create(t.prototype);for(var i in s)if(Lt(s,i))try{r[i]=s[i]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){ht(this,t)})}add(t,n){const{auto:s,keyPath:r}=this.schema.primKey;let i=t;return r&&s&&(i=Ll(r)(t)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"add",keys:n!=null?[n]:null,values:[i]})).then(l=>l.numFailures?Q.reject(l.failures[0]):l.lastResult).then(l=>{if(r)try{rn(t,r,l)}catch{}return l})}update(t,n){if(typeof t!="object"||at(t))return this.where(":id").equals(t).modify(n);{const s=Bn(t,this.schema.primKey.keyPath);if(s===void 0)return qe(new ne.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Fe(n).forEach(r=>{rn(t,r,n[r])}):n(t,{value:t,primKey:s})}catch{}return this.where(":id").equals(s).modify(n)}}put(t,n){const{auto:s,keyPath:r}=this.schema.primKey;let i=t;return r&&s&&(i=Ll(r)(t)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"put",values:[i],keys:n!=null?[n]:null})).then(l=>l.numFailures?Q.reject(l.failures[0]):l.lastResult).then(l=>{if(r)try{rn(t,r,l)}catch{}return l})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?Q.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:E0})).then(t=>t.numFailures?Q.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(s=>s.map(r=>this.hook.reading.fire(r))))}bulkAdd(t,n,s){const r=Array.isArray(n)?n:void 0,i=(s=s||(r?void 0:n))?s.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:o,keyPath:c}=this.schema.primKey;if(c&&r)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const d=t.length;let u=c&&o?t.map(Ll(c)):t;return this.core.mutate({trans:l,type:"add",keys:r,values:u,wantResults:i}).then(({numFailures:h,results:m,lastResult:g,failures:j})=>{if(h===0)return i?m:g;throw new ei(`${this.name}.bulkAdd(): ${h} of ${d} operations failed`,j)})})}bulkPut(t,n,s){const r=Array.isArray(n)?n:void 0,i=(s=s||(r?void 0:n))?s.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:o,keyPath:c}=this.schema.primKey;if(c&&r)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const d=t.length;let u=c&&o?t.map(Ll(c)):t;return this.core.mutate({trans:l,type:"put",keys:r,values:u,wantResults:i}).then(({numFailures:h,results:m,lastResult:g,failures:j})=>{if(h===0)return i?m:g;throw new ei(`${this.name}.bulkPut(): ${h} of ${d} operations failed`,j)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",s=>this.core.mutate({trans:s,type:"delete",keys:t})).then(({numFailures:s,lastResult:r,failures:i})=>{if(s===0)return r;throw new ei(`${this.name}.bulkDelete(): ${s} of ${n} operations failed`,i)})}}function si(e){var t={},n=function(l,o){if(o){for(var c=arguments.length,d=new Array(c-1);--c;)d[c-1]=arguments[c];return t[l].subscribe.apply(null,d),e}if(typeof l=="string")return t[l]};n.addEventType=i;for(var s=1,r=arguments.length;s<r;++s)i(arguments[s]);return n;function i(l,o,c){if(typeof l!="object"){var d;o||(o=xN),c||(c=ye);var u={subscribers:[],fire:c,subscribe:function(h){u.subscribers.indexOf(h)===-1&&(u.subscribers.push(h),u.fire=o(u.fire,h))},unsubscribe:function(h){u.subscribers=u.subscribers.filter(function(m){return m!==h}),u.fire=u.subscribers.reduce(o,c)}};return t[l]=n[l]=u,u}Fe(d=l).forEach(function(h){var m=d[h];if(at(m))i(h,d[h][0],d[h][1]);else{if(m!=="asap")throw new ne.InvalidArgument("Invalid event config");var g=i(h,Ii,function(){for(var j=arguments.length,v=new Array(j);j--;)v[j]=arguments[j];g.subscribers.forEach(function(w){l0(function(){w.apply(null,v)})})})}})}}function Ia(e,t){return Wr(t).from({prototype:e}),t}function yr(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xd(e,t){e.filter=cr(e.filter,t)}function yd(e,t,n){var s=e.replayFilter;e.replayFilter=s?()=>cr(s(),t()):t,e.justLimit=n&&!s}function io(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ne.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function bp(e,t,n){const s=io(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:s,range:e.range}})}function Rl(e,t,n,s){const r=e.replayFilter?cr(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},l=(o,c,d)=>{if(!r||r(c,d,m=>c.stop(m),m=>c.fail(m))){var u=c.primaryKey,h=""+u;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(u)),Lt(i,h)||(i[h]=!0,t(o,c,d))}};return Promise.all([e.or._iterate(l,n),jp(bp(e,s,n),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}return jp(bp(e,s,n),cr(e.algorithm,r),t,!e.keysOnly&&e.valueMapper)}function jp(e,t,n,s){var r=_e(s?(i,l,o)=>n(s(i),l,o):n);return e.then(i=>{if(i)return i.start(()=>{var l=()=>i.continue();t&&!t(i,o=>l=o,o=>{i.stop(o),l=ye},o=>{i.fail(o),l=ye})||r(i.value,i,o=>l=o),l()})})}function mt(e,t){try{const n=Np(e),s=Np(t);if(n!==s)return n==="Array"?1:s==="Array"?-1:n==="binary"?1:s==="binary"?-1:n==="string"?1:s==="string"?-1:n==="Date"?1:s!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(r,i){const l=r.length,o=i.length,c=l<o?l:o;for(let d=0;d<c;++d)if(r[d]!==i[d])return r[d]<i[d]?-1:1;return l===o?0:l<o?-1:1}(kp(e),kp(t));case"Array":return function(r,i){const l=r.length,o=i.length,c=l<o?l:o;for(let d=0;d<c;++d){const u=mt(r[d],i[d]);if(u!==0)return u}return l===o?0:l<o?-1:1}(e,t)}}catch{}return NaN}function Np(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Du(e);return n==="ArrayBuffer"?"binary":n}function kp(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class EN{_read(t,n){var s=this._ctx;return s.error?s.table._trans(null,qe.bind(null,s.error)):s.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,qe.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=cr(n.algorithm,t)}_iterate(t,n){return Rl(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return t&&ht(s,t),n._ctx=s,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(s=>Rl(n,t,s,n.table.core))}count(t){return this._read(n=>{const s=this._ctx,r=s.table.core;if(yr(s,!0))return r.count({trans:n,query:{index:io(s,r.schema),range:s.range}}).then(l=>Math.min(l,s.limit));var i=0;return Rl(s,()=>(++i,!1),n,r).then(()=>i)}).then(t)}sortBy(t,n){const s=t.split(".").reverse(),r=s[0],i=s.length-1;function l(d,u){return u?l(d[s[u]],u-1):d[r]}var o=this._ctx.dir==="next"?1:-1;function c(d,u){var h=l(d,i),m=l(u,i);return h<m?-o:h>m?o:0}return this.toArray(function(d){return d.sort(c)}).then(n)}toArray(t){return this._read(n=>{var s=this._ctx;if(s.dir==="next"&&yr(s,!0)&&s.limit>0){const{valueMapper:r}=s,i=io(s,s.table.core.schema);return s.table.core.query({trans:n,limit:s.limit,values:!0,query:{index:i,range:s.range}}).then(({result:l})=>r?l.map(r):l)}{const r=[];return Rl(s,i=>r.push(i),n,s.table.core).then(()=>r)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,yr(n)?yd(n,()=>{var s=t;return(r,i)=>s===0||(s===1?(--s,!1):(i(()=>{r.advance(s),s=0}),!1))}):yd(n,()=>{var s=t;return()=>--s<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),yd(this._ctx,()=>{var n=t;return function(s,r,i){return--n<=0&&r(i),n>=0}},!0),this}until(t,n){return xd(this._ctx,function(s,r,i){return!t(s.value)||(r(i),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,s;return xd(this._ctx,function(r){return t(r.value)}),n=this._ctx,s=t,n.isMatch=cr(n.isMatch,s),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(s,r){t(r.key,r)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(s,r){t(r.primaryKey,r)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var s=[];return this.each(function(r,i){s.push(i.key)}).then(function(){return s}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&yr(n,!0)&&n.limit>0)return this._read(r=>{var i=io(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:r})=>r).then(t);n.keysOnly=!n.isMatch;var s=[];return this.each(function(r,i){s.push(i.primaryKey)}).then(function(){return s}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var s={};return xd(this._ctx,function(r){var i=r.primaryKey.toString(),l=Lt(s,i);return s[i]=!0,!l}),this}modify(t){var n=this._ctx;return this._write(s=>{var r;if(typeof t=="function")r=t;else{var i=Fe(t),l=i.length;r=function(v){for(var w=!1,p=0;p<l;++p){var f=i[p],y=t[f];Bn(v,f)!==y&&(rn(v,f,y),w=!0)}return w}}const o=n.table.core,{outbound:c,extractKey:d}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,h=[];let m=0;const g=[],j=(v,w)=>{const{failures:p,numFailures:f}=w;m+=v-f;for(let y of Fe(p))h.push(p[y])};return this.clone().primaryKeys().then(v=>{const w=p=>{const f=Math.min(u,v.length-p);return o.getMany({trans:s,keys:v.slice(p,p+f),cache:"immutable"}).then(y=>{const N=[],b=[],S=c?[]:null,k=[];for(let _=0;_<f;++_){const I=y[_],T={value:il(I),primKey:v[p+_]};r.call(T,T.value,T)!==!1&&(T.value==null?k.push(v[p+_]):c||mt(d(I),d(T.value))===0?(b.push(T.value),c&&S.push(v[p+_])):(k.push(v[p+_]),N.push(T.value)))}const E=yr(n)&&n.limit===1/0&&(typeof t!="function"||t===vd)&&{index:n.index,range:n.range};return Promise.resolve(N.length>0&&o.mutate({trans:s,type:"add",values:N}).then(_=>{for(let I in _.failures)k.splice(parseInt(I),1);j(N.length,_)})).then(()=>(b.length>0||E&&typeof t=="object")&&o.mutate({trans:s,type:"put",keys:S,values:b,criteria:E,changeSpec:typeof t!="function"&&t}).then(_=>j(b.length,_))).then(()=>(k.length>0||E&&t===vd)&&o.mutate({trans:s,type:"delete",keys:k,criteria:E}).then(_=>j(k.length,_))).then(()=>v.length>p+f&&w(p+u))})};return w(0).then(()=>{if(h.length>0)throw new Ro("Error modifying one or more objects",h,m,g);return v.length})})})}delete(){var t=this._ctx,n=t.range;return yr(t)&&(t.isPrimKey&&!SN||n.type===3)?this._write(s=>{const{primaryKey:r}=t.table.core.schema,i=n;return t.table.core.count({trans:s,query:{index:r,range:i}}).then(l=>t.table.core.mutate({trans:s,type:"deleteRange",range:i}).then(({failures:o,lastResult:c,results:d,numFailures:u})=>{if(u)throw new Ro("Could not delete some values",Object.keys(o).map(h=>o[h]),l-u);return l-u}))}):this.modify(vd)}}const vd=(e,t)=>t.value=null;function CN(e,t){return e<t?-1:e===t?0:1}function AN(e,t){return e>t?-1:e===t?0:1}function _t(e,t,n){var s=e instanceof A0?new e.Collection(e):e;return s._ctx.error=n?new n(t):new TypeError(t),s}function vr(e){return new e.Collection(e,()=>C0("")).limit(0)}function PN(e,t,n,s,r,i){for(var l=Math.min(e.length,s.length),o=-1,c=0;c<l;++c){var d=t[c];if(d!==s[c])return r(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):r(e[c],s[c])<0?e.substr(0,c)+s[c]+n.substr(c+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;r(e[c],d)<0&&(o=c)}return l<s.length&&i==="next"?e+n.substr(e.length):l<e.length&&i==="prev"?e.substr(0,n.length):o<0?null:e.substr(0,o)+s[o]+n.substr(o+1)}function Ml(e,t,n,s){var r,i,l,o,c,d,u,h=n.length;if(!n.every(v=>typeof v=="string"))return _t(e,S0);function m(v){r=function(p){return p==="next"?f=>f.toUpperCase():f=>f.toLowerCase()}(v),i=function(p){return p==="next"?f=>f.toLowerCase():f=>f.toUpperCase()}(v),l=v==="next"?CN:AN;var w=n.map(function(p){return{lower:i(p),upper:r(p)}}).sort(function(p,f){return l(p.lower,f.lower)});o=w.map(function(p){return p.upper}),c=w.map(function(p){return p.lower}),d=v,u=v==="next"?"":s}m("next");var g=new e.Collection(e,()=>ss(o[0],c[h-1]+s));g._ondirectionchange=function(v){m(v)};var j=0;return g._addAlgorithm(function(v,w,p){var f=v.key;if(typeof f!="string")return!1;var y=i(f);if(t(y,c,j))return!0;for(var N=null,b=j;b<h;++b){var S=PN(f,y,o[b],c[b],l,d);S===null&&N===null?j=b+1:(N===null||l(N,S)>0)&&(N=S)}return w(N!==null?function(){v.continue(N+u)}:p),!1}),g}function ss(e,t,n,s){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:s}}function C0(e){return{type:1,lower:e,upper:e}}class A0{get Collection(){return this._ctx.table.db.Collection}between(t,n,s,r){s=s!==!1,r=r===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(s||r)&&(!s||!r)?vr(this):new this.Collection(this,()=>ss(t,n,!s,!r))}catch{return _t(this,En)}}equals(t){return t==null?_t(this,En):new this.Collection(this,()=>C0(t))}above(t){return t==null?_t(this,En):new this.Collection(this,()=>ss(t,void 0,!0))}aboveOrEqual(t){return t==null?_t(this,En):new this.Collection(this,()=>ss(t,void 0,!1))}below(t){return t==null?_t(this,En):new this.Collection(this,()=>ss(void 0,t,!1,!0))}belowOrEqual(t){return t==null?_t(this,En):new this.Collection(this,()=>ss(void 0,t))}startsWith(t){return typeof t!="string"?_t(this,S0):this.between(t,t+Zs,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Ml(this,(n,s)=>n.indexOf(s[0])===0,[t],Zs)}equalsIgnoreCase(t){return Ml(this,(n,s)=>n===s[0],[t],"")}anyOfIgnoreCase(){var t=On.apply(Sr,arguments);return t.length===0?vr(this):Ml(this,(n,s)=>s.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=On.apply(Sr,arguments);return t.length===0?vr(this):Ml(this,(n,s)=>s.some(r=>n.indexOf(r)===0),t,Zs)}anyOf(){const t=On.apply(Sr,arguments);let n=this._cmp;try{t.sort(n)}catch{return _t(this,En)}if(t.length===0)return vr(this);const s=new this.Collection(this,()=>ss(t[0],t[t.length-1]));s._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,t.sort(n)};let r=0;return s._addAlgorithm((i,l,o)=>{const c=i.key;for(;n(c,t[r])>0;)if(++r,r===t.length)return l(o),!1;return n(c,t[r])===0||(l(()=>{i.continue(t[r])}),!1)}),s}notEqual(t){return this.inAnyRange([[Hu,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=On.apply(Sr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return _t(this,En)}const n=t.reduce((s,r)=>s?s.concat([[s[s.length-1][1],r]]):[[Hu,r]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const s=this._cmp,r=this._ascending,i=this._descending,l=this._min,o=this._max;if(t.length===0)return vr(this);if(!t.every(f=>f[0]!==void 0&&f[1]!==void 0&&r(f[0],f[1])<=0))return _t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);const c=!n||n.includeLowers!==!1,d=n&&n.includeUppers===!0;let u,h=r;function m(f,y){return h(f[0],y[0])}try{u=t.reduce(function(f,y){let N=0,b=f.length;for(;N<b;++N){const S=f[N];if(s(y[0],S[1])<0&&s(y[1],S[0])>0){S[0]=l(S[0],y[0]),S[1]=o(S[1],y[1]);break}}return N===b&&f.push(y),f},[]),u.sort(m)}catch{return _t(this,En)}let g=0;const j=d?f=>r(f,u[g][1])>0:f=>r(f,u[g][1])>=0,v=c?f=>i(f,u[g][0])>0:f=>i(f,u[g][0])>=0;let w=j;const p=new this.Collection(this,()=>ss(u[0][0],u[u.length-1][1],!c,!d));return p._ondirectionchange=f=>{f==="next"?(w=j,h=r):(w=v,h=i),u.sort(m)},p._addAlgorithm((f,y,N)=>{for(var b=f.key;w(b);)if(++g,g===u.length)return y(N),!1;return!!function(S){return!j(S)&&!v(S)}(b)||(this._cmp(b,u[g][1])===0||this._cmp(b,u[g][0])===0||y(()=>{h===r?f.continue(u[g][0]):f.continue(u[g][1])}),!1)}),p}startsWithAnyOf(){const t=On.apply(Sr,arguments);return t.every(n=>typeof n=="string")?t.length===0?vr(this):this.inAnyRange(t.map(n=>[n,n+Zs])):_t(this,"startsWithAnyOf() only works with strings")}}function hn(e){return _e(function(t){return Ti(t),e(t.target.error),!1})}function Ti(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Oi="storagemutated",ds="x-storagemutated-1",Ds=si(null,Oi);class IN{_lock(){return Ba(!X.global),++this._reculock,this._reculock!==1||X.global||(X.lockOwnerFor=this),this}_unlock(){if(Ba(!X.global),--this._reculock==0)for(X.global||(X.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{wa(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&X.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,s=this.db._state.dbOpenError;if(Ba(!this.idbtrans),!t&&!n)switch(s&&s.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(s);case"MissingAPIError":throw new ne.MissingAPI(s.message,s);default:throw new ne.OpenFailed(s)}if(!this.active)throw new ne.TransactionInactive;return Ba(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=_e(r=>{Ti(r),this._reject(t.error)}),t.onabort=_e(r=>{Ti(r),this.active&&this._reject(new ne.Abort(t.error)),this.active=!1,this.on("abort").fire(r)}),t.oncomplete=_e(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Ds.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,s){if(t==="readwrite"&&this.mode!=="readwrite")return qe(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return qe(new ne.TransactionInactive);if(this._locked())return new Q((i,l)=>{this._blockedFuncs.push([()=>{this._promise(t,n,s).then(i,l)},X])});if(s)return Ps(()=>{var i=new Q((l,o)=>{this._lock();const c=n(l,o,this);c&&c.then&&c.then(l,o)});return i.finally(()=>this._unlock()),i._lib=!0,i});var r=new Q((i,l)=>{var o=n(i,l,this);o&&o.then&&o.then(i,l)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const s=Q.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>s);else{n._waitingFor=s,n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);(function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(r.get(-1/0).onsuccess=l)})()}var i=n._waitingFor;return new Q((l,o)=>{s.then(c=>n._waitingQueue.push(_e(l.bind(null,c))),c=>n._waitingQueue.push(_e(o.bind(null,c)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Lt(n,t))return n[t];const s=this.schema[t];if(!s)throw new ne.NotFound("Table "+t+" not part of transaction");const r=new this.db.Table(t,s,this);return r.core=this.db.core.table(t),n[t]=r,r}}function qu(e,t,n,s,r,i,l){return{name:e,keyPath:t,unique:n,multi:s,auto:r,compound:i,src:(n&&!l?"&":"")+(s?"*":"")+(r?"++":"")+P0(t)}}function P0(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function I0(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:o0(n,s=>[s.name,s])}}let Li=e=>{try{return e.only([[]]),Li=()=>[[]],[[]]}catch{return Li=()=>Zs,Zs}};function Ku(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?s=>s[t]:s=>Bn(s,t)}(e):t=>Bn(t,e)}function Sp(e){return[].slice.call(e)}let DN=0;function ri(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function TN(e,t,n){function s(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:d,upper:u,lowerOpen:h,upperOpen:m}=c;return d===void 0?u===void 0?null:t.upperBound(u,!!m):u===void 0?t.lowerBound(d,!!h):t.bound(d,u,!!h,!!m)}const{schema:r,hasGetAll:i}=function(c,d){const u=Sp(c.objectStoreNames);return{schema:{name:c.name,tables:u.map(h=>d.objectStore(h)).map(h=>{const{keyPath:m,autoIncrement:g}=h,j=at(m),v=m==null,w={},p={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v,compound:j,keyPath:m,autoIncrement:g,unique:!0,extractKey:Ku(m)},indexes:Sp(h.indexNames).map(f=>h.index(f)).map(f=>{const{name:y,unique:N,multiEntry:b,keyPath:S}=f,k={name:y,compound:at(S),keyPath:S,unique:N,multiEntry:b,extractKey:Ku(S)};return w[ri(S)]=k,k}),getIndexByKeyPath:f=>w[ri(f)]};return w[":id"]=p.primaryKey,m!=null&&(w[ri(m)]=p.primaryKey),p})},hasGetAll:u.length>0&&"getAll"in d.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),l=r.tables.map(c=>function(d){const u=d.name;return{name:u,schema:d,mutate:function({trans:h,type:m,keys:g,values:j,range:v}){return new Promise((w,p)=>{w=_e(w);const f=h.objectStore(u),y=f.keyPath==null,N=m==="put"||m==="add";if(!N&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);const{length:b}=g||j||{length:1};if(g&&j&&g.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(b===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const k=[],E=[];let _=0;const I=L=>{++_,Ti(L)};if(m==="deleteRange"){if(v.type===4)return w({numFailures:_,failures:E,results:[],lastResult:void 0});v.type===3?k.push(S=f.clear()):k.push(S=f.delete(s(v)))}else{const[L,z]=N?y?[j,g]:[j,null]:[g,null];if(N)for(let H=0;H<b;++H)k.push(S=z&&z[H]!==void 0?f[m](L[H],z[H]):f[m](L[H])),S.onerror=I;else for(let H=0;H<b;++H)k.push(S=f[m](L[H])),S.onerror=I}const T=L=>{const z=L.target.result;k.forEach((H,ee)=>H.error!=null&&(E[ee]=H.error)),w({numFailures:_,failures:E,results:m==="delete"?g:k.map(H=>H.result),lastResult:z})};S.onerror=L=>{I(L),T(L)},S.onsuccess=T})},getMany:({trans:h,keys:m})=>new Promise((g,j)=>{g=_e(g);const v=h.objectStore(u),w=m.length,p=new Array(w);let f,y=0,N=0;const b=k=>{const E=k.target;p[E._pos]=E.result,++N===y&&g(p)},S=hn(j);for(let k=0;k<w;++k)m[k]!=null&&(f=v.get(m[k]),f._pos=k,f.onsuccess=b,f.onerror=S,++y);y===0&&g(p)}),get:({trans:h,key:m})=>new Promise((g,j)=>{g=_e(g);const v=h.objectStore(u).get(m);v.onsuccess=w=>g(w.target.result),v.onerror=hn(j)}),query:function(h){return m=>new Promise((g,j)=>{g=_e(g);const{trans:v,values:w,limit:p,query:f}=m,y=p===1/0?void 0:p,{index:N,range:b}=f,S=v.objectStore(u),k=N.isPrimaryKey?S:S.index(N.name),E=s(b);if(p===0)return g({result:[]});if(h){const _=w?k.getAll(E,y):k.getAllKeys(E,y);_.onsuccess=I=>g({result:I.target.result}),_.onerror=hn(j)}else{let _=0;const I=w||!("openKeyCursor"in k)?k.openCursor(E):k.openKeyCursor(E),T=[];I.onsuccess=L=>{const z=I.result;return z?(T.push(w?z.value:z.primaryKey),++_===p?g({result:T}):void z.continue()):g({result:T})},I.onerror=hn(j)}})}(i),openCursor:function({trans:h,values:m,query:g,reverse:j,unique:v}){return new Promise((w,p)=>{w=_e(w);const{index:f,range:y}=g,N=h.objectStore(u),b=f.isPrimaryKey?N:N.index(f.name),S=j?v?"prevunique":"prev":v?"nextunique":"next",k=m||!("openKeyCursor"in b)?b.openCursor(s(y),S):b.openKeyCursor(s(y),S);k.onerror=hn(p),k.onsuccess=_e(E=>{const _=k.result;if(!_)return void w(null);_.___id=++DN,_.done=!1;const I=_.continue.bind(_);let T=_.continuePrimaryKey;T&&(T=T.bind(_));const L=_.advance.bind(_),z=()=>{throw new Error("Cursor not stopped")};_.trans=h,_.stop=_.continue=_.continuePrimaryKey=_.advance=()=>{throw new Error("Cursor not started")},_.fail=_e(p),_.next=function(){let H=1;return this.start(()=>H--?this.continue():this.stop()).then(()=>this)},_.start=H=>{const ee=new Promise((ie,R)=>{ie=_e(ie),k.onerror=hn(R),_.fail=R,_.stop=A=>{_.stop=_.continue=_.continuePrimaryKey=_.advance=z,ie(A)}}),re=()=>{if(k.result)try{H()}catch(ie){_.fail(ie)}else _.done=!0,_.start=()=>{throw new Error("Cursor behind last entry")},_.stop()};return k.onsuccess=_e(ie=>{k.onsuccess=re,re()}),_.continue=I,_.continuePrimaryKey=T,_.advance=L,re(),ee},w(_)},p)})},count({query:h,trans:m}){const{index:g,range:j}=h;return new Promise((v,w)=>{const p=m.objectStore(u),f=g.isPrimaryKey?p:p.index(g.name),y=s(j),N=y?f.count(y):f.count();N.onsuccess=_e(b=>v(b.target.result)),N.onerror=hn(w)})}}}(c)),o={};return l.forEach(c=>o[c.name]=c),{stack:"dbcore",transaction:e.transaction.bind(e),table(c){if(!o[c])throw new Error(`Table '${c}' not found`);return o[c]},MIN_KEY:-1/0,MAX_KEY:Li(t),schema:r}}function Wu({_novip:e},t){const n=t.db,s=function(r,i,{IDBKeyRange:l,indexedDB:o},c){return{dbcore:function(u,h){return h.reduce((m,{create:g})=>({...m,...g(m)}),u)}(TN(i,l,c),r.dbcore)}}(e._middlewares,n,e._deps,t);e.core=s.dbcore,e.tables.forEach(r=>{const i=r.name;e.core.schema.tables.some(l=>l.name===i)&&(r.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=r.core))})}function Vo({_novip:e},t,n,s){n.forEach(r=>{const i=s[r];t.forEach(l=>{const o=uf(l,r);(!o||"value"in o&&o.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?Fn(l,r,{get(){return this.table(r)},set(c){a0(this,r,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):l[r]=new e.Table(r,i))})})}function Qu({_novip:e},t){t.forEach(n=>{for(let s in n)n[s]instanceof e.Table&&delete n[s]})}function ON(e,t){return e._cfg.version-t._cfg.version}function LN(e,t,n,s){const r=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,r);i.create(n),i._completion.catch(s);const l=i._reject.bind(i),o=X.transless||X;Ps(()=>{X.trans=i,X.transless=o,t===0?(Fe(r).forEach(c=>{wd(n,c,r[c].primKey,r[c].indexes)}),Wu(e,n),Q.follow(()=>e.on.populate.fire(i)).catch(l)):function({_novip:c},d,u,h){const m=[],g=c._versions;let j=c._dbSchema=Gu(c,c.idbdb,h),v=!1;const w=g.filter(f=>f._cfg.version>=d);function p(){return m.length?Q.resolve(m.shift()(u.idbtrans)).then(p):Q.resolve()}return w.forEach(f=>{m.push(()=>{const y=j,N=f._cfg.dbschema;Ju(c,y,h),Ju(c,N,h),j=c._dbSchema=N;const b=D0(y,N);b.add.forEach(k=>{wd(h,k[0],k[1].primKey,k[1].indexes)}),b.change.forEach(k=>{if(k.recreate)throw new ne.Upgrade("Not yet support for changing primary key");{const E=h.objectStore(k.name);k.add.forEach(_=>Zu(E,_)),k.change.forEach(_=>{E.deleteIndex(_.name),Zu(E,_)}),k.del.forEach(_=>E.deleteIndex(_))}});const S=f._cfg.contentUpgrade;if(S&&f._cfg.version>d){Wu(c,h),u._memoizedTables={},v=!0;let k=c0(N);b.del.forEach(T=>{k[T]=y[T]}),Qu(c,[c.Transaction.prototype]),Vo(c,[c.Transaction.prototype],Fe(k),k),u.schema=k;const E=mf(S);let _;E&&va();const I=Q.follow(()=>{if(_=S(u),_&&E){var T=Kn.bind(null,null);_.then(T,T)}});return _&&typeof _.then=="function"?Q.resolve(_):I.then(()=>_)}}),m.push(y=>{(!v||!kN)&&function(N,b){[].slice.call(b.db.objectStoreNames).forEach(S=>N[S]==null&&b.db.deleteObjectStore(S))}(f._cfg.dbschema,y),Qu(c,[c.Transaction.prototype]),Vo(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),u.schema=c._dbSchema})}),p().then(()=>{var f,y;y=h,Fe(f=j).forEach(N=>{y.db.objectStoreNames.contains(N)||wd(y,N,f[N].primKey,f[N].indexes)})})}(e,t,i,n).catch(l)})}function D0(e,t){const n={del:[],add:[],change:[]};let s;for(s in e)t[s]||n.del.push(s);for(s in t){const r=e[s],i=t[s];if(r){const l={name:s,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||r.primKey.auto!==i.primKey.auto&&!kc)l.recreate=!0,n.change.push(l);else{const o=r.idxByName,c=i.idxByName;let d;for(d in o)c[d]||l.del.push(d);for(d in c){const u=o[d],h=c[d];u?u.src!==h.src&&l.change.push(h):l.add.push(h)}(l.del.length>0||l.add.length>0||l.change.length>0)&&n.change.push(l)}}else n.add.push([s,i])}return n}function wd(e,t,n,s){const r=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return s.forEach(i=>Zu(r,i)),r}function Zu(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Gu(e,t,n){const s={};return Lo(t.objectStoreNames,0).forEach(r=>{const i=n.objectStore(r);let l=i.keyPath;const o=qu(P0(l),l||"",!1,!1,!!i.autoIncrement,l&&typeof l!="string",!0),c=[];for(let u=0;u<i.indexNames.length;++u){const h=i.index(i.indexNames[u]);l=h.keyPath;var d=qu(h.name,l,!!h.unique,!!h.multiEntry,!1,l&&typeof l!="string",!1);c.push(d)}s[r]=I0(r,o,c)}),s}function Ju({_novip:e},t,n){const s=n.db.objectStoreNames;for(let r=0;r<s.length;++r){const i=s[r],l=n.objectStore(i);e._hasGetAll="getAll"in l;for(let o=0;o<l.indexNames.length;++o){const c=l.indexNames[o],d=l.index(c).keyPath,u=typeof d=="string"?d:"["+Lo(d).join("+")+"]";if(t[i]){const h=t[i].idxByName[u];h&&(h.name=c,delete t[i].idxByName[u],t[i].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ne.WorkerGlobalScope&&Ne instanceof Ne.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class RN{_parseStoresSpec(t,n){Fe(t).forEach(s=>{if(t[s]!==null){var r=t[s].split(",").map((l,o)=>{const c=(l=l.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return qu(c,d||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),at(d),o===0)}),i=r.shift();if(i.multi)throw new ne.Schema("Primary key cannot be multi-valued");r.forEach(l=>{if(l.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),n[s]=I0(s,i,r)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ht(this._cfg.storesSource,t):t;const s=n._versions,r={};let i={};return s.forEach(l=>{ht(r,l._cfg.storesSource),i=l._cfg.dbschema={},l._parseStoresSpec(r,i)}),n._dbSchema=i,Qu(n,[n._allTables,n,n.Transaction.prototype]),Vo(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Fe(i),i),n._storeNames=Fe(i),this}upgrade(t){return this._cfg.contentUpgrade=pf(this._cfg.contentUpgrade||ye,t),this}}function vf(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Dt(Sc,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function wf(e){return e&&typeof e.databases=="function"}function Yu(e){return Ps(function(){return X.letThrough=!0,e()})}function MN(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function $N(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?qe(t.dbOpenError):e);_n&&(t.openCanceller._stackHolder=pr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const s=t.openCanceller;function r(){if(t.openCanceller!==s)throw new ne.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,l=null,o=!1;const c=()=>new Q((d,u)=>{if(r(),!n)throw new ne.MissingAPI;const h=e.name,m=t.autoSchema?n.open(h):n.open(h,Math.round(10*e.verno));if(!m)throw new ne.MissingAPI;m.onerror=hn(u),m.onblocked=_e(e._fireOnBlocked),m.onupgradeneeded=_e(g=>{if(l=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=Ti,l.abort(),m.result.close();const v=n.deleteDatabase(h);v.onsuccess=v.onerror=_e(()=>{u(new ne.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{l.onerror=hn(u);var j=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;o=j<1,e._novip.idbdb=m.result,LN(e,j/10,l,u)}},u),m.onsuccess=_e(()=>{l=null;const g=e._novip.idbdb=m.result,j=Lo(g.objectStoreNames);if(j.length>0)try{const w=g.transaction((v=j).length===1?v[0]:v,"readonly");t.autoSchema?function({_novip:p},f,y){p.verno=f.version/10;const N=p._dbSchema=Gu(0,f,y);p._storeNames=Lo(f.objectStoreNames,0),Vo(p,[p._allTables],Fe(N),N)}(e,g,w):(Ju(e,e._dbSchema,w),function(p,f){const y=D0(Gu(0,p.idbdb,f),p._dbSchema);return!(y.add.length||y.change.some(N=>N.add.length||N.change.length))}(e,w)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Wu(e,w)}catch{}var v;ni.push(e),g.onversionchange=_e(w=>{t.vcFired=!0,e.on("versionchange").fire(w)}),g.onclose=_e(w=>{e.on("close").fire(w)}),o&&function({indexedDB:w,IDBKeyRange:p},f){!wf(w)&&f!==Sc&&vf(w,p).put({name:f}).catch(ye)}(e._deps,h),d()},u)}).catch(d=>d&&d.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):Q.reject(d));return Q.race([s,(typeof navigator>"u"?Q.resolve():MN()).then(c)]).then(()=>(r(),t.onReadyBeingFired=[],Q.resolve(Yu(()=>e.on.ready.fire(e.vip))).then(function d(){if(t.onReadyBeingFired.length>0){let u=t.onReadyBeingFired.reduce(pf,ye);return t.onReadyBeingFired=[],Q.resolve(Yu(()=>u(e.vip))).then(d)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(d=>{t.dbOpenError=d;try{l&&l.abort()}catch{}return s===t.openCanceller&&e._close(),qe(d)}).finally(()=>{t.openComplete=!0,i()})}function Xu(e){var t=i=>e.next(i),n=r(t),s=r(i=>e.throw(i));function r(i){return l=>{var o=i(l),c=o.value;return o.done?c:c&&typeof c.then=="function"?c.then(n,s):at(c)?Promise.all(c).then(n,s):n(c)}}return r(t)()}function FN(e,t,n){var s=arguments.length;if(s<2)throw new ne.InvalidArgument("Too few arguments");for(var r=new Array(s-1);--s;)r[s-1]=arguments[s];return n=r.pop(),[e,d0(r),n]}function T0(e,t,n,s,r){return Q.resolve().then(()=>{const i=X.transless||X,l=e._createTransaction(t,n,e._dbSchema,s),o={trans:l,transless:i};if(s)l.idbtrans=s.idbtrans;else try{l.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===hf.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>T0(e,t,n,null,r))):qe(h)}const c=mf(r);let d;c&&va();const u=Q.follow(()=>{if(d=r.call(l,l),d)if(c){var h=Kn.bind(null,null);d.then(h,h)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=Xu(d))},o);return(d&&typeof d.then=="function"?Q.resolve(d).then(h=>l.active?h:qe(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>d)).then(h=>(s&&l._resolve(),l._completion.then(()=>h))).catch(h=>(l._reject(h),qe(h)))})}function $l(e,t,n){const s=at(e)?e.slice():[e];for(let r=0;r<n;++r)s.push(t);return s}const BN={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:s}=n,r={},i=[];function l(u,h,m){const g=ri(u),j=r[g]=r[g]||[],v=u==null?0:typeof u=="string"?1:u.length,w=h>0,p={...m,isVirtual:w,keyTail:h,keyLength:v,extractKey:Ku(u),unique:!w&&m.unique};return j.push(p),p.isPrimaryKey||i.push(p),v>1&&l(v===2?u[0]:u.slice(0,v-1),h+1,m),j.sort((f,y)=>f.keyTail-y.keyTail),p}const o=l(s.primaryKey.keyPath,0,s.primaryKey);r[":id"]=[o];for(const u of s.indexes)l(u.keyPath,0,u);function c(u){const h=u.query.index;return h.isVirtual?{...u,query:{index:h,range:(m=u.query.range,g=h.keyTail,{type:m.type===1?2:m.type,lower:$l(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:$l(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}:u;var m,g}return{...n,schema:{...s,primaryKey:o,indexes:i,getIndexByKeyPath:function(u){const h=r[ri(u)];return h&&h[0]}},count:u=>n.count(c(u)),query:u=>n.query(c(u)),openCursor(u){const{keyTail:h,isVirtual:m,keyLength:g}=u.query.index;return m?n.openCursor(c(u)).then(j=>j&&function(v){return Object.create(v,{continue:{value:function(p){p!=null?v.continue($l(p,u.reverse?e.MAX_KEY:e.MIN_KEY,h)):u.unique?v.continue(v.key.slice(0,g).concat(u.reverse?e.MIN_KEY:e.MAX_KEY,h)):v.continue()}},continuePrimaryKey:{value(p,f){v.continuePrimaryKey($l(p,e.MAX_KEY,h),f)}},primaryKey:{get:()=>v.primaryKey},key:{get(){const p=v.key;return g===1?p[0]:p.slice(0,g)}},value:{get:()=>v.value}})}(j)):n.openCursor(u)}}}}}};function bf(e,t,n,s){return n=n||{},s=s||"",Fe(e).forEach(r=>{if(Lt(t,r)){var i=e[r],l=t[r];if(typeof i=="object"&&typeof l=="object"&&i&&l){const o=Du(i);o!==Du(l)?n[s+r]=t[r]:o==="Object"?bf(i,l,n,s+r+"."):i!==l&&(n[s+r]=t[r])}else i!==l&&(n[s+r]=t[r])}else n[s+r]=void 0}),Fe(t).forEach(r=>{Lt(e,r)||(n[s+r]=t[r])}),n}const VN={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:s}=n.schema;return{...n,mutate(i){const l=X.trans,{deleting:o,creating:c,updating:d}=l.table(t).hook;switch(i.type){case"add":if(c.fire===ye)break;return l._promise("readwrite",()=>u(i),!0);case"put":if(c.fire===ye&&d.fire===ye)break;return l._promise("readwrite",()=>u(i),!0);case"delete":if(o.fire===ye)break;return l._promise("readwrite",()=>u(i),!0);case"deleteRange":if(o.fire===ye)break;return l._promise("readwrite",()=>function(m){return h(m.trans,m.range,1e4)}(i),!0)}return n.mutate(i);function u(m){const g=X.trans,j=m.keys||function(v,w){return w.type==="delete"?w.keys:w.keys||w.values.map(v.extractKey)}(s,m);if(!j)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?{...m,keys:j}:{...m}).type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),function(v,w,p){return w.type==="add"?Promise.resolve([]):v.getMany({trans:w.trans,keys:p,cache:"immutable"})}(n,m,j).then(v=>{const w=j.map((p,f)=>{const y=v[f],N={onerror:null,onsuccess:null};if(m.type==="delete")o.fire.call(N,p,y,g);else if(m.type==="add"||y===void 0){const b=c.fire.call(N,p,m.values[f],g);p==null&&b!=null&&(p=b,m.keys[f]=p,s.outbound||rn(m.values[f],s.keyPath,p))}else{const b=bf(y,m.values[f]),S=d.fire.call(N,b,p,y,g);if(S){const k=m.values[f];Object.keys(S).forEach(E=>{Lt(k,E)?k[E]=S[E]:rn(k,E,S[E])})}}return N});return n.mutate(m).then(({failures:p,results:f,numFailures:y,lastResult:N})=>{for(let b=0;b<j.length;++b){const S=f?f[b]:j[b],k=w[b];S==null?k.onerror&&k.onerror(p[b]):k.onsuccess&&k.onsuccess(m.type==="put"&&v[b]?m.values[b]:S)}return{failures:p,results:f,numFailures:y,lastResult:N}}).catch(p=>(w.forEach(f=>f.onerror&&f.onerror(p)),Promise.reject(p)))})}function h(m,g,j){return n.query({trans:m,values:!1,query:{index:s,range:g},limit:j}).then(({result:v})=>u({type:"delete",keys:v,trans:m}).then(w=>w.numFailures>0?Promise.reject(w.failures[0]):v.length<j?{failures:[],numFailures:0,lastResult:void 0}:h(m,{...g,lower:v[v.length-1],lowerOpen:!0},j)))}}}}})};function O0(e,t,n){try{if(!t||t.keys.length<e.length)return null;const s=[];for(let r=0,i=0;r<t.keys.length&&i<e.length;++r)mt(t.keys[r],e[i])===0&&(s.push(n?il(t.values[r]):t.values[r]),++i);return s.length===e.length?s:null}catch{return null}}const UN={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:s=>{if(!s.cache)return n.getMany(s);const r=O0(s.keys,s.trans._cache,s.cache==="clone");return r?Q.resolve(r):n.getMany(s).then(i=>(s.trans._cache={keys:s.keys,values:s.cache==="clone"?il(i):i},i))},mutate:s=>(s.type!=="add"&&(s.trans._cache=null),n.mutate(s))}}})};function jf(e){return!("from"in e)}const Tn=function(e,t){if(!this){const n=new Tn;return e&&"d"in e&&ht(n,e),n}ht(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Ri(e,t,n){const s=mt(t,n);if(isNaN(s))return;if(s>0)throw RangeError();if(jf(e))return ht(e,{from:t,to:n,d:1});const r=e.l,i=e.r;if(mt(n,e.from)<0)return r?Ri(r,t,n):e.l={from:t,to:n,d:1,l:null,r:null},_p(e);if(mt(t,e.to)>0)return i?Ri(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},_p(e);mt(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),mt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const l=!e.r;r&&!e.l&&Uo(e,r),i&&l&&Uo(e,i)}function Uo(e,t){jf(t)||function n(s,{from:r,to:i,l,r:o}){Ri(s,r,i),l&&n(s,l),o&&n(s,o)}(e,t)}function zN(e,t){const n=em(t);let s=n.next();if(s.done)return!1;let r=s.value;const i=em(e);let l=i.next(r.from),o=l.value;for(;!s.done&&!l.done;){if(mt(o.from,r.to)<=0&&mt(o.to,r.from)>=0)return!0;mt(r.from,o.from)<0?r=(s=n.next(o.from)).value:o=(l=i.next(r.from)).value}return!1}function em(e){let t=jf(e)?null:{s:0,n:e};return{next(n){const s=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,s)for(;t.n.l&&mt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!s||mt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function _p(e){var t,n;const s=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),r=s>1?"r":s<-1?"l":"";if(r){const i=r==="r"?"l":"r",l={...e},o=e[r];e.from=o.from,e.to=o.to,e[r]=o[r],l[r]=o[i],e[i]=l,l.d=Ep(l)}e.d=Ep(e)}function Ep({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}la(Tn.prototype,{add(e){return Uo(this,e),this},addKey(e){return Ri(this,e,e),this},addKeys(e){return e.forEach(t=>Ri(this,t,t)),this},[Tu](){return em(this)}});const HN={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Tn(e.MIN_KEY,e.MAX_KEY);return{...e,table:s=>{const r=e.table(s),{schema:i}=r,{primaryKey:l}=i,{extractKey:o,outbound:c}=l,d={...r,mutate:m=>{const g=m.trans,j=g.mutatedParts||(g.mutatedParts={}),v=S=>{const k=`idb://${t}/${s}/${S}`;return j[k]||(j[k]=new Tn)},w=v(""),p=v(":dels"),{type:f}=m;let[y,N]=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[];const b=m.trans._cache;return r.mutate(m).then(S=>{if(at(y)){f!=="delete"&&(y=S.results),w.addKeys(y);const k=O0(y,b);k||f==="add"||p.addKeys(y),(k||N)&&function(E,_,I,T){function L(z){const H=E(z.name||"");function ee(ie){return ie!=null?z.extractKey(ie):null}const re=ie=>z.multiEntry&&at(ie)?ie.forEach(R=>H.addKey(R)):H.addKey(ie);(I||T).forEach((ie,R)=>{const A=I&&ee(I[R]),M=T&&ee(T[R]);mt(A,M)!==0&&(A!=null&&re(A),M!=null&&re(M))})}_.indexes.forEach(L)}(v,i,k,N)}else if(y){const k={from:y.lower,to:y.upper};p.add(k),w.add(k)}else w.add(n),p.add(n),i.indexes.forEach(k=>v(k.name).add(n));return S})}},u=({query:{index:m,range:g}})=>{var j,v;return[m,new Tn((j=g.lower)!==null&&j!==void 0?j:e.MIN_KEY,(v=g.upper)!==null&&v!==void 0?v:e.MAX_KEY)]},h={get:m=>[l,new Tn(m.key)],getMany:m=>[l,new Tn().addKeys(m.keys)],count:u,query:u,openCursor:u};return Fe(h).forEach(m=>{d[m]=function(g){const{subscr:j}=X;if(j){const v=N=>{const b=`idb://${t}/${s}/${N}`;return j[b]||(j[b]=new Tn)},w=v(""),p=v(":dels"),[f,y]=h[m](g);if(v(f.name||"").add(y),!f.isPrimaryKey){if(m!=="count"){const N=m==="query"&&c&&g.values&&r.query({...g,values:!1});return r[m].apply(this,arguments).then(b=>{if(m==="query"){if(c&&g.values)return N.then(({result:k})=>(w.addKeys(k),b));const S=g.values?b.result.map(o):b.result;g.values?w.addKeys(S):p.addKeys(S)}else if(m==="openCursor"){const S=b,k=g.values;return S&&Object.create(S,{key:{get:()=>(p.addKey(S.primaryKey),S.key)},primaryKey:{get(){const E=S.primaryKey;return p.addKey(E),E}},value:{get:()=>(k&&w.addKey(S.primaryKey),S.value)}})}return b})}p.add(n)}}return r[m].apply(this,arguments)}}),d}}}};class Dt{constructor(t,n){this._middlewares={},this.verno=0;const s=Dt.dependencies;this._options=n={addons:Dt.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:r}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ye,dbReadyPromise:null,cancelOpen:ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var l;i.dbReadyPromise=new Q(o=>{i.dbReadyResolve=o}),i.openCanceller=new Q((o,c)=>{i.cancelOpen=c}),this._state=i,this.name=t,this.on=si(this,"populate","blocked","versionchange","close",{ready:[pf,ye]}),this.on.ready.subscribe=i0(this.on.ready.subscribe,o=>(c,d)=>{Dt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||Q.resolve().then(c),d&&o(c);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(c),d&&o(c);else{o(c);const h=this;d||o(function m(){h.on.ready.unsubscribe(c),h.on.ready.unsubscribe(m)})}})}),this.Collection=(l=this,Ia(EN.prototype,function(o,c){this.db=l;let d=E0,u=null;if(c)try{d=c()}catch(j){u=j}const h=o._ctx,m=h.table,g=m.hook.reading.fire;this._ctx={table:m,index:h.index,isPrimKey:!h.index||m.schema.primKey.keyPath&&h.index===m.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:h.or,valueMapper:g!==Ii?g:null}})),this.Table=function(o){return Ia(_N.prototype,function(c,d,u){this.db=o,this._tx=u,this.name=c,this.schema=d,this.hook=o._allTables[c]?o._allTables[c].hook:si(null,{creating:[hN,ye],reading:[fN,Ii],updating:[gN,ye],deleting:[pN,ye]})})}(this),this.Transaction=function(o){return Ia(IN.prototype,function(c,d,u,h,m){this.db=o,this.mode=c,this.storeNames=d,this.schema=u,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=si(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Q((g,j)=>{this._resolve=g,this._reject=j}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var j=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):j&&this.idbtrans&&this.idbtrans.abort(),qe(g)})})}(this),this.Version=function(o){return Ia(RN.prototype,function(c){this.db=o,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(o){return Ia(A0.prototype,function(c,d,u){this.db=o,this._ctx={table:c,index:d===":id"?null:d,or:u};const h=o._deps.indexedDB;if(!h)throw new ne.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(m,g)=>h.cmp(g,m),this._max=(m,g)=>h.cmp(m,g)>0?m:g,this._min=(m,g)=>h.cmp(m,g)<0?m:g,this._IDBKeyRange=o._deps.IDBKeyRange})}(this),this.on("versionchange",o=>{o.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",o=>{!o.newVersion||o.newVersion<o.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${o.oldVersion/10}`)}),this._maxKey=Li(n.IDBKeyRange),this._createTransaction=(o,c,d,u)=>new this.Transaction(o,c,d,this._options.chromeTransactionDurability,u),this._fireOnBlocked=o=>{this.on("blocked").fire(o),ni.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(o))},this.use(BN),this.use(VN),this.use(HN),this.use(UN),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(o=>o(this))}version(t){if(isNaN(t)||t<.1)throw new ne.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var s=n.filter(r=>r._cfg.version===t)[0];return s||(s=new this.Version(t),n.push(s),n.sort(ON),s.stores({}),this._state.autoSchema=!1,s)}_whenReady(t){return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?t():new Q((n,s)=>{if(this._state.openComplete)return s(new ne.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void s(new ne.DatabaseClosed);this.open().catch(ye)}this._state.dbReadyPromise.then(n,s)}).then(t)}use({stack:t,create:n,level:s,name:r}){r&&this.unuse({stack:t,name:r});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:s??10,name:r}),i.sort((l,o)=>l.level-o.level),this}unuse({stack:t,name:n,create:s}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(r=>s?r.create!==s:!!n&&r.name!==n)),this}open(){return $N(this)}_close(){const t=this._state,n=ni.indexOf(this);if(n>=0&&ni.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new Q(s=>{t.dbReadyResolve=s}),t.openCanceller=new Q((s,r)=>{t.cancelOpen=r})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new ne.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new Q((s,r)=>{const i=()=>{this.close();var l=this._deps.indexedDB.deleteDatabase(this.name);l.onsuccess=_e(()=>{(function({indexedDB:o,IDBKeyRange:c},d){!wf(o)&&d!==Sc&&vf(o,c).delete(d).catch(ye)})(this._deps,this.name),s()}),l.onerror=hn(r),l.onblocked=this._fireOnBlocked};if(t)throw new ne.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Fe(this._allTables).map(t=>this._allTables[t])}transaction(){const t=FN.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,s){let r=X.trans;r&&r.db===this&&t.indexOf("!")===-1||(r=null);const i=t.indexOf("?")!==-1;let l,o;t=t.replace("!","").replace("?","");try{if(o=n.map(d=>{var u=d instanceof this.Table?d.name:d;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),t=="r"||t===pd)l=pd;else{if(t!="rw"&&t!=gd)throw new ne.InvalidArgument("Invalid transaction mode: "+t);l=gd}if(r){if(r.mode===pd&&l===gd){if(!i)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(d=>{if(r&&r.storeNames.indexOf(d)===-1){if(!i)throw new ne.SubTransaction("Table "+d+" not included in parent transaction.");r=null}}),i&&r&&!r.active&&(r=null)}}catch(d){return r?r._promise(null,(u,h)=>{h(d)}):qe(d)}const c=T0.bind(null,this,l,o,r,s);return r?r._promise(l,c,"lock"):X.trans?wa(X.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!Lt(this._allTables,t))throw new ne.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const qN=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class KN{constructor(t){this._subscribe=t}subscribe(t,n,s){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:s})}[qN](){return this}}function L0(e,t){return Fe(t).forEach(n=>{Uo(e[n]||(e[n]=new Tn),t[n])}),e}function _c(e){let t,n=!1;const s=new KN(r=>{const i=mf(e);let l=!1,o={},c={};const d={get closed(){return l},unsubscribe:()=>{l=!0,Ds.storagemutated.unsubscribe(g)}};r.start&&r.start(d);let u=!1,h=!1;function m(){return Fe(c).some(v=>o[v]&&zN(o[v],c[v]))}const g=v=>{L0(o,v),m()&&j()},j=()=>{if(u||l)return;o={};const v={},w=function(p){i&&va();const f=()=>Ps(e,{subscr:p,trans:null}),y=X.trans?wa(X.transless,f):f();return i&&y.then(Kn,Kn),y}(v);h||(Ds(Oi,g),h=!0),u=!0,Promise.resolve(w).then(p=>{n=!0,t=p,u=!1,l||(m()?j():(o={},c=v,r.next&&r.next(p)))},p=>{u=!1,n=!1,r.error&&r.error(p),d.unsubscribe()})};return j(),d});return s.hasValue=()=>n,s.getValue=()=>t,s}let tm;try{tm={indexedDB:Ne.indexedDB||Ne.mozIndexedDB||Ne.webkitIndexedDB||Ne.msIndexedDB,IDBKeyRange:Ne.IDBKeyRange||Ne.webkitIDBKeyRange}}catch{tm={indexedDB:null,IDBKeyRange:null}}const Us=Dt;function lo(e){let t=Mn;try{Mn=!0,Ds.storagemutated.fire(e)}finally{Mn=t}}la(Us,{...to,delete:e=>new Us(e,{addons:[]}).delete(),exists:e=>new Us(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return wf(t)?Promise.resolve(t.databases()).then(s=>s.map(r=>r.name).filter(r=>r!==Sc)):vf(t,n).toCollection().primaryKeys()}(Us.dependencies).then(e)}catch{return qe(new ne.MissingAPI)}},defineClass:()=>function(e){ht(this,e)},ignoreTransaction:e=>X.trans?wa(X.transless,e):e(),vip:Yu,async:function(e){return function(){try{var t=Xu(e.apply(this,arguments));return t&&typeof t.then=="function"?t:Q.resolve(t)}catch(n){return qe(n)}}},spawn:function(e,t,n){try{var s=Xu(e.apply(n,t||[]));return s&&typeof s.then=="function"?s:Q.resolve(s)}catch(r){return qe(r)}},currentTransaction:{get:()=>X.trans||null},waitFor:function(e,t){const n=Q.resolve(typeof e=="function"?Us.ignoreTransaction(e):e).timeout(t||6e4);return X.trans?X.trans.waitFor(n):n},Promise:Q,debug:{get:()=>_n,set:e=>{m0(e,e==="dexie"?()=>!0:_0)}},derive:Wr,extend:ht,props:la,override:i0,Events:si,on:Ds,liveQuery:_c,extendObservabilitySet:L0,getByKeyPath:Bn,setByKeyPath:rn,delByKeyPath:function(e,t){typeof t=="string"?rn(e,t,void 0):"length"in t&&[].map.call(t,function(n){rn(e,n,void 0)})},shallowClone:c0,deepClone:il,getObjectDiff:bf,cmp:mt,asap:l0,minKey:Hu,addons:[],connections:ni,errnames:hf,dependencies:tm,semVer:wp,version:wp.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Us.maxKey=Li(Us.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ds(Oi,e=>{if(!Mn){let t;kc?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ds,!0,!0,e)):t=new CustomEvent(ds,{detail:e}),Mn=!0,dispatchEvent(t),Mn=!1}}),addEventListener(ds,({detail:e})=>{Mn||lo(e)}));let Mn=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(ds);typeof e.unref=="function"&&e.unref(),Ds(Oi,t=>{Mn||e.postMessage(t)}),e.onmessage=t=>{t.data&&lo(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ds(Oi,t=>{try{Mn||(typeof localStorage<"u"&&localStorage.setItem(ds,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:ds,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===ds){const n=JSON.parse(t.newValue);n&&lo(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===ds&&lo(t.changedParts)})}Q.rejectionMapper=function(e,t){if(!e||e instanceof Qr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!gp[e.name])return e;var n=new gp[e.name](t||e.message,e);return"stack"in e&&Fn(n,"stack",{get:function(){return this.inner.stack}}),n},m0(_n,_0);function oo(e){const t=new Error(e);return t.source="ulid",t}const Nf="0123456789ABCDEFGHJKMNPQRSTVWXYZ",ai=Nf.length,Cp=Math.pow(2,48)-1,WN=10,QN=16;function ZN(e){let t=Math.floor(e()*ai);return t===ai&&(t=ai-1),Nf.charAt(t)}function GN(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>Cp)throw oo("cannot encode time greater than "+Cp);if(e<0)throw oo("time must be positive");if(Number.isInteger(Number(e))===!1)throw oo("time must be an integer");let n,s="";for(;t>0;t--)n=e%ai,s=Nf.charAt(n)+s,e=(e-n)/ai;return s}function JN(e,t){let n="";for(;e>0;e--)n=ZN(t)+n;return n}function YN(e=!1,t){t||(t=typeof window<"u"?window:null);const n=t&&(t.crypto||t.msCrypto);if(n)return()=>{const s=new Uint8Array(1);return n.getRandomValues(s),s[0]/255};try{const s=require("crypto");return()=>s.randomBytes(1).readUInt8()/255}catch{}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return()=>Math.random()}throw oo("secure crypto unusable, insecure Math.random not allowed")}function XN(e){return e||(e=YN()),function(n){return isNaN(n)&&(n=Date.now()),GN(n,WN)+JN(QN,e)}}const Ec=XN(),Da="X",e2="0";function t2(e){const t=String(e||"").toUpperCase();if(!t)return"";let n="",s=0;const r=c(1),i=c(0),l=c(-1);for(;!jd(i());){if(!i())return"";s++}switch(i()){case"A":r()==="E"?(n+="E",s+=2):(n+="A",s++);break;case"G":case"K":case"P":r()==="N"&&(n+="N",s+=2);break;case"W":r()==="R"?(n+=r(),s+=2):r()==="H"?(n+=i(),s+=2):Fl(r())&&(n+="W",s+=2);break;case"X":n+="S",s++;break;case"E":case"I":case"O":case"U":n+=i(),s++;break}for(;i();){let d=1;if(!jd(i())||i()===l()&&i()!=="C"){s+=d;continue}switch(i()){case"B":l()!=="M"&&(n+="B");break;case"C":bd(r())?r()==="I"&&o(2)==="A"?n+=Da:l()!=="S"&&(n+="S"):r()==="H"?(n+=Da,d++):n+="K";break;case"D":r()==="G"&&bd(o(2))?(n+="J",d++):n+="T";break;case"G":r()==="H"?n2(o(-3))||o(-4)==="H"||(n+="F",d++):r()==="N"?!jd(o(2))||o(2)==="E"&&o(3)==="D"||(n+="K"):bd(r())&&l()!=="G"?n+="J":n+="K";break;case"H":Fl(r())&&!s2(l())&&(n+="H");break;case"K":l()!=="C"&&(n+="K");break;case"P":n+=r()==="H"?"F":"P";break;case"Q":n+="K";break;case"S":r()==="I"&&(o(2)==="O"||o(2)==="A")?n+=Da:r()==="H"?(n+=Da,d++):n+="S";break;case"T":r()==="I"&&(o(2)==="O"||o(2)==="A")?n+=Da:r()==="H"?(n+=e2,d++):r()==="C"&&o(2)==="H"||(n+="T");break;case"V":n+="F";break;case"W":Fl(r())&&(n+="W");break;case"X":n+="KS";break;case"Y":Fl(r())&&(n+="Y");break;case"Z":n+="S";break;case"F":case"J":case"L":case"M":case"N":case"R":n+=i();break}s+=d}return n;function o(d){return t.charAt(s+d)}function c(d){return function(){return o(d)}}}function n2(e){return e==="B"||e==="D"||e==="H"}function bd(e){return e==="E"||e==="I"||e==="Y"}function Fl(e){return e==="A"||e==="E"||e==="I"||e==="O"||e==="U"}function s2(e){return e==="C"||e==="G"||e==="P"||e==="S"||e==="T"}function jd(e){const t=e.codePointAt(0);return t!==void 0&&t>=65&&t<=90}const Ap=Object.freeze(Object.defineProperty({__proto__:null,metaphone:t2},Symbol.toStringTag,{value:"Module"})),Vn=e=>Math.floor(e.getTime()/864e5),R0=e=>e.replace(/\D/g,""),M0=(e,t)=>`${Ap(e||"")}-${Ap(t||"")}`,r2="mbhr_v5";class a2 extends Dt{constructor(){super(r2),this.version(1).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt",vitals:"id, patientId, visitId, takenAt, systolic, diastolic",consultations:"id, patientId, visitId, createdAt, providerName",dispenses:"id, patientId, visitId, dispensedAt, itemName",inventory:"id, itemName, updatedAt, onHandQty",visits:"id, patientId, startedAt, status, siteName",queue:"id, patientId, stage, position, status, updatedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key"}),this.version(2).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt, _dirty, _syncedAt",vitals:"id, patientId, visitId, takenAt, systolic, diastolic, _dirty, _syncedAt",consultations:"id, patientId, visitId, createdAt, providerName, _dirty, _syncedAt",dispenses:"id, patientId, visitId, dispensedAt, itemName, _dirty, _syncedAt",inventory:"id, itemName, updatedAt, onHandQty, _dirty, _syncedAt",visits:"id, patientId, startedAt, status, siteName, _dirty, _syncedAt",queue:"id, patientId, stage, position, status, updatedAt, _dirty, _syncedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key"}),this.version(3).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt, _dirty, _syncedAt",vitals:"id, patientId, visitId, takenAt, systolic, diastolic, _dirty, _syncedAt",consultations:"id, patientId, visitId, createdAt, providerName, _dirty, _syncedAt",dispenses:"id, patientId, visitId, dispensedAt, itemName, _dirty, _syncedAt",inventory:"id, itemName, updatedAt, onHandQty, _dirty, _syncedAt",visits:"id, patientId, startedAt, status, siteName, _dirty, _syncedAt",queue:"id, patientId, stage, position, status, updatedAt, _dirty, _syncedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, pinSalt, isActive, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key"}).upgrade(async t=>{await t.table("users").toCollection().modify(n=>{typeof n.isActive>"u"&&(n.isActive=1)})}),this.version(4).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt, _dirty, _syncedAt",vitals:"id, patientId, visitId, takenAt, systolic, diastolic, _dirty, _syncedAt",consultations:"id, patientId, visitId, createdAt, providerName, _dirty, _syncedAt",dispenses:"id, patientId, visitId, dispensedAt, itemName, _dirty, _syncedAt",inventory:"id, itemName, updatedAt, onHandQty, _dirty, _syncedAt",visits:"id, patientId, startedAt, status, siteName, _dirty, _syncedAt",queue:"id, patientId, stage, position, status, updatedAt, _dirty, _syncedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, pinSalt, isActive, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key"}).upgrade(async t=>{await t.table("users").toCollection().modify(n=>{typeof n.isActive=="boolean"&&(n.isActive=n.isActive?1:0)})}),this.version(5).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt, _dirty, _syncedAt",vitals:"id, patientId, visitId, takenAt, systolic, diastolic, _dirty, _syncedAt",consultations:"id, patientId, visitId, createdAt, providerName, _dirty, _syncedAt",dispenses:"id, patientId, visitId, dispensedAt, itemName, _dirty, _syncedAt",inventory:"id, itemName, updatedAt, onHandQty, _dirty, _syncedAt",visits:"id, patientId, startedAt, status, siteName, _dirty, _syncedAt",queue:"id, patientId, stage, position, status, updatedAt, _dirty, _syncedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, pinSalt, isActive, adminAccess, adminPermanent, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key"}).upgrade(async t=>{await t.table("users").toCollection().modify(n=>{typeof n.adminAccess>"u"&&(n.adminAccess=n.role==="admin"),typeof n.adminPermanent>"u"&&(n.adminPermanent=n.fullName==="Kristopher Okobah")})}),this.version(8).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt, _dirty, _syncedAt",vitals:"id, patientId, visitId, takenAt, systolic, diastolic, _dirty, _syncedAt",consultations:"id, patientId, visitId, createdAt, providerName, _dirty, _syncedAt",dispenses:"id, patientId, visitId, dispensedAt, itemName, _dirty, _syncedAt",inventory:"id, itemName, updatedAt, onHandQty, _dirty, _syncedAt",visits:"id, patientId, startedAt, status, siteName, _dirty, _syncedAt",queue:"id, patientId, stage, position, status, updatedAt, _dirty, _syncedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, pinSalt, isActive, adminAccess, adminPermanent, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key",gameSessions:"id, type, volunteerId, startedAt, finishedAt, committed_idx, _dirty, _syncedAt",gamificationWallets:"volunteerId, tokens, level, streakDays, updatedAt, _dirty, _syncedAt",vitalsRanges:"id, sex, metric, ageMin, ageMax, updatedAt",quizQuestions:"id, topic, difficulty, updatedAt",triageSamples:"id, createdAt, createdBy",inventoryDiscrepancies:"id, itemId, createdAt, resolvedAt, _dirty, _syncedAt",outboundMessages:"id, patientId, status, channel, to, createdAt, scheduledFor, _dirty, _syncedAt",messageTemplates:"key, locale, channel",stockBatches:"id, drugId, expiryDate, updatedAt, _dirty, _syncedAt",careTasks:"id, patientId, status, dueDate, createdAt, _dirty, _syncedAt"}).upgrade(async t=>{await t.table("gameSessions").toCollection().modify(s=>{typeof s.committed!="boolean"&&(s.committed=!1),s.createdAt instanceof Date&&(s.createdAt=s.createdAt.toISOString()),s.startedAt instanceof Date&&(s.startedAt=s.startedAt.toISOString()),s.finishedAt instanceof Date&&(s.finishedAt=s.finishedAt.toISOString())})}),this.version(9).stores({patients:"id, familyName, phone, state, lga, createdAt, updatedAt, _dirty, _syncedAt, phoneN, nameKey, dobDay, createdDay, updatedDay, mergeInto",vitals:"id, patientId, visitId, takenAt, systolic, diastolic, _dirty, _syncedAt",consultations:"id, patientId, visitId, createdAt, providerName, _dirty, _syncedAt",dispenses:"id, patientId, visitId, dispensedAt, itemName, _dirty, _syncedAt",inventory:"id, itemName, updatedAt, onHandQty, _dirty, _syncedAt",visits:"id, patientId, startedAt, status, siteName, _dirty, _syncedAt",queue:"id, patientId, stage, position, status, updatedAt, _dirty, _syncedAt",auditLogs:"id, actorRole, entity, entityId, at",users:"id, fullName, role, email, pinHash, pinSalt, isActive, adminAccess, adminPermanent, createdAt, updatedAt",sessions:"id, userId, createdAt, lastSeenAt",settings:"key",gameSessions:"id, type, volunteerId, startedAt, finishedAt, committed_idx, _dirty, _syncedAt",gamificationWallets:"volunteerId, tokens, level, streakDays, updatedAt, _dirty, _syncedAt",vitalsRanges:"id, sex, metric, ageMin, ageMax, updatedAt",quizQuestions:"id, topic, difficulty, updatedAt",triageSamples:"id, createdAt, createdBy",inventoryDiscrepancies:"id, itemId, createdAt, resolvedAt, _dirty, _syncedAt",outboundMessages:"id, patientId, status, channel, to, createdAt, scheduledFor, _dirty, _syncedAt",messageTemplates:"key, locale, channel",stockBatches:"id, drugId, expiryDate, updatedAt, _dirty, _syncedAt",careTasks:"id, patientId, status, dueDate, createdAt, _dirty, _syncedAt",patientMerges:"id, winnerId, loserId, createdDay",dailyCounts:"day, registrations, vitals, consultations, dispenses, visits",conflictResolutions:"id, patientId, conflictType, status, resolvedAt"}).upgrade(async t=>{await t.table("patients").toCollection().modify(n=>{n.phoneN||(n.phoneN=R0(n.phone||"")),n.nameKey||(n.nameKey=M0(n.givenName||"",n.familyName||"")),!n.dobDay&&n.dob&&(n.dobDay=Vn(new Date(n.dob))),!n.createdDay&&n.createdAt&&(n.createdDay=Vn(n.createdAt)),!n.updatedDay&&n.updatedAt&&(n.updatedDay=Vn(n.updatedAt)),n.mergeInto=null})})}}const D=new a2,Be=()=>Ec(),Pp=async e=>{const t=new Date,n=Vn(e.dob),s=R0(e.phone||""),r=M0(e.givenName,e.familyName),i={id:Be(),givenName:e.givenName,familyName:e.familyName,sex:e.sex,dob:e.dob.toISOString().split("T")[0],phone:e.phone||"",address:e.address,state:e.state,lga:e.lga,createdAt:t,updatedAt:t,_dirty:1},l=await D.patients.where("dobDay").equals(n).and(o=>!o.mergeInto&&(s&&o.phoneN===s||o.nameKey===r)).toArray();return{rec:i,candidates:l}},i2=async(e,t,n)=>{await D.transaction("rw",D.patients,D.patientMerges,async()=>{const s=new Date,r=Vn(s);await D.patients.update(t,{mergeInto:e,updatedAt:s,_dirty:1}),await D.patientMerges.add({id:Be(),winnerId:e,loserId:t,mergedBy:n,createdDay:r,reason:"duplicate_resolution"}),await D.patients.update(e,{updatedAt:s,_dirty:1})})},$0=async(e,t)=>{try{const n=await D.dailyCounts.where("day").equals(e).first();if(n)await D.dailyCounts.update(n.day,{[t]:(n[t]||0)+1});else{const s={day:e,registrations:0,vitals:0,consultations:0,dispenses:0,visits:0};s[t]=1,await D.dailyCounts.add(s)}}catch(n){console.warn("Failed to bump daily count:",n)}},Gr=async(e,t,n,s)=>{await D.auditLogs.add({id:Be(),actorRole:e,action:t,entity:n,entityId:s,at:new Date})},l2=1e5,o2=16;async function Cc(e,t){const s=new TextEncoder().encode(e),r=Uint8Array.from(atob(t),o=>o.charCodeAt(0)),i=await crypto.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits"]),l=await crypto.subtle.deriveBits({name:"PBKDF2",salt:r,iterations:l2,hash:"SHA-256"},i,256);return Array.from(new Uint8Array(l)).map(o=>o.toString(16).padStart(2,"0")).join("")}function F0(){const e=crypto.getRandomValues(new Uint8Array(o2));return btoa(String.fromCharCode(...e))}async function c2(e,t,n){return await Cc(e,n)===t}const d2=5,u2=15*60*1e3,De=al()(nN((e,t)=>({currentUser:null,currentSession:null,isAuthenticated:!1,failedAttempts:0,lockoutUntil:null,login:async n=>{const s=t();if(s.checkLockout())return console.log("Account locked out"),!1;if(!/^\d{6}$/.test(n))return console.log("Invalid PIN format:",n),s.incrementFailedAttempts(),!1;try{const r=await D.users.filter(i=>i.isActive).toArray();console.log("[auth] Found users:",r.length),console.log("[auth] User details:",r.map(i=>({id:i.id,fullName:i.fullName,role:i.role,hasPin:!!i.pinHash,hasSalt:!!i.pinSalt})));for(const i of r)if(i.pinHash&&i.pinSalt){console.log("[auth] Checking PIN for user:",i.fullName,i.role);const l=await c2(n,i.pinHash,i.pinSalt);if(console.log("[auth] PIN valid for",i.fullName,":",l),l){const o={id:Be(),userId:i.id,createdAt:new Date,deviceKey:Be(),lastSeenAt:new Date};return await D.sessions.add(o),e({currentUser:i,currentSession:o,isAuthenticated:!0,failedAttempts:0,lockoutUntil:null}),!0}}return console.log("No matching PIN found for:",n),s.incrementFailedAttempts(),!1}catch(r){return console.error("Login error:",r),s.incrementFailedAttempts(),!1}},loginOnline:async(n,s)=>!1,logout:async()=>{const n=t();n.currentSession&&await D.sessions.delete(n.currentSession.id),e({currentUser:null,currentSession:null,isAuthenticated:!1})},setCurrentUser:n=>{e({currentUser:n})},incrementFailedAttempts:()=>{const s=t().failedAttempts+1;let r=null;s>=d2&&(r=Date.now()+u2),e({failedAttempts:s,lockoutUntil:r})},resetFailedAttempts:()=>{e({failedAttempts:0,lockoutUntil:null})},checkLockout:()=>{const n=t();return n.lockoutUntil&&Date.now()<n.lockoutUntil?!0:(n.lockoutUntil&&Date.now()>=n.lockoutUntil&&e({failedAttempts:0,lockoutUntil:null}),!1)}}),{name:"mbhr-auth",partialize:e=>({failedAttempts:e.failedAttempts,lockoutUntil:e.lockoutUntil})}));function m2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const Ua=x.forwardRef(m2);function f2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const Ip=x.forwardRef(f2);function h2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Dp=x.forwardRef(h2);function p2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const bn=x.forwardRef(p2);function g2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const x2=x.forwardRef(g2);function y2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const v2=x.forwardRef(y2);function w2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const qt=x.forwardRef(w2);function b2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const B0=x.forwardRef(b2);function j2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const kf=x.forwardRef(j2);function N2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const V0=x.forwardRef(N2);function k2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Jr=x.forwardRef(k2);function S2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const _2=x.forwardRef(S2);function E2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ss=x.forwardRef(E2);function C2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const ba=x.forwardRef(C2);function A2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const P2=x.forwardRef(A2);function I2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const D2=x.forwardRef(I2);function T2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const O2=x.forwardRef(T2);function L2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Tp=x.forwardRef(L2);function R2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const jn=x.forwardRef(R2);function M2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Mi=x.forwardRef(M2);function $2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const Op=x.forwardRef($2);function F2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Vs=x.forwardRef(F2);function B2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Ge=x.forwardRef(B2);function V2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const U2=x.forwardRef(V2);function z2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const U0=x.forwardRef(z2);function H2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Sf=x.forwardRef(H2);function q2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const nm=x.forwardRef(q2);function K2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const Nn=x.forwardRef(K2);function W2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Q2=x.forwardRef(W2);function Z2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const Lp=x.forwardRef(Z2);function G2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"}))}const J2=x.forwardRef(G2);function Y2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const zo=x.forwardRef(Y2);function X2({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Ac=x.forwardRef(X2);function ek({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const tk=x.forwardRef(ek);function nk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const sk=x.forwardRef(nk);function rk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const z0=x.forwardRef(rk);function ak({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Pc=x.forwardRef(ak);function ik({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const dr=x.forwardRef(ik);function lk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const $i=x.forwardRef(lk);function ok({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"}))}const cl=x.forwardRef(ok);function ck({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3 3 8.735 8.735m0 0a.374.374 0 1 1 .53.53m-.53-.53.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 0 1 0 5.304m2.121-7.425a6.75 6.75 0 0 1 0 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 0 1-1.06-2.122m-1.061 4.243a6.75 6.75 0 0 1-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12Z"}))}const Rp=x.forwardRef(ck);function dk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const Ic=x.forwardRef(dk);function uk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Ho=x.forwardRef(uk);function mk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const H0=x.forwardRef(mk);function fk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const q0=x.forwardRef(fk);function hk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Wn=x.forwardRef(hk);function pk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const dl=x.forwardRef(pk);function gk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const qo=x.forwardRef(gk);function xk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Qn=x.forwardRef(xk);function yk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const oa=x.forwardRef(yk);function vk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const wk=x.forwardRef(vk);function bk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const K0=x.forwardRef(bk);function jk({title:e,titleId:t,...n},s){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?x.createElement("title",{id:t},e):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _f=x.forwardRef(jk);function Nk(){return!1}const kk={app_users:{id:"id",fullName:"full_name",role:"role",adminAccess:"admin_access",adminPermanent:"admin_permanent",createdAt:"created_at",updatedAt:"updated_at"},patients:{id:"id",givenName:"given_name",familyName:"family_name",sex:"sex",dob:"dob",phone:"phone",address:"address",state:"state",lga:"lga",photoUrl:"photo_url",familyId:"family_id",createdAt:"created_at",updatedAt:"updated_at"},visits:{id:"id",patientId:"patient_id",startedAt:"started_at",siteName:"site_name",status:"status",updatedAt:"updated_at"},vitals:{id:"id",patientId:"patient_id",visitId:"visit_id",heightCm:"height_cm",weightKg:"weight_kg",tempC:"temp_c",pulseBpm:"pulse_bpm",systolic:"systolic",diastolic:"diastolic",spo2:"spo2",bmi:"bmi",flags:"flags",takenAt:"taken_at",updatedAt:"updated_at"},consultations:{id:"id",patientId:"patient_id",visitId:"visit_id",providerName:"provider_name",soapSubjective:"soap_subjective",soapObjective:"soap_objective",soapAssessment:"soap_assessment",soapPlan:"soap_plan",provisionalDx:"provisional_dx",createdAt:"created_at",updatedAt:"updated_at"},dispenses:{id:"id",patientId:"patient_id",visitId:"visit_id",itemName:"item_name",qty:"qty",dosage:"dosage",directions:"directions",dispensedBy:"dispensed_by",dispensedAt:"dispensed_at",updatedAt:"updated_at"},inventory:{id:"id",itemName:"item_name",unit:"unit",onHandQty:"on_hand_qty",reorderThreshold:"reorder_threshold",updatedAt:"updated_at"},queue:{id:"id",patientId:"patient_id",stage:"stage",position:"position",status:"status",updatedAt:"updated_at"}};Object.fromEntries(Object.entries(kk).map(([e,t])=>[e,Object.fromEntries(Object.entries(t).map(([n,s])=>[s,n]))]));function Sk(){return!1}function _k(){const[e,t]=x.useState(navigator.onLine),[n,s]=x.useState(!1);x.useEffect(()=>{const c=()=>t(!0),d=()=>t(!1);return window.addEventListener("online",c),window.addEventListener("offline",d),s(Sk()),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}},[]);const r=()=>e?n?{icon:wk,text:"Online",className:"bg-blue-100 text-blue-800 border-blue-200"}:{icon:Rp,text:"Local Only",className:"bg-yellow-100 text-yellow-800 border-yellow-200"}:{icon:Rp,text:"Offline",className:"bg-red-100 text-red-800 border-red-200"},{icon:i,text:l,className:o}=r();return a.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium border ${o}`,children:[a.jsx(i,{className:"h-3 w-3"}),a.jsx("span",{children:l})]})}const sm=al((e,t)=>({items:[],push:n=>{e(s=>({items:[...s.items,n]})),setTimeout(()=>t().remove(n.id),6e3)},remove:n=>e(s=>({items:s.items.filter(r=>r.id!==n)}))}));function Ek(){const e=sm(n=>n.items),t=sm(n=>n.remove);return a.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:e.map(n=>a.jsx("div",{className:"rounded-xl bg-white shadow-lg border p-3 w-80",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium",children:n.title}),n.body&&a.jsx("div",{className:"text-sm opacity-70",children:n.body})]}),a.jsx("button",{onClick:()=>t(n.id),className:"ml-2 text-gray-400 hover:text-gray-600",children:""})]})},n.id))})}class Ck extends Dt{constructor(){super("mbhr"),this.version(1).stores({tickets:"id, number, currentStage, state, createdAt",inventory_nm:"id, itemName, updatedAt, reorderThreshold",pharmacy_items:"id, medName, updatedAt",pharmacy_batches:"id, itemId, expiryDate",gamification:"id, volunteerId, updatedAt",queue_metrics:"id, stage, updatedAt",daily_counters:"id, siteId, dateStr, category",stock_moves_nm:"id, itemId, createdAt",stock_moves_rx:"id, itemId, batchId, createdAt",prescriptions:"id, patientId, status, createdAt",dispenses:"id, prescriptionId, patientId, dispensedAt"})}}const V=new Ck,nt=()=>Ec();function Ak(){const e=sm(n=>n.push),t=x.useRef(new Map);x.useEffect(()=>{const n=_c(()=>V.inventory_nm.toArray()).subscribe(s=>{const r=Date.now();s.forEach(i=>{if(i.onHandQty<=i.reorderThreshold){const l=t.current.get(i.id)??0;r-l>36e5&&(t.current.set(i.id,r),e({id:nt(),title:`Low stock: ${i.itemName}`,body:`On hand ${i.onHandQty}  threshold ${i.reorderThreshold}`,type:"warning"}))}})});return()=>n.unsubscribe()},[e])}const Pk=(e,t,n)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((r,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})};function Ef(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Ik(e,t){let n;const s=()=>{if(n)return n;const r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),n=Ef(r),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(r,i)=>s().then(l=>i(l.transaction(t,r).objectStore(t)))}let Nd;function W0(){return Nd||(Nd=Ik("keyval-store","keyval")),Nd}function Dk(e,t=W0()){return t("readonly",n=>Ef(n.get(e)))}function Tk(e,t,n=W0()){return n("readwrite",s=>(s.put(t,e),Ef(s.transaction)))}const Q0={en:{code:"en",name:"English",nativeName:"English",textPack:{},audioPack:[],rtl:!1,fallback:"en"},ha:{code:"ha",name:"Hausa",nativeName:"Hausa",textPack:{},audioPack:[],rtl:!1,fallback:"en"},yo:{code:"yo",name:"Yoruba",nativeName:"Yorb",textPack:{},audioPack:[],rtl:!1,fallback:"en"},ig:{code:"ig",name:"Igbo",nativeName:"Igbo",textPack:{},audioPack:[],rtl:!1,fallback:"en"},pcm:{code:"pcm",name:"Nigerian Pidgin",nativeName:"Naija",textPack:{},audioPack:[],rtl:!1,fallback:"en"}},Mp=e=>`locale:${e}`;async function Z0(e){try{const t=await Dk(Mp(e));if(t)return console.log(` Loaded ${e} from cache`),t;const s=(await Pk(Object.assign({"./locales/en.json":()=>Ut(()=>import("./en-Db9_SN7g.js"),[]),"./locales/ha.json":()=>Ut(()=>import("./ha-CTZlL5vq.js"),[]),"./locales/ig.json":()=>Ut(()=>import("./ig-BbZud7eF.js"),[]),"./locales/pcm.json":()=>Ut(()=>import("./pcm-BGw_DkEO.js"),[]),"./locales/yo.json":()=>Ut(()=>import("./yo-DVCBe3Jy.js"),[])}),`./locales/${e}.json`,3)).default;return await Tk(Mp(e),s),console.log(` Loaded and cached ${e}`),s}catch(t){return console.warn(`Failed to load locale ${e}, falling back to English:`,t),e!=="en"?Z0("en"):{}}}function Ok(){return Object.values(Q0)}function Lk(){const e=localStorage.getItem("mbhr-locale");if(e&&Q0[e])return e;const t=navigator.language.toLowerCase();return t.startsWith("ha")?"ha":t.startsWith("yo")?"yo":t.startsWith("ig")?"ig":"en"}function Rk(e){localStorage.setItem("mbhr-locale",e)}let Ft={locale:"en",pack:{},loading:!0,error:null};const rm=new Set;function kd(){rm.forEach(e=>e())}async function G0(e){try{Ft.loading=!0,Ft.error=null,kd();const t=await Z0(e);Ft={locale:e,pack:t,loading:!1,error:null},Rk(e),kd()}catch(t){Ft.loading=!1,Ft.error=t instanceof Error?t.message:"Failed to load locale",kd()}}G0(Lk());function ja(){const[,e]=x.useState({});x.useEffect(()=>{const r=()=>e({});return rm.add(r),()=>rm.delete(r)},[]);const t=(r,i)=>{const l=Ft.pack[r];return l||i||r.split(".").pop()||r};return{t,speak:async r=>{try{const i=`/audio/${Ft.locale}/${r.replace(".","_")}.mp3`,l=new Audio(i);l.onerror=()=>{if("speechSynthesis"in window){const o=new SpeechSynthesisUtterance(t(r));o.lang=$p(Ft.locale),speechSynthesis.speak(o)}},await l.play()}catch(i){if(console.warn("Audio playback failed:",i),"speechSynthesis"in window){const l=new SpeechSynthesisUtterance(t(r));l.lang=$p(Ft.locale),speechSynthesis.speak(l)}}},changeLocale:r=>{G0(r)},locale:Ft.locale,loading:Ft.loading,error:Ft.error}}function $p(e){return{en:"en-US",ha:"ha-NG",yo:"yo-NG",ig:"ig-NG",pcm:"en-NG"}[e]||"en-US"}function Mk({className:e="",showAudioPreview:t=!0}){const{speak:n,changeLocale:s,locale:r,loading:i}=ja(),[l,o]=x.useState(!1),[c,d]=x.useState(null),u=Ok(),h=u.find(j=>j.code===r),m=j=>{s(j),o(!1)},g=async j=>{d(j);try{await n("auth.welcome")}catch(v){console.warn("Audio preview failed:",v)}finally{d(null)}};return a.jsxs("div",{className:`relative ${e}`,children:[a.jsxs("button",{onClick:()=>o(!l),className:"flex items-center space-x-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:i,children:[a.jsx(J2,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:(h==null?void 0:h.nativeName)||"English"}),a.jsx(P2,{className:`h-4 w-4 text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&a.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider px-3 py-2",children:"Select Language"}),u.map(j=>a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-gray-50 rounded-lg cursor-pointer group",onClick:()=>m(j.code),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:j.nativeName}),j.code!=="en"&&a.jsxs("span",{className:"text-xs text-gray-500",children:["(",j.name,")"]})]}),r===j.code&&a.jsx(ba,{className:"h-4 w-4 text-primary"})]}),t&&a.jsx("button",{onClick:v=>{v.stopPropagation(),g(j.code)},className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-gray-100 transition-all",disabled:c===j.code,children:a.jsx(Ic,{className:`h-4 w-4 text-gray-600 ${c===j.code?"animate-pulse":""}`})})]},j.code))]}),a.jsx("div",{className:"border-t border-gray-100 p-3",children:a.jsx("p",{className:"text-xs text-gray-500",children:" Audio support available for key phrases"})})]})]})}const Fp={fontSize:"normal",contrast:"normal",reducedMotion:!1,audioEnabled:!0,largeTargets:!1};function $k(){const[e,t]=x.useState(!1),[n,s]=x.useState(Fp);x.useEffect(()=>{const l=localStorage.getItem("mbhr-accessibility");if(l)try{s({...Fp,...JSON.parse(l)})}catch(o){console.warn("Failed to load accessibility settings:",o)}},[]),x.useEffect(()=>{r(n),localStorage.setItem("mbhr-accessibility",JSON.stringify(n))},[n]);const r=l=>{const o=document.documentElement;switch(o.classList.remove("text-sm","text-base","text-lg","text-xl"),l.fontSize){case"small":o.classList.add("text-sm");break;case"large":o.classList.add("text-lg");break;case"xlarge":o.classList.add("text-xl");break;default:o.classList.add("text-base")}l.contrast==="high"?o.classList.add("high-contrast"):o.classList.remove("high-contrast"),l.reducedMotion?o.classList.add("reduce-motion"):o.classList.remove("reduce-motion"),l.largeTargets?o.classList.add("large-targets"):o.classList.remove("large-targets")},i=(l,o)=>{s(c=>({...c,[l]:o}))};return a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",title:"Accessibility Settings","aria-label":"Open accessibility settings",children:a.jsx(Ip,{className:"h-5 w-5 text-gray-600"})}),e&&a.jsx("div",{className:"absolute top-full right-0 mt-1 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[a.jsx(Ip,{className:"h-5 w-5"}),a.jsx("span",{children:"Accessibility"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Size"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:["small","normal","large","xlarge"].map(l=>a.jsx("button",{onClick:()=>i("fontSize",l),className:`px-3 py-2 text-xs rounded-lg border transition-colors ${n.fontSize===l?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:l==="xlarge"?"XL":l.charAt(0).toUpperCase()+l.slice(1)},l))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(U0,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Contrast"})]}),a.jsx("button",{onClick:()=>i("contrast",n.contrast==="high"?"normal":"high"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.contrast==="high"?"bg-primary":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.contrast==="high"?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Op,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Reduce Motion"})]}),a.jsx("button",{onClick:()=>i("reducedMotion",!n.reducedMotion),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.reducedMotion?"bg-primary":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.reducedMotion?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ic,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Audio Prompts"})]}),a.jsx("button",{onClick:()=>i("audioEnabled",!n.audioEnabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.audioEnabled?"bg-primary":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.audioEnabled?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Op,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Large Buttons"})]}),a.jsx("button",{onClick:()=>i("largeTargets",!n.largeTargets),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n.largeTargets?"bg-primary":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n.largeTargets?"translate-x-6":"translate-x-1"}`})})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Settings are saved locally and apply across all pages"})})]})})]})}const Fk={volunteer:{register:!0,vitals:!0,consult:!1,dispense:!1,inventory:!1,export:!1,users:!1},nurse:{register:!0,vitals:!0,consult:!1,dispense:!1,inventory:!1,export:!1,users:!1},doctor:{register:!0,vitals:!0,consult:!0,dispense:!1,inventory:!1,export:!1,users:!1},pharmacist:{register:!1,vitals:!1,consult:!1,dispense:!0,inventory:!0,export:!1,users:!1},admin:{register:!0,vitals:!0,consult:!0,dispense:!0,inventory:!0,export:!0,users:!0}};function dn(e,t){var n;return((n=Fk[e])==null?void 0:n[t])??!1}function Bk(e){switch(e){case"admin":return"bg-purple-100 text-purple-800";case"doctor":return"bg-blue-100 text-blue-800";case"nurse":return"bg-green-100 text-green-800";case"pharmacist":return"bg-orange-100 text-orange-800";case"volunteer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function Vk(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Uk({onClose:e}){Se.useEffect(()=>{const n=s=>s.key==="Escape"&&e();return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e]);const t=[{to:"/rx/dispense",title:"Dispense",desc:"Record prescriptions & counsel patients",Icon:qt},{to:"/rx/stock",title:"Inventory",desc:"Stock counts, restock & FEFO tracking",Icon:Mi},{to:"/rx/new",title:"New Stock",desc:"Receive deliveries / add new items",Icon:Tp},{to:"/pharmacy/reports",title:"Reports",desc:"Daily summary & controlled log",Icon:Tp}];return a.jsxs("main",{className:"p-4 sm:p-6 max-w-5xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900 focus:outline-none focus:ring",children:[a.jsx(bn,{className:"h-4 w-4","aria-hidden":!0}),"Back to Dashboard"]}),a.jsx("button",{onClick:e,"aria-label":"Close pharmacy menu",className:"rounded-full p-2 hover:bg-gray-100 focus:outline-none focus:ring",children:a.jsx(_f,{className:"h-5 w-5"})})]}),a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Pharmacy"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Choose what you'd like to do."}),a.jsx("section",{"aria-label":"Pharmacy options",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(({to:n,title:s,desc:r,Icon:i})=>a.jsxs(As,{to:n,onClick:e,className:"group rounded-2xl border border-gray-200 p-5 hover:shadow-md focus:outline-none focus:ring focus:ring-primary/30",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"rounded-xl bg-gray-100 p-3",children:a.jsx(i,{className:"h-6 w-6","aria-hidden":!0})}),a.jsx("h2",{className:"text-lg font-semibold",children:s})]}),a.jsx("p",{className:"mt-3 text-sm text-gray-600",children:r}),a.jsxs("span",{className:"sr-only",children:["Open ",s]})]},n))})]})}function zk({children:e}){const{t}=Yn(),n=ya(),{currentUser:s,logout:r}=De(),[i,l]=Se.useState(null);Ak();const c=[...[{name:t("nav.dashboard"),href:"/",icon:Q2},{name:t("nav.patients"),href:"/patients",icon:dl},{name:t("nav.queue"),href:"/queue",icon:cl},{name:t("nav.inventory"),href:"/inventory",icon:Mi},{name:"Pharmacy",href:"/pharmacy",icon:qt},{name:"Game Hub",href:"/games",icon:Wn},{name:"Analytics",href:"/analytics",icon:Jr},{name:"Issue Tickets",href:"/tickets/issue",icon:H0},{name:"Restock Game",href:"/inv/game",icon:nm}],...s&&dn(s.role,"users")?[{name:"User Management",href:"/users",icon:oa},{name:"Approve Games",href:"/admin/approvals",icon:Ss}]:[]],d=async()=>{await r()};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-primary text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-shadow",children:t("app.title")}),a.jsx("p",{className:"text-sm opacity-90",children:t("app.subtitle")})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(_k,{}),a.jsx(Mk,{}),a.jsx($k,{}),s&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium",children:s.fullName}),a.jsx("p",{className:"text-xs opacity-75 capitalize",children:s.role})]}),a.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-primary/80 transition-colors touch-target",title:t("auth.logout"),children:a.jsx(x2,{className:"h-5 w-5"})})]})]})]})})}),a.jsxs("div",{className:"flex",children:[a.jsx("nav",{className:"w-64 bg-white shadow-sm min-h-screen",children:a.jsx("div",{className:"p-4",children:a.jsx("ul",{className:"space-y-2",children:c.map(u=>{const h=u.name==="Pharmacy",m=h?(n.pathname.startsWith("/rx/")||n.pathname==="/pharmacy"||n.pathname.startsWith("/pharmacy/"))&&i!==null:n.pathname===u.href,g=a.jsxs(a.Fragment,{children:[a.jsx(u.icon,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:u.name})]});return a.jsx("li",{children:h?a.jsx("button",{type:"button",onClick:()=>l("pharmacy"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors touch-target text-left ${m?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,"aria-haspopup":"dialog","aria-controls":"pharmacy-menu",children:g}):a.jsx(As,{to:u.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors touch-target ${m?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:g})},u.name)})})})}),a.jsx("main",{className:"flex-1",children:i==="pharmacy"?a.jsx("div",{id:"pharmacy-menu",role:"dialog","aria-modal":"true",className:"p-6",children:a.jsx(Uk,{onClose:()=>l(null)})}):a.jsx("div",{className:"p-6",children:e})})]}),a.jsx(Ek,{})]})}function Ke({roles:e,children:t}){const{currentUser:n}=De(),s=n==null?void 0:n.role;return!n||!s||!e.includes(s)?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx(Ge,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Access Restricted"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"You do not have permission to view this page."}),a.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Required roles: ",e.join(", ")]}),a.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Your role: ",s||"none"]})]})})}):a.jsx(a.Fragment,{children:t})}function Hk(){const[e,t]=x.useState("offline"),[n,s]=x.useState(""),[r,i]=x.useState(null),[l,o]=x.useState(0),[c,d]=x.useState(!1),[u,h]=x.useState(!1),m=Nk(),g=cn(),{login:j}=De(),[v,w]=x.useState([]),[p,f]=x.useState(""),y=async()=>{try{d(!0),await D.delete(),localStorage.clear(),sessionStorage.clear(),Object.keys(localStorage).forEach(S=>{(S.includes("mbhr")||S.includes("auth"))&&localStorage.removeItem(S)}),alert("Local data cleared. The app will now reload and reseed."),window.location.reload()}catch(b){console.error("Failed to reset local data:",b),alert("Failed to reset local data. Check console for details.")}finally{d(!1)}};x.useEffect(()=>{u&&(async()=>{try{const b=await D.users.where("isActive").equals(1).toArray();w(b.map(S=>{var k,E;return{name:S.fullName,role:S.role,salt:((k=S.pinSalt)==null?void 0:k.slice(0,10))+"",hash:((E=S.pinHash)==null?void 0:E.slice(0,12))+""}}))}catch(b){console.error("Error loading debug users:",b),w([])}})()},[u,l]),x.useEffect(()=>{n&&v.length>0?(async()=>{try{const b=await D.users.where("isActive").equals(1).first();if(b!=null&&b.pinSalt){const S=await Cc(n,b.pinSalt);f(S.slice(0,12)+"")}else f("")}catch(b){console.error("Error computing hash:",b),f("Error")}})():f("")},[n,v]);const N=async b=>{b.preventDefault(),console.log("[login] form submitted, mode:",e,"pin:",n),i(null),d(!0);try{if(e==="offline"){console.log("[login] attempting offline PIN login");const S=await j(n);console.log("[login] result:",S),S?(console.log("[login] success - navigating to dashboard"),g("/")):(console.log("[login] failed - invalid PIN"),i("Invalid PIN"),o(k=>k+1))}else{if(!m){i("Online login not available");return}i("Online login not implemented yet")}}catch(S){console.error("[login] error:",S),o(k=>k+1),i((S==null?void 0:S.message)||"Login failed")}finally{d(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-white",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-2xl font-semibold",children:"Med Bridge Health Reach"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Powered by Dr. Isioma Okobah Foundation"})]}),a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx("button",{type:"button",className:`flex-1 border rounded p-2 ${e==="offline"?"bg-emerald-50 border-emerald-600":"border-gray-300"}`,onClick:()=>{console.log("[login] switching to offline mode"),t("offline")},children:"Offline PIN"}),a.jsx("button",{type:"button",className:`flex-1 border rounded p-2 ${e==="online"?"bg-emerald-50 border-emerald-600":"border-gray-300"}`,onClick:()=>{console.log("[login] switching to online mode"),t("online")},disabled:!m,title:"Online auth not configured",children:"Online"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-3",children:[e==="offline"&&a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"block text-sm font-medium",children:"PIN"}),a.jsx("input",{"aria-label":"PIN",inputMode:"numeric",pattern:"\\d{6}",maxLength:6,value:n,onChange:b=>{const S=b.target.value.replace(/\D/g,"").slice(0,6);console.log("[login] PIN changed:",S),s(S)},className:"w-full border rounded px-3 py-2",placeholder:"Enter your 6-digit PIN",required:!0}),l>0&&a.jsxs("div",{className:"text-xs text-amber-600",children:["Failed attempts: ",l,"/5"]})]}),e==="online"&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Online login will use Supabase auth when configured. (Set ",a.jsx("code",{children:"VITE_SUPABASE_URL"})," and",a.jsx("code",{children:" VITE_SUPABASE_ANON_KEY"}),".)"]}),r&&a.jsx("div",{className:"text-sm text-red-600",children:r}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-emerald-700 text-white py-2 rounded hover:bg-emerald-800 disabled:opacity-50",children:c?"Logging in...":"Login"}),a.jsxs("div",{className:"flex items-center justify-between text-sm mt-4 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:y,className:"text-red-600 hover:text-red-800 underline",disabled:c,children:"Reset local data"}),a.jsxs("button",{type:"button",onClick:()=>h(b=>!b),className:"text-blue-600 hover:text-blue-800 underline",children:[u?"Hide":"Show"," debug"]})]})]}),u&&a.jsxs("div",{className:"mt-4 rounded-lg border p-3 bg-gray-50 text-sm",children:[a.jsx("div",{className:"font-semibold mb-2",children:"Debug Panel (Offline Mode)"}),a.jsxs("div",{className:"mb-2",children:["Active users: ",v.length]}),v.length>0?a.jsx("div",{className:"space-y-2",children:v.map((b,S)=>a.jsxs("div",{className:"bg-white p-2 rounded border text-xs",children:[a.jsxs("div",{children:[a.jsx("strong",{children:b.name})," (",b.role,")"]}),a.jsxs("div",{children:["Salt: ",a.jsx("code",{children:b.salt})]}),a.jsxs("div",{children:["Hash: ",a.jsx("code",{children:b.hash})]})]},S))}):a.jsx("div",{className:"text-gray-600 italic",children:'No users found. Try "Reset local data".'}),n&&p&&a.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded",children:[a.jsx("div",{className:"text-xs",children:a.jsxs("strong",{children:['Computed hash for PIN "',n,`" (using first user's salt):`]})}),a.jsx("code",{className:"text-xs",children:p})]}),a.jsxs("div",{className:"mt-3 text-xs text-gray-600 border-t pt-2",children:[a.jsx("strong",{children:"Known seed PINs:"}),a.jsx("br",{})," 123456 (Admin User)",a.jsx("br",{})," 234567 (Nurse Joy)",a.jsx("br",{})," 111222 (Doctor Ada)",a.jsx("br",{})," 333444 (Pharmacist Chidi)",a.jsx("br",{})," 555666 (Volunteer Musa)"]})]})]})})}function qk(){const{currentUser:e}=De(),[t,n]=x.useState(null),[s,r]=x.useState(!0),[i,l]=x.useState("today");if(!e||!dn(e.role,"export"))return null;x.useEffect(()=>{o();const v=setInterval(o,6e4);return()=>clearInterval(v)},[]);const o=async()=>{try{const w=Vn(new Date),p=w-1,f=w-6,[y,N,b]=await Promise.all([c(w),c(p),d(f,w)]),S={registrations:u(y.registrations,N.registrations),vitals:u(y.vitals,N.vitals),consultations:u(y.consultations,N.consultations),dispenses:u(y.dispenses,N.dispenses)},k=h(y);n({today:y,yesterday:N,weekTotal:b,trends:S,bottlenecks:k})}catch(v){console.error("Error loading analytics:",v)}finally{r(!1)}},c=async v=>{const w=await D.dailyCounts.where("day").equals(v).first();if(w)return w;const p=new Date(v*864e5),f=new Date((v+1)*864e5),[y,N,b,S,k]=await Promise.all([D.patients.where("createdAt").between(p,f,!0,!1).count(),D.vitals.where("takenAt").between(p,f,!0,!1).count(),D.consultations.where("createdAt").between(p,f,!0,!1).count(),D.dispenses.where("dispensedAt").between(p,f,!0,!1).count(),D.visits.where("startedAt").between(p,f,!0,!1).count()]),E={day:v,registrations:y,vitals:N,consultations:b,dispenses:S,visits:k};return await D.dailyCounts.add(E).catch(()=>{}),E},d=async(v,w)=>(await D.dailyCounts.where("day").between(v,w,!0,!0).toArray()).reduce((f,y)=>({day:w,registrations:f.registrations+y.registrations,vitals:f.vitals+y.vitals,consultations:f.consultations+y.consultations,dispenses:f.dispenses+y.dispenses,visits:f.visits+y.visits}),{day:w,registrations:0,vitals:0,consultations:0,dispenses:0,visits:0}),u=(v,w)=>w===0?v>0?100:0:Math.round((v-w)/w*100),h=v=>{const w=[];return v.registrations>v.vitals*1.5&&w.push("Vitals station may be a bottleneck"),v.vitals>v.consultations*1.5&&w.push("Consultation may be a bottleneck"),v.consultations>v.dispenses*1.5&&w.push("Pharmacy may be a bottleneck"),w},m=v=>{const w=v>0,p=v<0;return{value:Math.abs(v),color:w?"text-green-600":p?"text-red-600":"text-gray-600",icon:w?"":p?"":""}};if(s)return a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Jr,{className:"h-6 w-6 text-primary"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Analytics"})]}),a.jsx("div",{className:"animate-pulse space-y-4",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((v,w)=>a.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},w))})})]});if(!t)return null;const g=i==="today"?t.today:t.weekTotal,j=[{name:"Registrations",value:g.registrations,icon:oa,color:"text-blue-600 bg-blue-50",trend:t.trends.registrations},{name:"Vitals",value:g.vitals,icon:Nn,color:"text-green-600 bg-green-50",trend:t.trends.vitals},{name:"Consultations",value:g.consultations,icon:Vs,color:"text-purple-600 bg-purple-50",trend:t.trends.consultations},{name:"Dispenses",value:g.dispenses,icon:qt,color:"text-orange-600 bg-orange-50",trend:t.trends.dispenses}];return a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Jr,{className:"h-6 w-6 text-primary"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Clinic Analytics"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>l("today"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${i==="today"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Today"}),a.jsx("button",{onClick:()=>l("week"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${i==="week"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"This Week"})]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:j.map(v=>{const w=m(v.trend),p=v.icon;return a.jsxs("div",{className:"p-4 rounded-lg border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${v.color}`,children:a.jsx(p,{className:"h-5 w-5"})}),i==="today"&&a.jsxs("div",{className:`text-xs font-medium ${w.color}`,children:[w.icon," ",w.value,"%"]})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:v.value}),a.jsx("div",{className:"text-sm text-gray-600",children:v.name})]},v.name)})}),t.bottlenecks.length>0&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ge,{className:"h-5 w-5 text-yellow-600"}),a.jsx("h4",{className:"font-medium text-yellow-800",children:"Potential Bottlenecks"})]}),a.jsx("ul",{className:"text-sm text-yellow-700 space-y-1",children:t.bottlenecks.map((v,w)=>a.jsxs("li",{children:[" ",v]},w))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Patient Flow Efficiency"}),a.jsx("div",{className:"text-gray-600",children:t.today.dispenses>0&&t.today.registrations>0?`${Math.round(t.today.dispenses/t.today.registrations*100)}% completion rate`:"No completed flows today"})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Data Freshness"}),a.jsxs("div",{className:"text-gray-600",children:["Updated: ",new Date().toLocaleTimeString()]})]})]})]})}function Kk(e,t,n){var s,r;typeof e=="function"?(s=t||[],r=n):(s=[],r=t);var i=Se.useRef({hasResult:!1,result:r,error:null}),l=Se.useReducer(function(d){return d+1},0);l[0];var o=l[1],c=Se.useMemo(function(){var d=typeof e=="function"?e():e;if(!d||typeof d.subscribe!="function")throw e===d?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof d.hasValue!="function"||d.hasValue()))if(typeof d.getValue=="function")i.current.result=d.getValue(),i.current.hasResult=!0;else{var u=d.subscribe(function(h){i.current.result=h,i.current.hasResult=!0});typeof u=="function"?u():u.unsubscribe()}return d},s);if(Se.useDebugValue(i.current.result),Se.useEffect(function(){var d=c.subscribe(function(u){var h=i.current;(h.error!==null||h.result!==u)&&(h.error=null,h.result=u,h.hasResult=!0,o())},function(u){var h=i.current;h.error!==u&&(h.error=u,o())});return typeof d=="function"?d:d.unsubscribe.bind(d)},s),i.current.error)throw i.current.error;return i.current.result}function _s(e,t,n){return Kk(function(){return _c(e)},t||[],n)}const Bl=["registration","vitals","consult","pharmacy"];function Wk(){var y,N;const[e,t]=x.useState("registration"),[n,s]=x.useState([]),[r,i]=x.useState(null),l=_s(()=>D.queue.orderBy("position").toArray(),[],[]),o=_s(()=>D.patients.toArray(),[],[]),c=new Map(o.map(b=>[b.id,b]));x.useEffect(()=>{d()},[l]);const d=async()=>{const b=[];for(const S of Bl){const k=l.filter(L=>L.stage===S),E=k.filter(L=>L.status==="waiting").length,_=k.filter(L=>L.status==="in_progress").length,I=4,T=E*I;b.push({stage:S,waiting:E,inProgress:_,avgTimeMinutes:I,etaMinutes:T})}s(b)},u=async b=>{try{const S=l.filter(k=>k.stage===b&&k.status==="waiting").sort((k,E)=>k.position-E.position)[0];if(!S)return;await D.queue.update(S.id,{status:"in_progress",updatedAt:new Date})}catch(S){console.error("Error calling next patient:",S)}},h=async(b,S)=>{i(b);try{const k=l.find(E=>E.stage===b&&E.status==="in_progress");if(!k)return;S?await D.queue.update(k.id,{stage:S,status:"waiting",position:await m(S),updatedAt:new Date}):await D.queue.update(k.id,{status:"done",updatedAt:new Date})}catch(k){console.error("Error completing handoff:",k)}finally{i(null)}},m=async b=>{const S=await D.queue.where("stage").equals(b).toArray();return Math.max(0,...S.map(k=>k.position))+1},g=b=>{switch(b){case"registration":return Qn;case"vitals":return Nn;case"consult":return Vs;case"pharmacy":return qt}},j=b=>{switch(b){case"registration":return"bg-blue-50 border-blue-200 text-blue-800";case"vitals":return"bg-green-50 border-green-200 text-green-800";case"consult":return"bg-purple-50 border-purple-200 text-purple-800";case"pharmacy":return"bg-orange-50 border-orange-200 text-orange-800"}},v=b=>{const S=Bl.indexOf(b);return S<Bl.length-1?Bl[S+1]:null},w=n.find(b=>b.stage===e),p=l.find(b=>b.stage===e&&b.status==="in_progress"),f=l.filter(b=>b.stage===e&&b.status==="waiting").sort((b,S)=>b.position-S.position);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(cl,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enhanced Queue Management"}),a.jsx("p",{className:"text-gray-600",children:"Real-time patient flow with clear handoffs"})]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map(b=>{const S=g(b.stage),k=e===b.stage;return a.jsxs("button",{onClick:()=>t(b.stage),className:`p-4 rounded-lg border-2 transition-all touch-target ${k?j(b.stage)+" ring-2 ring-primary/20":"bg-white border-gray-200 hover:border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(S,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium capitalize",children:b.stage})]}),a.jsx("div",{className:"text-2xl font-bold",children:b.waiting+b.inProgress}),a.jsx("div",{className:"text-sm opacity-75",children:b.inProgress>0?`${b.inProgress} active`:"Ready"}),b.etaMinutes>0&&a.jsxs("div",{className:"text-xs mt-1",children:["ETA: ",b.etaMinutes,"m"]})]},b.stage)})}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 capitalize",children:[e," Station"]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{children:["Waiting: ",(w==null?void 0:w.waiting)||0]}),a.jsxs("span",{children:["Active: ",(w==null?void 0:w.inProgress)||0]}),a.jsxs("span",{children:["ETA: ",(w==null?void 0:w.etaMinutes)||0,"m"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Now Serving"}),p?a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold",children:p.position}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:[((y=c.get(p.patientId))==null?void 0:y.givenName)||"Unknown"," ",((N=c.get(p.patientId))==null?void 0:N.familyName)||"Patient"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Started: ",p.updatedAt.toLocaleTimeString()]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[v(e)&&a.jsxs("button",{onClick:()=>h(e,v(e)),disabled:r===e,className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx(v2,{className:"h-4 w-4"}),a.jsxs("span",{children:["Send to ",v(e)]})]}),a.jsxs("button",{onClick:()=>h(e),disabled:r===e,className:"btn-secondary inline-flex items-center space-x-2",children:[a.jsx(ba,{className:"h-4 w-4"}),a.jsx("span",{children:"Complete"})]})]})]})}):a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[a.jsx(jn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No patient currently being served"}),f.length>0&&a.jsxs("button",{onClick:()=>u(e),className:"btn-primary mt-4 inline-flex items-center space-x-2",children:[a.jsx(dr,{className:"h-5 w-5"}),a.jsx("span",{children:"Call Next Patient"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Waiting Queue (",f.length,")"]}),f.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(dl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsxs("p",{children:["No patients waiting in ",e]})]}):a.jsxs("div",{className:"space-y-2",children:[f.slice(0,10).map((b,S)=>{const k=c.get(b.patientId),E=S===0;return a.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${E?"border-green-200 bg-green-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${E?"bg-green-600":"bg-gray-600"}`,children:S+1}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[(k==null?void 0:k.givenName)||"Unknown"," ",(k==null?void 0:k.familyName)||"Patient"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Position: ",b.position,"  Added: ",b.updatedAt.toLocaleTimeString()]})]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:E?"Next":`~${S*((w==null?void 0:w.avgTimeMinutes)||4)}m`})]},b.id)}),f.length>10&&a.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["... and ",f.length-10," more patients"]})]})]})]})]})}function Qk(e){if(!e.length)return"";const t=Object.keys(e[0]),n=s=>`"${String(s??"").replace(/"/g,'""')}"`;return[t.join(","),...e.map(s=>t.map(r=>n(s[r])).join(","))].join(`
`)}async function Bp(e,t,n="csv"){const s=await e.toArray(),r=n==="json"?new Blob([JSON.stringify(s,null,2)],{type:"application/json"}):new Blob([Qk(s)],{type:"text/csv"}),i=URL.createObjectURL(r),l=document.createElement("a");l.href=i,l.download=t,l.click(),URL.revokeObjectURL(i)}function Zk(){const{currentUser:e}=De();if(!e||!dn(e.role,"export"))return null;const t=[{table:D.patients,filename:"patients.csv",label:"Patients"},{table:D.vitals,filename:"vitals.csv",label:"Vitals"},{table:D.consultations,filename:"consultations.csv",label:"Consultations"},{table:D.dispenses,filename:"dispenses.csv",label:"Dispenses"},{table:D.inventory,filename:"inventory.csv",label:"Inventory"},{table:D.auditLogs,filename:"audit_logs.csv",label:"Audit Logs"}];return a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Export"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map(({table:n,filename:s,label:r})=>a.jsxs("button",{onClick:()=>Bp(n,s,"csv"),className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors text-sm",children:[a.jsx(Dp,{className:"h-4 w-4"}),a.jsx("span",{children:r})]},s))}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:()=>Bp(D.patients,"all_data.json","json"),className:"flex items-center space-x-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors text-sm font-medium",children:[a.jsx(Dp,{className:"h-4 w-4"}),a.jsx("span",{children:"Export All Data (JSON)"})]})})]})}const Vp={enabled:!0,volume:.7,autoPlay:!1};function Gk(){const{locale:e}=ja(),[t,n]=x.useState(Vp),[s,r]=x.useState(!1);return x.useEffect(()=>{const o=localStorage.getItem("mbhr-audio-settings");if(o)try{n({...Vp,...JSON.parse(o)})}catch(c){console.warn("Failed to load audio settings:",c)}},[]),x.useEffect(()=>{localStorage.setItem("mbhr-audio-settings",JSON.stringify(t))},[t]),{playPrompt:async(o,c)=>{if(!(!t.enabled||s)){r(!0);try{const d=`/audio/${e}/${o.replace(".","_")}.mp3`,u=new Audio(d);u.volume=t.volume,u.onerror=()=>{if("speechSynthesis"in window&&(c||o)){const h=new SpeechSynthesisUtterance(c||o);h.lang=Up(e),h.volume=t.volume,speechSynthesis.speak(h)}},await u.play()}catch(d){if(console.warn("Audio playback failed:",d),"speechSynthesis"in window&&(c||o)){const u=new SpeechSynthesisUtterance(c||o);u.lang=Up(e),u.volume=t.volume,speechSynthesis.speak(u)}}finally{setTimeout(()=>r(!1),1e3)}}},settings:t,updateSettings:o=>{n(c=>({...c,...o}))},isPlaying:s}}function Up(e){return{en:"en-US",ha:"ha-NG",yo:"yo-NG",ig:"ig-NG",pcm:"en-NG"}[e]||"en-US"}function ca({audioKey:e,fallbackText:t,children:n,className:s="",onClick:r,disabled:i=!1,type:l="button"}){const{playPrompt:o,settings:c}=Gk(),d=async()=>{c.enabled&&await o(e,t),r&&r()};return a.jsxs("button",{type:l,onClick:d,disabled:i,className:`relative ${s}`,children:[n,c.enabled&&a.jsx(Ic,{className:"absolute top-1 right-1 h-3 w-3 text-white/70"})]})}class Jk extends Dt{constructor(){super("mbhr_outbox"),this.version(1).stores({outboundMessages:"id, patientId, status, channel, to, createdAt, scheduledFor, _dirty, _syncedAt",messageTemplates:"key, locale, channel"})}}const Cn=new Jk;class rs{static async queueMessage(t,n,s,r,i={}){var o;const l={id:Ec(),patientId:t,to:this.formatPhone(n),channel:i.channel||"sms",locale:i.locale||"en",templateKey:s,payload:r,status:"queued",createdAt:new Date().toISOString(),scheduledFor:(o=i.scheduledFor)==null?void 0:o.toISOString(),attempts:0,_dirty:1};return await Cn.outboundMessages.add(l),console.log(" Queued message:",l.id),l.id}static async getPendingMessages(t=50){const n=new Date().toISOString();return Cn.outboundMessages.where("status").equals("queued").and(s=>!s.scheduledFor||s.scheduledFor<=n).limit(t).toArray()}static async markSent(t){await Cn.outboundMessages.update(t,{status:"sent",lastAttemptAt:new Date().toISOString(),_dirty:1})}static async markFailed(t,n){const s=await Cn.outboundMessages.get(t);if(!s)return;const r=s.attempts+1;await Cn.outboundMessages.update(t,{status:r>=3?"failed":"queued",attempts:r,lastAttemptAt:new Date().toISOString(),errorMessage:n,_dirty:1})}static formatPhone(t){const n=t.replace(/\D/g,"");return n.startsWith("234")?`+${n}`:n.startsWith("0")&&n.length===11?`+234${n.slice(1)}`:n.length===10?`+234${n}`:t}static renderTemplate(t,n){return t.replace(/\{\{(\w+)\}\}/g,(s,r)=>String(n[r]||s))}static async getStats(){const[t,n,s,r]=await Promise.all([Cn.outboundMessages.where("status").equals("queued").count(),Cn.outboundMessages.where("status").equals("sent").count(),Cn.outboundMessages.where("status").equals("failed").count(),Cn.outboundMessages.where("status").equals("delivered").count()]);return{queued:t,sent:n,failed:s,delivered:r}}}class Yk{async send(t){return console.log(" Mock SMS sent:",{to:t.to,template:t.templateKey,payload:t.payload}),Math.random()>.1?{success:!0,messageId:`mock_${Date.now()}`}:{success:!1,error:"Mock delivery failure"}}}class Xk{constructor(t){this.gateway=t}async queueMedicationReminder(t,n,s,r,i){const l=await D.patients.get(t);if(!l)throw new Error("Patient not found");return rs.queueMessage(t,l.phone,"followup.medication",{patientName:`${l.givenName} ${l.familyName}`,medicationName:n,dosage:s,frequency:r,clinicName:"MBHR Clinic"},{channel:"sms",locale:"en",scheduledFor:i})}async queueAppointmentReminder(t,n,s){const r=await D.patients.get(t);if(!r)throw new Error("Patient not found");return rs.queueMessage(t,r.phone,"appointment.reminder",{patientName:`${r.givenName} ${r.familyName}`,date:n.toLocaleDateString(),time:n.toLocaleTimeString(),clinicName:"MBHR Clinic"},{channel:"sms",locale:"en",scheduledFor:s})}async processOutbox(){const t=await rs.getPendingMessages(50);let n=0,s=0;for(const r of t)try{const i=await this.gateway.send(r);i.success?(await rs.markSent(r.id),n++):(await rs.markFailed(r.id,i.error||"Unknown error"),s++)}catch(i){await rs.markFailed(r.id,i instanceof Error?i.message:"Send failed"),s++}return{sent:n,failed:s}}async getStats(){return rs.getStats()}}let Sd=null;function eS(){if(!Sd){const e=new Yk;Sd=new Xk(e)}return Sd}function tS(){const{t:e}=ja(),{currentUser:t}=De(),[n,s]=x.useState({queued:0,sent:0,failed:0,delivered:0}),[r,i]=x.useState(!1),[l,o]=x.useState(null);if(!t||!dn(t.role,"export"))return null;x.useEffect(()=>{c();const u=setInterval(c,3e4);return()=>clearInterval(u)},[]);const c=async()=>{try{const u=await rs.getStats();s(u)}catch(u){console.error("Error loading message stats:",u)}},d=async()=>{i(!0);try{const h=await eS().processOutbox();o(new Date),await c(),h.sent>0||h.failed>0?alert(e("messaging.processComplete",{sent:h.sent.toString(),failed:h.failed.toString()})):alert(e("messaging.noMessages"))}catch(u){console.error("Error processing outbox:",u),alert(e("messaging.processError"))}finally{i(!1)}};return a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(_2,{className:"h-6 w-6 text-primary"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e("messaging.outbox")})]}),a.jsxs("button",{onClick:d,disabled:r||n.queued===0,className:"btn-primary inline-flex items-center space-x-2 disabled:opacity-50",children:[a.jsx(sk,{className:"h-4 w-4"}),a.jsx("span",{children:e(r?"messaging.sending":"messaging.sendQueued")})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:n.queued}),a.jsx("div",{className:"text-sm text-yellow-600",children:e("messaging.queued")})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-800",children:n.sent}),a.jsx("div",{className:"text-sm text-blue-600",children:e("messaging.sent")})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-800",children:n.delivered}),a.jsx("div",{className:"text-sm text-green-600",children:e("messaging.delivered")})]}),a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-red-800",children:n.failed}),a.jsx("div",{className:"text-sm text-red-600",children:e("messaging.failed")})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[a.jsx("div",{children:l?a.jsxs("span",{children:[e("messaging.lastSync"),": ",l.toLocaleTimeString()]}):a.jsx("span",{children:e("messaging.neverSynced")})}),a.jsx("div",{className:"flex items-center space-x-2",children:navigator.onLine?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{children:e("status.online")})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:e("status.offline")})]})})]}),n.queued>0&&!navigator.onLine&&a.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ge,{className:"h-5 w-5 text-yellow-600"}),a.jsx("span",{className:"text-sm text-yellow-800",children:e("messaging.offlineQueue",{count:n.queued.toString()})})]})})]})}function nS(){const{t:e}=Yn(),{currentUser:t}=De(),[n,s]=x.useState({totalPatients:0,todayRegistrations:0,totalUsers:0});x.useEffect(()=>{r()},[]);const r=async()=>{try{const i=new Date;i.setHours(0,0,0,0);const l=new Date(i);l.setDate(l.getDate()+1);const[o,c,d]=await Promise.all([D.patients.count(),D.patients.where("createdAt").between(i,l).count(),D.users.count()]);s({totalPatients:o,todayRegistrations:c,totalUsers:d})}catch(i){console.error("Error loading stats:",i)}};return t&&dn(t.role,"users"),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",t==null?void 0:t.fullName]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening at your clinic today"})]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-blue-50",children:a.jsx(oa,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Patients"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalPatients})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-green-50",children:a.jsx(qo,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Today's Registrations"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.todayRegistrations})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-purple-50",children:a.jsx(Nn,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"System Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.totalUsers})]})]})})]}),a.jsx(tS,{}),a.jsx(qk,{}),a.jsx(Wk,{}),a.jsx(Zk,{}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Getting Started"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Register your first patient"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Start by adding patient information to the system"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Record vital signs"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Take measurements and track patient health"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Manage inventory"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Keep track of medications and supplies"})]})]})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(ca,{audioKey:"action.register",fallbackText:"Register Patient",onClick:()=>{},className:"btn-primary",children:a.jsxs(As,{to:"/register",className:"flex items-center space-x-2",children:[a.jsx(qo,{className:"h-5 w-5"}),a.jsx("span",{children:"Register Patient"})]})}),a.jsx(ca,{audioKey:"nav.queue",fallbackText:"View Queue",onClick:()=>{},className:"btn-secondary",children:a.jsxs(As,{to:"/queue",className:"flex items-center space-x-2",children:[a.jsx(cl,{className:"h-5 w-5"}),a.jsx("span",{children:"View Queue"})]})})]})})]})]})}var ul=e=>e.type==="checkbox",Gs=e=>e instanceof Date,ut=e=>e==null;const J0=e=>typeof e=="object";var Ve=e=>!ut(e)&&!Array.isArray(e)&&J0(e)&&!Gs(e),sS=e=>Ve(e)&&e.target?ul(e.target)?e.target.checked:e.target.value:e,rS=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,aS=(e,t)=>e.has(rS(t)),iS=e=>{const t=e.constructor&&e.constructor.prototype;return Ve(t)&&t.hasOwnProperty("isPrototypeOf")},Cf=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function We(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Cf&&(e instanceof Blob||s))&&(n||Ve(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!iS(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=We(e[r]));else return e;return t}var Dc=e=>/^\w*$/.test(e),Me=e=>e===void 0,Af=e=>Array.isArray(e)?e.filter(Boolean):[],Pf=e=>Af(e.replace(/["|']|\]/g,"").split(/\.|\[/)),G=(e,t,n)=>{if(!t||!Ve(e))return n;const s=(Dc(t)?[t]:Pf(t)).reduce((r,i)=>ut(r)?r:r[i],e);return Me(s)||s===e?Me(e[t])?n:e[t]:s},pn=e=>typeof e=="boolean",xe=(e,t,n)=>{let s=-1;const r=Dc(t)?[t]:Pf(t),i=r.length,l=i-1;for(;++s<i;){const o=r[s];let c=n;if(s!==l){const d=e[o];c=Ve(d)||Array.isArray(d)?d:isNaN(+r[s+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const zp={BLUR:"blur",FOCUS_OUT:"focusout"},Xt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},An={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Y0=Se.createContext(null);Y0.displayName="HookFormContext";const lS=()=>Se.useContext(Y0);var oS=(e,t,n,s=!0)=>{const r={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(r,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Xt.all&&(t._proxyFormState[l]=!s||Xt.all),e[l]}});return r};const cS=typeof window<"u"?Se.useLayoutEffect:Se.useEffect;var At=e=>typeof e=="string",dS=(e,t,n,s,r)=>At(e)?(s&&t.watch.add(e),G(n,e,r)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),G(n,i))):(s&&(t.watchAll=!0),n),am=e=>ut(e)||!J0(e);function us(e,t,n=new WeakSet){if(am(e)||am(t))return e===t;if(Gs(e)&&Gs(t))return e.getTime()===t.getTime();const s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of s){const l=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=t[i];if(Gs(l)&&Gs(o)||Ve(l)&&Ve(o)||Array.isArray(l)&&Array.isArray(o)?!us(l,o,n):l!==o)return!1}}return!0}var X0=(e,t,n,s,r)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:r||!0}}:{},ii=e=>Array.isArray(e)?e:[e],Hp=()=>{let e=[];return{get observers(){return e},next:r=>{for(const i of e)i.next&&i.next(r)},subscribe:r=>(e.push(r),{unsubscribe:()=>{e=e.filter(i=>i!==r)}}),unsubscribe:()=>{e=[]}}};function ev(e,t){const n={};for(const s in e)if(e.hasOwnProperty(s)){const r=e[s],i=t[s];if(r&&Ve(r)&&i){const l=ev(r,i);Ve(l)&&(n[s]=l)}else e[s]&&(n[s]=i)}return n}var yt=e=>Ve(e)&&!Object.keys(e).length,If=e=>e.type==="file",en=e=>typeof e=="function",Ko=e=>{if(!Cf)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},tv=e=>e.type==="select-multiple",Df=e=>e.type==="radio",uS=e=>Df(e)||ul(e),_d=e=>Ko(e)&&e.isConnected;function mS(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=Me(e)?s++:e[t[s++]];return e}function fS(e){for(const t in e)if(e.hasOwnProperty(t)&&!Me(e[t]))return!1;return!0}function Re(e,t){const n=Array.isArray(t)?t:Dc(t)?[t]:Pf(t),s=n.length===1?e:mS(e,n),r=n.length-1,i=n[r];return s&&delete s[i],r!==0&&(Ve(s)&&yt(s)||Array.isArray(s)&&fS(s))&&Re(e,n.slice(0,-1)),e}var hS=e=>{for(const t in e)if(en(e[t]))return!0;return!1};function nv(e){return Array.isArray(e)||Ve(e)&&!hS(e)}function im(e,t={}){for(const n in e)nv(e[n])?(t[n]=Array.isArray(e[n])?[]:{},im(e[n],t[n])):ut(e[n])||(t[n]=!0);return t}function _r(e,t,n){n||(n=im(t));for(const s in e)nv(e[s])?Me(t)||am(n[s])?n[s]=im(e[s],Array.isArray(e[s])?[]:{}):_r(e[s],ut(t)?{}:t[s],n[s]):n[s]=!us(e[s],t[s]);return n}const qp={value:!1,isValid:!1},Kp={value:!0,isValid:!0};var sv=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Me(e[0].attributes.value)?Me(e[0].value)||e[0].value===""?Kp:{value:e[0].value,isValid:!0}:Kp:qp}return qp},rv=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>Me(e)?e:t?e===""?NaN:e&&+e:n&&At(e)?new Date(e):s?s(e):e;const Wp={isValid:!1,value:null};var av=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Wp):Wp;function Qp(e){const t=e.ref;return If(t)?t.files:Df(t)?av(e.refs).value:tv(t)?[...t.selectedOptions].map(({value:n})=>n):ul(t)?sv(e.refs).value:rv(Me(t.value)?e.ref.value:t.value,e)}var pS=(e,t,n,s)=>{const r={};for(const i of e){const l=G(t,i);l&&xe(r,i,l._f)}return{criteriaMode:n,names:[...e],fields:r,shouldUseNativeValidation:s}},Wo=e=>e instanceof RegExp,Ta=e=>Me(e)?e:Wo(e)?e.source:Ve(e)?Wo(e.value)?e.value.source:e.value:e,Zp=e=>({isOnSubmit:!e||e===Xt.onSubmit,isOnBlur:e===Xt.onBlur,isOnChange:e===Xt.onChange,isOnAll:e===Xt.all,isOnTouch:e===Xt.onTouched});const Gp="AsyncFunction";var gS=e=>!!e&&!!e.validate&&!!(en(e.validate)&&e.validate.constructor.name===Gp||Ve(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Gp)),xS=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Jp=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const li=(e,t,n,s)=>{for(const r of n||Object.keys(e)){const i=G(e,r);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],r)&&!s)return!0;if(l.ref&&t(l.ref,l.name)&&!s)return!0;if(li(o,t))break}else if(Ve(o)&&li(o,t))break}}};function Yp(e,t,n){const s=G(e,n);if(s||Dc(n))return{error:s,name:n};const r=n.split(".");for(;r.length;){const i=r.join("."),l=G(t,i),o=G(e,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};r.pop()}return{name:n}}var yS=(e,t,n,s)=>{n(e);const{name:r,...i}=e;return yt(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!s||Xt.all))},vS=(e,t,n)=>!e||!t||e===t||ii(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),wS=(e,t,n,s,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(t||e):(n?s.isOnBlur:r.isOnBlur)?!e:(n?s.isOnChange:r.isOnChange)?e:!0,bS=(e,t)=>!Af(G(e,t)).length&&Re(e,t),jS=(e,t,n)=>{const s=ii(G(e,n));return xe(s,"root",t[n]),xe(e,n,s),e};function Xp(e,t,n="validate"){if(At(e)||Array.isArray(e)&&e.every(At)||pn(e)&&!e)return{type:n,message:At(e)?e:"",ref:t}}var wr=e=>Ve(e)&&!Wo(e)?e:{value:e,message:""},eg=async(e,t,n,s,r,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:h,max:m,pattern:g,validate:j,name:v,valueAsNumber:w,mount:p}=e._f,f=G(n,v);if(!p||t.has(v))return{};const y=o?o[0]:l,N=L=>{r&&y.reportValidity&&(y.setCustomValidity(pn(L)?"":L||""),y.reportValidity())},b={},S=Df(l),k=ul(l),E=S||k,_=(w||If(l))&&Me(l.value)&&Me(f)||Ko(l)&&l.value===""||f===""||Array.isArray(f)&&!f.length,I=X0.bind(null,v,s,b),T=(L,z,H,ee=An.maxLength,re=An.minLength)=>{const ie=L?z:H;b[v]={type:L?ee:re,message:ie,ref:l,...I(L?ee:re,ie)}};if(i?!Array.isArray(f)||!f.length:c&&(!E&&(_||ut(f))||pn(f)&&!f||k&&!sv(o).isValid||S&&!av(o).isValid)){const{value:L,message:z}=At(c)?{value:!!c,message:c}:wr(c);if(L&&(b[v]={type:An.required,message:z,ref:y,...I(An.required,z)},!s))return N(z),b}if(!_&&(!ut(h)||!ut(m))){let L,z;const H=wr(m),ee=wr(h);if(!ut(f)&&!isNaN(f)){const re=l.valueAsNumber||f&&+f;ut(H.value)||(L=re>H.value),ut(ee.value)||(z=re<ee.value)}else{const re=l.valueAsDate||new Date(f),ie=M=>new Date(new Date().toDateString()+" "+M),R=l.type=="time",A=l.type=="week";At(H.value)&&f&&(L=R?ie(f)>ie(H.value):A?f>H.value:re>new Date(H.value)),At(ee.value)&&f&&(z=R?ie(f)<ie(ee.value):A?f<ee.value:re<new Date(ee.value))}if((L||z)&&(T(!!L,H.message,ee.message,An.max,An.min),!s))return N(b[v].message),b}if((d||u)&&!_&&(At(f)||i&&Array.isArray(f))){const L=wr(d),z=wr(u),H=!ut(L.value)&&f.length>+L.value,ee=!ut(z.value)&&f.length<+z.value;if((H||ee)&&(T(H,L.message,z.message),!s))return N(b[v].message),b}if(g&&!_&&At(f)){const{value:L,message:z}=wr(g);if(Wo(L)&&!f.match(L)&&(b[v]={type:An.pattern,message:z,ref:l,...I(An.pattern,z)},!s))return N(z),b}if(j){if(en(j)){const L=await j(f,n),z=Xp(L,y);if(z&&(b[v]={...z,...I(An.validate,z.message)},!s))return N(z.message),b}else if(Ve(j)){let L={};for(const z in j){if(!yt(L)&&!s)break;const H=Xp(await j[z](f,n),y,z);H&&(L={...H,...I(z,H.message)},N(H.message),s&&(b[v]=L))}if(!yt(L)&&(b[v]={ref:y,...L},!s))return b}}return N(!0),b};const NS={mode:Xt.onSubmit,reValidateMode:Xt.onChange,shouldFocusError:!0};function kS(e={}){let t={...NS,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:en(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},r=Ve(t.defaultValues)||Ve(t.values)?We(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:We(r),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const m={array:Hp(),state:Hp()},g=t.criteriaMode===Xt.all,j=C=>P=>{clearTimeout(d),d=setTimeout(C,P)},v=async C=>{if(!t.disabled&&(u.isValid||h.isValid||C)){const P=t.resolver?yt((await k()).errors):await _(s,!0);P!==n.isValid&&m.state.next({isValid:P})}},w=(C,P)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((C||Array.from(o.mount)).forEach(O=>{O&&(P?xe(n.validatingFields,O,P):Re(n.validatingFields,O))}),m.state.next({validatingFields:n.validatingFields,isValidating:!yt(n.validatingFields)}))},p=(C,P=[],O,K,U=!0,B=!0)=>{if(K&&O&&!t.disabled){if(l.action=!0,B&&Array.isArray(G(s,C))){const Y=O(G(s,C),K.argA,K.argB);U&&xe(s,C,Y)}if(B&&Array.isArray(G(n.errors,C))){const Y=O(G(n.errors,C),K.argA,K.argB);U&&xe(n.errors,C,Y),bS(n.errors,C)}if((u.touchedFields||h.touchedFields)&&B&&Array.isArray(G(n.touchedFields,C))){const Y=O(G(n.touchedFields,C),K.argA,K.argB);U&&xe(n.touchedFields,C,Y)}(u.dirtyFields||h.dirtyFields)&&(n.dirtyFields=_r(r,i)),m.state.next({name:C,isDirty:T(C,P),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else xe(i,C,P)},f=(C,P)=>{xe(n.errors,C,P),m.state.next({errors:n.errors})},y=C=>{n.errors=C,m.state.next({errors:n.errors,isValid:!1})},N=(C,P,O,K)=>{const U=G(s,C);if(U){const B=G(i,C,Me(O)?G(r,C):O);Me(B)||K&&K.defaultChecked||P?xe(i,C,P?B:Qp(U._f)):H(C,B),l.mount&&v()}},b=(C,P,O,K,U)=>{let B=!1,Y=!1;const he={name:C};if(!t.disabled){if(!O||K){(u.isDirty||h.isDirty)&&(Y=n.isDirty,n.isDirty=he.isDirty=T(),B=Y!==he.isDirty);const ve=us(G(r,C),P);Y=!!G(n.dirtyFields,C),ve?Re(n.dirtyFields,C):xe(n.dirtyFields,C,!0),he.dirtyFields=n.dirtyFields,B=B||(u.dirtyFields||h.dirtyFields)&&Y!==!ve}if(O){const ve=G(n.touchedFields,C);ve||(xe(n.touchedFields,C,O),he.touchedFields=n.touchedFields,B=B||(u.touchedFields||h.touchedFields)&&ve!==O)}B&&U&&m.state.next(he)}return B?he:{}},S=(C,P,O,K)=>{const U=G(n.errors,C),B=(u.isValid||h.isValid)&&pn(P)&&n.isValid!==P;if(t.delayError&&O?(c=j(()=>f(C,O)),c(t.delayError)):(clearTimeout(d),c=null,O?xe(n.errors,C,O):Re(n.errors,C)),(O?!us(U,O):U)||!yt(K)||B){const Y={...K,...B&&pn(P)?{isValid:P}:{},errors:n.errors,name:C};n={...n,...Y},m.state.next(Y)}},k=async C=>{w(C,!0);const P=await t.resolver(i,t.context,pS(C||o.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return w(C),P},E=async C=>{const{errors:P}=await k(C);if(C)for(const O of C){const K=G(P,O);K?xe(n.errors,O,K):Re(n.errors,O)}else n.errors=P;return P},_=async(C,P,O={valid:!0})=>{for(const K in C){const U=C[K];if(U){const{_f:B,...Y}=U;if(B){const he=o.array.has(B.name),ve=U._f&&gS(U._f);ve&&u.validatingFields&&w([B.name],!0);const $t=await eg(U,o.disabled,i,g,t.shouldUseNativeValidation&&!P,he);if(ve&&u.validatingFields&&w([B.name]),$t[B.name]&&(O.valid=!1,P))break;!P&&(G($t,B.name)?he?jS(n.errors,$t,B.name):xe(n.errors,B.name,$t[B.name]):Re(n.errors,B.name))}!yt(Y)&&await _(Y,P,O)}}return O.valid},I=()=>{for(const C of o.unMount){const P=G(s,C);P&&(P._f.refs?P._f.refs.every(O=>!_d(O)):!_d(P._f.ref))&&un(C)}o.unMount=new Set},T=(C,P)=>!t.disabled&&(C&&P&&xe(i,C,P),!us(M(),r)),L=(C,P,O)=>dS(C,o,{...l.mount?i:Me(P)?r:At(C)?{[C]:P}:P},O,P),z=C=>Af(G(l.mount?i:r,C,t.shouldUnregister?G(r,C,[]):[])),H=(C,P,O={})=>{const K=G(s,C);let U=P;if(K){const B=K._f;B&&(!B.disabled&&xe(i,C,rv(P,B)),U=Ko(B.ref)&&ut(P)?"":P,tv(B.ref)?[...B.ref.options].forEach(Y=>Y.selected=U.includes(Y.value)):B.refs?ul(B.ref)?B.refs.forEach(Y=>{(!Y.defaultChecked||!Y.disabled)&&(Array.isArray(U)?Y.checked=!!U.find(he=>he===Y.value):Y.checked=U===Y.value||!!U)}):B.refs.forEach(Y=>Y.checked=Y.value===U):If(B.ref)?B.ref.value="":(B.ref.value=U,B.ref.type||m.state.next({name:C,values:We(i)})))}(O.shouldDirty||O.shouldTouch)&&b(C,U,O.shouldTouch,O.shouldDirty,!0),O.shouldValidate&&A(C)},ee=(C,P,O)=>{for(const K in P){if(!P.hasOwnProperty(K))return;const U=P[K],B=C+"."+K,Y=G(s,B);(o.array.has(C)||Ve(U)||Y&&!Y._f)&&!Gs(U)?ee(B,U,O):H(B,U,O)}},re=(C,P,O={})=>{const K=G(s,C),U=o.array.has(C),B=We(P);xe(i,C,B),U?(m.array.next({name:C,values:We(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&O.shouldDirty&&m.state.next({name:C,dirtyFields:_r(r,i),isDirty:T(C,B)})):K&&!K._f&&!ut(B)?ee(C,B,O):H(C,B,O),Jp(C,o)&&m.state.next({...n,name:C}),m.state.next({name:l.mount?C:void 0,values:We(i)})},ie=async C=>{l.mount=!0;const P=C.target;let O=P.name,K=!0;const U=G(s,O),B=ve=>{K=Number.isNaN(ve)||Gs(ve)&&isNaN(ve.getTime())||us(ve,G(i,O,ve))},Y=Zp(t.mode),he=Zp(t.reValidateMode);if(U){let ve,$t;const hl=P.type?Qp(U._f):sS(C),ts=C.type===zp.BLUR||C.type===zp.FOCUS_OUT,Cv=!xS(U._f)&&!t.resolver&&!G(n.errors,O)&&!U._f.deps||wS(ts,G(n.touchedFields,O),n.isSubmitted,he,Y),$c=Jp(O,o,ts);xe(i,O,hl),ts?(!P||!P.readOnly)&&(U._f.onBlur&&U._f.onBlur(C),c&&c(0)):U._f.onChange&&U._f.onChange(C);const Fc=b(O,hl,ts),Av=!yt(Fc)||$c;if(!ts&&m.state.next({name:O,type:C.type,values:We(i)}),Cv)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?ts&&v():ts||v()),Av&&m.state.next({name:O,...$c?{}:Fc});if(!ts&&$c&&m.state.next({...n}),t.resolver){const{errors:Hf}=await k([O]);if(B(hl),K){const Pv=Yp(n.errors,s,O),qf=Yp(Hf,s,Pv.name||O);ve=qf.error,O=qf.name,$t=yt(Hf)}}else w([O],!0),ve=(await eg(U,o.disabled,i,g,t.shouldUseNativeValidation))[O],w([O]),B(hl),K&&(ve?$t=!1:(u.isValid||h.isValid)&&($t=await _(s,!0)));K&&(U._f.deps&&(!Array.isArray(U._f.deps)||U._f.deps.length>0)&&A(U._f.deps),S(O,$t,ve,Fc))}},R=(C,P)=>{if(G(n.errors,P)&&C.focus)return C.focus(),1},A=async(C,P={})=>{let O,K;const U=ii(C);if(t.resolver){const B=await E(Me(C)?C:U);O=yt(B),K=C?!U.some(Y=>G(B,Y)):O}else C?(K=(await Promise.all(U.map(async B=>{const Y=G(s,B);return await _(Y&&Y._f?{[B]:Y}:Y)}))).every(Boolean),!(!K&&!n.isValid)&&v()):K=O=await _(s);return m.state.next({...!At(C)||(u.isValid||h.isValid)&&O!==n.isValid?{}:{name:C},...t.resolver||!C?{isValid:O}:{},errors:n.errors}),P.shouldFocus&&!K&&li(s,R,C?U:o.mount),K},M=(C,P)=>{let O={...l.mount?i:r};return P&&(O=ev(P.dirtyFields?n.dirtyFields:n.touchedFields,O)),Me(C)?O:At(C)?G(O,C):C.map(K=>G(O,K))},oe=(C,P)=>({invalid:!!G((P||n).errors,C),isDirty:!!G((P||n).dirtyFields,C),error:G((P||n).errors,C),isValidating:!!G(n.validatingFields,C),isTouched:!!G((P||n).touchedFields,C)}),be=C=>{C&&ii(C).forEach(P=>Re(n.errors,P)),m.state.next({errors:C?n.errors:{}})},kt=(C,P,O)=>{const K=(G(s,C,{_f:{}})._f||{}).ref,U=G(n.errors,C)||{},{ref:B,message:Y,type:he,...ve}=U;xe(n.errors,C,{...ve,...P,ref:K}),m.state.next({name:C,errors:n.errors,isValid:!1}),O&&O.shouldFocus&&K&&K.focus&&K.focus()},St=(C,P)=>en(C)?m.state.subscribe({next:O=>"values"in O&&C(L(void 0,P),O)}):L(C,P,!0),Xn=C=>m.state.subscribe({next:P=>{vS(C.name,P.name,C.exact)&&yS(P,C.formState||u,Ev,C.reRenderRoot)&&C.callback({values:{...i},...n,...P,defaultValues:r})}}).unsubscribe,Qt=C=>(l.mount=!0,h={...h,...C.formState},Xn({...C,formState:h})),un=(C,P={})=>{for(const O of C?ii(C):o.mount)o.mount.delete(O),o.array.delete(O),P.keepValue||(Re(s,O),Re(i,O)),!P.keepError&&Re(n.errors,O),!P.keepDirty&&Re(n.dirtyFields,O),!P.keepTouched&&Re(n.touchedFields,O),!P.keepIsValidating&&Re(n.validatingFields,O),!t.shouldUnregister&&!P.keepDefaultValue&&Re(r,O);m.state.next({values:We(i)}),m.state.next({...n,...P.keepDirty?{isDirty:T()}:{}}),!P.keepIsValid&&v()},fl=({disabled:C,name:P})=>{(pn(C)&&l.mount||C||o.disabled.has(P))&&(C?o.disabled.add(P):o.disabled.delete(P))},gr=(C,P={})=>{let O=G(s,C);const K=pn(P.disabled)||pn(t.disabled);return xe(s,C,{...O||{},_f:{...O&&O._f?O._f:{ref:{name:C}},name:C,mount:!0,...P}}),o.mount.add(C),O?fl({disabled:pn(P.disabled)?P.disabled:t.disabled,name:C}):N(C,!0,P.value),{...K?{disabled:P.disabled||t.disabled}:{},...t.progressive?{required:!!P.required,min:Ta(P.min),max:Ta(P.max),minLength:Ta(P.minLength),maxLength:Ta(P.maxLength),pattern:Ta(P.pattern)}:{},name:C,onChange:ie,onBlur:ie,ref:U=>{if(U){gr(C,P),O=G(s,C);const B=Me(U.value)&&U.querySelectorAll&&U.querySelectorAll("input,select,textarea")[0]||U,Y=uS(B),he=O._f.refs||[];if(Y?he.find(ve=>ve===B):B===O._f.ref)return;xe(s,C,{_f:{...O._f,...Y?{refs:[...he.filter(_d),B,...Array.isArray(G(r,C))?[{}]:[]],ref:{type:B.type,name:C}}:{ref:B}}}),N(C,!1,void 0,B)}else O=G(s,C,{}),O._f&&(O._f.mount=!1),(t.shouldUnregister||P.shouldUnregister)&&!(aS(o.array,C)&&l.action)&&o.unMount.add(C)}}},ct=()=>t.shouldFocusError&&li(s,R,o.mount),es=C=>{pn(C)&&(m.state.next({disabled:C}),li(s,(P,O)=>{const K=G(s,O);K&&(P.disabled=K._f.disabled||C,Array.isArray(K._f.refs)&&K._f.refs.forEach(U=>{U.disabled=K._f.disabled||C}))},0,!1))},Bf=(C,P)=>async O=>{let K;O&&(O.preventDefault&&O.preventDefault(),O.persist&&O.persist());let U=We(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:B,values:Y}=await k();n.errors=B,U=We(Y)}else await _(s);if(o.disabled.size)for(const B of o.disabled)Re(U,B);if(Re(n.errors,"root"),yt(n.errors)){m.state.next({errors:{}});try{await C(U,O)}catch(B){K=B}}else P&&await P({...n.errors},O),ct(),setTimeout(ct);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:yt(n.errors)&&!K,submitCount:n.submitCount+1,errors:n.errors}),K)throw K},Sv=(C,P={})=>{G(s,C)&&(Me(P.defaultValue)?re(C,We(G(r,C))):(re(C,P.defaultValue),xe(r,C,We(P.defaultValue))),P.keepTouched||Re(n.touchedFields,C),P.keepDirty||(Re(n.dirtyFields,C),n.isDirty=P.defaultValue?T(C,We(G(r,C))):T()),P.keepError||(Re(n.errors,C),u.isValid&&v()),m.state.next({...n}))},Vf=(C,P={})=>{const O=C?We(C):r,K=We(O),U=yt(C),B=U?r:K;if(P.keepDefaultValues||(r=O),!P.keepValues){if(P.keepDirtyValues){const Y=new Set([...o.mount,...Object.keys(_r(r,i))]);for(const he of Array.from(Y))G(n.dirtyFields,he)?xe(B,he,G(i,he)):re(he,G(B,he))}else{if(Cf&&Me(C))for(const Y of o.mount){const he=G(s,Y);if(he&&he._f){const ve=Array.isArray(he._f.refs)?he._f.refs[0]:he._f.ref;if(Ko(ve)){const $t=ve.closest("form");if($t){$t.reset();break}}}}if(P.keepFieldsRef)for(const Y of o.mount)re(Y,G(B,Y));else s={}}i=t.shouldUnregister?P.keepDefaultValues?We(r):{}:We(B),m.array.next({values:{...B}}),m.state.next({values:{...B}})}o={mount:P.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!P.keepIsValid||!!P.keepDirtyValues,l.watch=!!t.shouldUnregister,m.state.next({submitCount:P.keepSubmitCount?n.submitCount:0,isDirty:U?!1:P.keepDirty?n.isDirty:!!(P.keepDefaultValues&&!us(C,r)),isSubmitted:P.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:U?{}:P.keepDirtyValues?P.keepDefaultValues&&i?_r(r,i):n.dirtyFields:P.keepDefaultValues&&C?_r(r,C):P.keepDirty?n.dirtyFields:{},touchedFields:P.keepTouched?n.touchedFields:{},errors:P.keepErrors?n.errors:{},isSubmitSuccessful:P.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},Uf=(C,P)=>Vf(en(C)?C(i):C,P),_v=(C,P={})=>{const O=G(s,C),K=O&&O._f;if(K){const U=K.refs?K.refs[0]:K.ref;U.focus&&(U.focus(),P.shouldSelect&&en(U.select)&&U.select())}},Ev=C=>{n={...n,...C}},zf={control:{register:gr,unregister:un,getFieldState:oe,handleSubmit:Bf,setError:kt,_subscribe:Xn,_runSchema:k,_focusError:ct,_getWatch:L,_getDirty:T,_setValid:v,_setFieldArray:p,_setDisabledField:fl,_setErrors:y,_getFieldArray:z,_reset:Vf,_resetDefaultValues:()=>en(t.defaultValues)&&t.defaultValues().then(C=>{Uf(C,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:es,_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return l},set _state(C){l=C},get _defaultValues(){return r},get _names(){return o},set _names(C){o=C},get _formState(){return n},get _options(){return t},set _options(C){t={...t,...C}}},subscribe:Qt,trigger:A,register:gr,handleSubmit:Bf,watch:St,setValue:re,getValues:M,reset:Uf,resetField:Sv,clearErrors:be,unregister:un,setError:kt,setFocus:_v,getFieldState:oe};return{...zf,formControl:zf}}function Tc(e={}){const t=Se.useRef(void 0),n=Se.useRef(void 0),[s,r]=Se.useState({isDirty:!1,isValidating:!1,isLoading:en(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:en(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!en(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...o}=kS(e);t.current={...o,formState:s}}const i=t.current.control;return i._options=e,cS(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>r({...i._formState}),reRenderRoot:!0});return r(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),Se.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Se.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Se.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Se.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Se.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==s.isDirty&&i._subjects.state.next({isDirty:l})}},[i,s.isDirty]),Se.useEffect(()=>{e.values&&!us(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=e.values,r(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),Se.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=oS(s,i),t.current}const tg=(e,t,n)=>{if(e&&"reportValidity"in e){const s=G(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},iv=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?tg(s.ref,n,e):s.refs&&s.refs.forEach(r=>tg(r,n,e))}},SS=(e,t)=>{t.shouldUseNativeValidation&&iv(e,t);const n={};for(const s in e){const r=G(t.fields,s),i=Object.assign(e[s]||{},{ref:r&&r.ref});if(_S(t.names||Object.keys(e),s)){const l=Object.assign({},G(n,s));xe(l,"root",i),xe(n,s,l)}else xe(n,s,i)}return n},_S=(e,t)=>e.some(n=>n.startsWith(t+"."));var ES=function(e,t){for(var n={};e.length;){var s=e[0],r=s.code,i=s.message,l=s.path.join(".");if(!n[l])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];n[l]={message:o.message,type:o.code}}else n[l]={message:i,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=n[l].types,d=c&&c[s.code];n[l]=X0(l,t,n,r,d?[].concat(d,s.message):s.message)}e.shift()}return n},Oc=function(e,t,n){return n===void 0&&(n={}),function(s,r,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return i.shouldUseNativeValidation&&iv({},i),{errors:{},values:n.raw?s:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:SS(ES(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},me;(function(e){e.assertEqual=r=>r;function t(r){}e.assertIs=t;function n(r){throw new Error}e.assertNever=n,e.arrayToEnum=r=>{const i={};for(const l of r)i[l]=l;return i},e.getValidEnumValues=r=>{const i=e.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),l={};for(const o of i)l[o]=r[o];return e.objectValues(l)},e.objectValues=r=>e.objectKeys(r).map(function(i){return r[i]}),e.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const i=[];for(const l in r)Object.prototype.hasOwnProperty.call(r,l)&&i.push(l);return i},e.find=(r,i)=>{for(const l of r)if(i(l))return l},e.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function s(r,i=" | "){return r.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}e.joinValues=s,e.jsonStringifyReplacer=(r,i)=>typeof i=="bigint"?i.toString():i})(me||(me={}));var lm;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(lm||(lm={}));const W=me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ms=e=>{switch(typeof e){case"undefined":return W.undefined;case"string":return W.string;case"number":return isNaN(e)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(e)?W.array:e===null?W.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?W.promise:typeof Map<"u"&&e instanceof Map?W.map:typeof Set<"u"&&e instanceof Set?W.set:typeof Date<"u"&&e instanceof Date?W.date:W.object;default:return W.unknown}},F=me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),CS=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Tt extends Error{constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(i){return i.message},s={_errors:[]},r=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(r);else if(l.code==="invalid_return_type")r(l.returnTypeError);else if(l.code==="invalid_arguments")r(l.argumentsError);else if(l.path.length===0)s._errors.push(n(l));else{let o=s,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(n(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return r(this),s}static assert(t){if(!(t instanceof Tt))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):s.push(t(r));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}Tt.create=e=>new Tt(e);const da=(e,t)=>{let n;switch(e.code){case F.invalid_type:e.received===W.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case F.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,me.jsonStringifyReplacer)}`;break;case F.unrecognized_keys:n=`Unrecognized key(s) in object: ${me.joinValues(e.keys,", ")}`;break;case F.invalid_union:n="Invalid input";break;case F.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${me.joinValues(e.options)}`;break;case F.invalid_enum_value:n=`Invalid enum value. Expected ${me.joinValues(e.options)}, received '${e.received}'`;break;case F.invalid_arguments:n="Invalid function arguments";break;case F.invalid_return_type:n="Invalid function return type";break;case F.invalid_date:n="Invalid date";break;case F.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:me.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case F.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case F.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case F.custom:n="Invalid input";break;case F.invalid_intersection_types:n="Intersection results could not be merged";break;case F.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case F.not_finite:n="Number must be finite";break;default:n=t.defaultError,me.assertNever(e)}return{message:n}};let lv=da;function AS(e){lv=e}function Qo(){return lv}const Zo=e=>{const{data:t,path:n,errorMaps:s,issueData:r}=e,i=[...n,...r.path||[]],l={...r,path:i};if(r.message!==void 0)return{...r,path:i,message:r.message};let o="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:t,defaultError:o}).message;return{...r,path:i,message:o}},PS=[];function q(e,t){const n=Qo(),s=Zo({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===da?void 0:da].filter(r=>!!r)});e.common.issues.push(s)}class lt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const r of n){if(r.status==="aborted")return se;r.status==="dirty"&&t.dirty(),s.push(r.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const r of n){const i=await r.key,l=await r.value;s.push({key:i,value:l})}return lt.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const r of n){const{key:i,value:l}=r;if(i.status==="aborted"||l.status==="aborted")return se;i.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||r.alwaysSet)&&(s[i.value]=l.value)}return{status:t.value,value:s}}}const se=Object.freeze({status:"aborted"}),Br=e=>({status:"dirty",value:e}),pt=e=>({status:"valid",value:e}),om=e=>e.status==="aborted",cm=e=>e.status==="dirty",Fi=e=>e.status==="valid",Bi=e=>typeof Promise<"u"&&e instanceof Promise;function Go(e,t,n,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function ov(e,t,n,s,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var J;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(J||(J={}));var za,Ha;class kn{constructor(t,n,s,r){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ng=(e,t)=>{if(Fi(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Tt(e.common.issues);return this._error=n,this._error}}};function le(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:r}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:r}:{errorMap:(l,o)=>{var c,d;const{message:u}=e;return l.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:(d=u??n)!==null&&d!==void 0?d:o.defaultError}},description:r}}class ce{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return ms(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:ms(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new lt,ctx:{common:t.parent.common,data:t.data,parsedType:ms(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Bi(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const r={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ms(t)},i=this._parseSync({data:t,path:r.path,parent:r});return ng(r,i)}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ms(t)},r=this._parse({data:t,path:s.path,parent:s}),i=await(Bi(r)?r:Promise.resolve(r));return ng(s,i)}refine(t,n){const s=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,i)=>{const l=t(r),o=()=>i.addIssue({code:F.custom,...s(r)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(t,n){return this._refinement((s,r)=>t(s)?!0:(r.addIssue(typeof n=="function"?n(s,r):n),!1))}_refinement(t){return new on({schema:this,typeName:te.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return wn.create(this,this._def)}nullable(){return Rs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return an.create(this,this._def)}promise(){return ma.create(this,this._def)}or(t){return Hi.create([this,t],this._def)}and(t){return qi.create(this,t,this._def)}transform(t){return new on({...le(this._def),schema:this,typeName:te.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Gi({...le(this._def),innerType:this,defaultValue:n,typeName:te.ZodDefault})}brand(){return new Tf({typeName:te.ZodBranded,type:this,...le(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Ji({...le(this._def),innerType:this,catchValue:n,typeName:te.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return ml.create(this,t)}readonly(){return Yi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const IS=/^c[^\s-]{8,}$/i,DS=/^[0-9a-z]+$/,TS=/^[0-9A-HJKMNP-TV-Z]{26}$/,OS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,LS=/^[a-z0-9_-]{21}$/i,RS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$S="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ed;const FS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,BS=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,VS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cv="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",US=new RegExp(`^${cv}$`);function dv(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function zS(e){return new RegExp(`^${dv(e)}$`)}function uv(e){let t=`${cv}T${dv(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function HS(e,t){return!!((t==="v4"||!t)&&FS.test(e)||(t==="v6"||!t)&&BS.test(e))}class tn extends ce{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==W.string){const i=this._getOrReturnCtx(t);return q(i,{code:F.invalid_type,expected:W.string,received:i.parsedType}),se}const s=new lt;let r;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(r=this._getOrReturnCtx(t,r),q(r,{code:F.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")t.data.length>i.value&&(r=this._getOrReturnCtx(t,r),q(r,{code:F.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const l=t.data.length>i.value,o=t.data.length<i.value;(l||o)&&(r=this._getOrReturnCtx(t,r),l?q(r,{code:F.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&q(r,{code:F.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")MS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"email",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Ed||(Ed=new RegExp($S,"u")),Ed.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"emoji",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")OS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"uuid",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")LS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"nanoid",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")IS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"cuid",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")DS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"cuid2",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")TS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"ulid",code:F.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{r=this._getOrReturnCtx(t,r),q(r,{validation:"url",code:F.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"regex",code:F.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(t,r),q(r,{code:F.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(r=this._getOrReturnCtx(t,r),q(r,{code:F.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(r=this._getOrReturnCtx(t,r),q(r,{code:F.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?uv(i).test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{code:F.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?US.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{code:F.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?zS(i).test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{code:F.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?RS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"duration",code:F.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?HS(t.data,i.version)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"ip",code:F.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?VS.test(t.data)||(r=this._getOrReturnCtx(t,r),q(r,{validation:"base64",code:F.invalid_string,message:i.message}),s.dirty()):me.assertNever(i);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(r=>t.test(r),{validation:n,code:F.invalid_string,...J.errToObj(s)})}_addCheck(t){return new tn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...J.errToObj(t)})}url(t){return this._addCheck({kind:"url",...J.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...J.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...J.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...J.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...J.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...J.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...J.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...J.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...J.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...J.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...J.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...J.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...J.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...J.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...J.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...J.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...J.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...J.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...J.errToObj(n)})}nonempty(t){return this.min(1,J.errToObj(t))}trim(){return new tn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new tn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new tn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}tn.create=e=>{var t;return new tn({checks:[],typeName:te.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...le(e)})};function qS(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=n>s?n:s,i=parseInt(e.toFixed(r).replace(".","")),l=parseInt(t.toFixed(r).replace(".",""));return i%l/Math.pow(10,r)}class Ts extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==W.number){const i=this._getOrReturnCtx(t);return q(i,{code:F.invalid_type,expected:W.number,received:i.parsedType}),se}let s;const r=new lt;for(const i of this._def.checks)i.kind==="int"?me.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),q(s,{code:F.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),q(s,{code:F.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),q(s,{code:F.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):i.kind==="multipleOf"?qS(t.data,i.value)!==0&&(s=this._getOrReturnCtx(t,s),q(s,{code:F.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),q(s,{code:F.not_finite,message:i.message}),r.dirty()):me.assertNever(i);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,J.toString(n))}gt(t,n){return this.setLimit("min",t,!1,J.toString(n))}lte(t,n){return this.setLimit("max",t,!0,J.toString(n))}lt(t,n){return this.setLimit("max",t,!1,J.toString(n))}setLimit(t,n,s,r){return new Ts({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:J.toString(r)}]})}_addCheck(t){return new Ts({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:J.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:J.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:J.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:J.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:J.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:J.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:J.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:J.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:J.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&me.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Ts.create=e=>new Ts({checks:[],typeName:te.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...le(e)});class Os extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==W.bigint){const i=this._getOrReturnCtx(t);return q(i,{code:F.invalid_type,expected:W.bigint,received:i.parsedType}),se}let s;const r=new lt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),q(s,{code:F.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),q(s,{code:F.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),q(s,{code:F.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):me.assertNever(i);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,J.toString(n))}gt(t,n){return this.setLimit("min",t,!1,J.toString(n))}lte(t,n){return this.setLimit("max",t,!0,J.toString(n))}lt(t,n){return this.setLimit("max",t,!1,J.toString(n))}setLimit(t,n,s,r){return new Os({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:J.toString(r)}]})}_addCheck(t){return new Os({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:J.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:J.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:J.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:J.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:J.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Os.create=e=>{var t;return new Os({checks:[],typeName:te.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...le(e)})};class Vi extends ce{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==W.boolean){const s=this._getOrReturnCtx(t);return q(s,{code:F.invalid_type,expected:W.boolean,received:s.parsedType}),se}return pt(t.data)}}Vi.create=e=>new Vi({typeName:te.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...le(e)});class ur extends ce{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==W.date){const i=this._getOrReturnCtx(t);return q(i,{code:F.invalid_type,expected:W.date,received:i.parsedType}),se}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return q(i,{code:F.invalid_date}),se}const s=new lt;let r;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(r=this._getOrReturnCtx(t,r),q(r,{code:F.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(r=this._getOrReturnCtx(t,r),q(r,{code:F.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):me.assertNever(i);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ur({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:J.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:J.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}ur.create=e=>new ur({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:te.ZodDate,...le(e)});class Jo extends ce{_parse(t){if(this._getType(t)!==W.symbol){const s=this._getOrReturnCtx(t);return q(s,{code:F.invalid_type,expected:W.symbol,received:s.parsedType}),se}return pt(t.data)}}Jo.create=e=>new Jo({typeName:te.ZodSymbol,...le(e)});class Ui extends ce{_parse(t){if(this._getType(t)!==W.undefined){const s=this._getOrReturnCtx(t);return q(s,{code:F.invalid_type,expected:W.undefined,received:s.parsedType}),se}return pt(t.data)}}Ui.create=e=>new Ui({typeName:te.ZodUndefined,...le(e)});class zi extends ce{_parse(t){if(this._getType(t)!==W.null){const s=this._getOrReturnCtx(t);return q(s,{code:F.invalid_type,expected:W.null,received:s.parsedType}),se}return pt(t.data)}}zi.create=e=>new zi({typeName:te.ZodNull,...le(e)});class ua extends ce{constructor(){super(...arguments),this._any=!0}_parse(t){return pt(t.data)}}ua.create=e=>new ua({typeName:te.ZodAny,...le(e)});class nr extends ce{constructor(){super(...arguments),this._unknown=!0}_parse(t){return pt(t.data)}}nr.create=e=>new nr({typeName:te.ZodUnknown,...le(e)});class Zn extends ce{_parse(t){const n=this._getOrReturnCtx(t);return q(n,{code:F.invalid_type,expected:W.never,received:n.parsedType}),se}}Zn.create=e=>new Zn({typeName:te.ZodNever,...le(e)});class Yo extends ce{_parse(t){if(this._getType(t)!==W.undefined){const s=this._getOrReturnCtx(t);return q(s,{code:F.invalid_type,expected:W.void,received:s.parsedType}),se}return pt(t.data)}}Yo.create=e=>new Yo({typeName:te.ZodVoid,...le(e)});class an extends ce{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),r=this._def;if(n.parsedType!==W.array)return q(n,{code:F.invalid_type,expected:W.array,received:n.parsedType}),se;if(r.exactLength!==null){const l=n.data.length>r.exactLength.value,o=n.data.length<r.exactLength.value;(l||o)&&(q(n,{code:l?F.too_big:F.too_small,minimum:o?r.exactLength.value:void 0,maximum:l?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(q(n,{code:F.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(q(n,{code:F.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((l,o)=>r.type._parseAsync(new kn(n,l,n.path,o)))).then(l=>lt.mergeArray(s,l));const i=[...n.data].map((l,o)=>r.type._parseSync(new kn(n,l,n.path,o)));return lt.mergeArray(s,i)}get element(){return this._def.type}min(t,n){return new an({...this._def,minLength:{value:t,message:J.toString(n)}})}max(t,n){return new an({...this._def,maxLength:{value:t,message:J.toString(n)}})}length(t,n){return new an({...this._def,exactLength:{value:t,message:J.toString(n)}})}nonempty(t){return this.min(1,t)}}an.create=(e,t)=>new an({type:e,minLength:null,maxLength:null,exactLength:null,typeName:te.ZodArray,...le(t)});function Er(e){if(e instanceof Ce){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=wn.create(Er(s))}return new Ce({...e._def,shape:()=>t})}else return e instanceof an?new an({...e._def,type:Er(e.element)}):e instanceof wn?wn.create(Er(e.unwrap())):e instanceof Rs?Rs.create(Er(e.unwrap())):e instanceof Sn?Sn.create(e.items.map(t=>Er(t))):e}class Ce extends ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=me.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==W.object){const d=this._getOrReturnCtx(t);return q(d,{code:F.invalid_type,expected:W.object,received:d.parsedType}),se}const{status:s,ctx:r}=this._processInputParams(t),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Zn&&this._def.unknownKeys==="strip"))for(const d in r.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],h=r.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new kn(r,h,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof Zn){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(d==="strict")o.length>0&&(q(r,{code:F.unrecognized_keys,keys:o}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const h=r.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new kn(r,h,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,m=await u.value;d.push({key:h,value:m,alwaysSet:u.alwaysSet})}return d}).then(d=>lt.mergeObjectSync(s,d)):lt.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return J.errToObj,new Ce({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var r,i,l,o;const c=(l=(i=(r=this._def).errorMap)===null||i===void 0?void 0:i.call(r,n,s).message)!==null&&l!==void 0?l:s.defaultError;return n.code==="unrecognized_keys"?{message:(o=J.errToObj(t).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new Ce({...this._def,unknownKeys:"strip"})}passthrough(){return new Ce({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ce({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ce({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:te.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Ce({...this._def,catchall:t})}pick(t){const n={};return me.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new Ce({...this._def,shape:()=>n})}omit(t){const n={};return me.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new Ce({...this._def,shape:()=>n})}deepPartial(){return Er(this)}partial(t){const n={};return me.objectKeys(this.shape).forEach(s=>{const r=this.shape[s];t&&!t[s]?n[s]=r:n[s]=r.optional()}),new Ce({...this._def,shape:()=>n})}required(t){const n={};return me.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof wn;)i=i._def.innerType;n[s]=i}}),new Ce({...this._def,shape:()=>n})}keyof(){return mv(me.objectKeys(this.shape))}}Ce.create=(e,t)=>new Ce({shape:()=>e,unknownKeys:"strip",catchall:Zn.create(),typeName:te.ZodObject,...le(t)});Ce.strictCreate=(e,t)=>new Ce({shape:()=>e,unknownKeys:"strict",catchall:Zn.create(),typeName:te.ZodObject,...le(t)});Ce.lazycreate=(e,t)=>new Ce({shape:e,unknownKeys:"strip",catchall:Zn.create(),typeName:te.ZodObject,...le(t)});class Hi extends ce{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function r(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new Tt(o.ctx.common.issues));return q(n,{code:F.invalid_union,unionErrors:l}),se}if(n.common.async)return Promise.all(s.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(r);{let i;const l=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new Tt(c));return q(n,{code:F.invalid_union,unionErrors:o}),se}}get options(){return this._def.options}}Hi.create=(e,t)=>new Hi({options:e,typeName:te.ZodUnion,...le(t)});const Pn=e=>e instanceof Wi?Pn(e.schema):e instanceof on?Pn(e.innerType()):e instanceof Qi?[e.value]:e instanceof Ls?e.options:e instanceof Zi?me.objectValues(e.enum):e instanceof Gi?Pn(e._def.innerType):e instanceof Ui?[void 0]:e instanceof zi?[null]:e instanceof wn?[void 0,...Pn(e.unwrap())]:e instanceof Rs?[null,...Pn(e.unwrap())]:e instanceof Tf||e instanceof Yi?Pn(e.unwrap()):e instanceof Ji?Pn(e._def.innerType):[];class Lc extends ce{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==W.object)return q(n,{code:F.invalid_type,expected:W.object,received:n.parsedType}),se;const s=this.discriminator,r=n.data[s],i=this.optionsMap.get(r);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(q(n,{code:F.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const r=new Map;for(const i of n){const l=Pn(i.shape[t]);if(!l.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of l){if(r.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);r.set(o,i)}}return new Lc({typeName:te.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:r,...le(s)})}}function dm(e,t){const n=ms(e),s=ms(t);if(e===t)return{valid:!0,data:e};if(n===W.object&&s===W.object){const r=me.objectKeys(t),i=me.objectKeys(e).filter(o=>r.indexOf(o)!==-1),l={...e,...t};for(const o of i){const c=dm(e[o],t[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(n===W.array&&s===W.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let i=0;i<e.length;i++){const l=e[i],o=t[i],c=dm(l,o);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return n===W.date&&s===W.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class qi extends ce{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),r=(i,l)=>{if(om(i)||om(l))return se;const o=dm(i.value,l.value);return o.valid?((cm(i)||cm(l))&&n.dirty(),{status:n.value,value:o.data}):(q(s,{code:F.invalid_intersection_types}),se)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,l])=>r(i,l)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}qi.create=(e,t,n)=>new qi({left:e,right:t,typeName:te.ZodIntersection,...le(n)});class Sn extends ce{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==W.array)return q(s,{code:F.invalid_type,expected:W.array,received:s.parsedType}),se;if(s.data.length<this._def.items.length)return q(s,{code:F.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),se;!this._def.rest&&s.data.length>this._def.items.length&&(q(s,{code:F.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...s.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new kn(s,l,s.path,o)):null}).filter(l=>!!l);return s.common.async?Promise.all(i).then(l=>lt.mergeArray(n,l)):lt.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Sn({...this._def,rest:t})}}Sn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sn({items:e,typeName:te.ZodTuple,rest:null,...le(t)})};class Ki extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==W.object)return q(s,{code:F.invalid_type,expected:W.object,received:s.parsedType}),se;const r=[],i=this._def.keyType,l=this._def.valueType;for(const o in s.data)r.push({key:i._parse(new kn(s,o,s.path,o)),value:l._parse(new kn(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?lt.mergeObjectAsync(n,r):lt.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof ce?new Ki({keyType:t,valueType:n,typeName:te.ZodRecord,...le(s)}):new Ki({keyType:tn.create(),valueType:t,typeName:te.ZodRecord,...le(n)})}}class Xo extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==W.map)return q(s,{code:F.invalid_type,expected:W.map,received:s.parsedType}),se;const r=this._def.keyType,i=this._def.valueType,l=[...s.data.entries()].map(([o,c],d)=>({key:r._parse(new kn(s,o,s.path,[d,"key"])),value:i._parse(new kn(s,c,s.path,[d,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return se;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return se;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}}}}Xo.create=(e,t,n)=>new Xo({valueType:t,keyType:e,typeName:te.ZodMap,...le(n)});class mr extends ce{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==W.set)return q(s,{code:F.invalid_type,expected:W.set,received:s.parsedType}),se;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(q(s,{code:F.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(q(s,{code:F.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return se;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const o=[...s.data.values()].map((c,d)=>i._parse(new kn(s,c,s.path,d)));return s.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(t,n){return new mr({...this._def,minSize:{value:t,message:J.toString(n)}})}max(t,n){return new mr({...this._def,maxSize:{value:t,message:J.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}mr.create=(e,t)=>new mr({valueType:e,minSize:null,maxSize:null,typeName:te.ZodSet,...le(t)});class Yr extends ce{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==W.function)return q(n,{code:F.invalid_type,expected:W.function,received:n.parsedType}),se;function s(o,c){return Zo({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Qo(),da].filter(d=>!!d),issueData:{code:F.invalid_arguments,argumentsError:c}})}function r(o,c){return Zo({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Qo(),da].filter(d=>!!d),issueData:{code:F.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof ma){const o=this;return pt(async function(...c){const d=new Tt([]),u=await o._def.args.parseAsync(c,i).catch(g=>{throw d.addIssue(s(c,g)),d}),h=await Reflect.apply(l,this,u);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw d.addIssue(r(h,g)),d})})}else{const o=this;return pt(function(...c){const d=o._def.args.safeParse(c,i);if(!d.success)throw new Tt([s(c,d.error)]);const u=Reflect.apply(l,this,d.data),h=o._def.returns.safeParse(u,i);if(!h.success)throw new Tt([r(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Yr({...this._def,args:Sn.create(t).rest(nr.create())})}returns(t){return new Yr({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new Yr({args:t||Sn.create([]).rest(nr.create()),returns:n||nr.create(),typeName:te.ZodFunction,...le(s)})}}class Wi extends ce{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Wi.create=(e,t)=>new Wi({getter:e,typeName:te.ZodLazy,...le(t)});class Qi extends ce{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return q(n,{received:n.data,code:F.invalid_literal,expected:this._def.value}),se}return{status:"valid",value:t.data}}get value(){return this._def.value}}Qi.create=(e,t)=>new Qi({value:e,typeName:te.ZodLiteral,...le(t)});function mv(e,t){return new Ls({values:e,typeName:te.ZodEnum,...le(t)})}class Ls extends ce{constructor(){super(...arguments),za.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return q(n,{expected:me.joinValues(s),received:n.parsedType,code:F.invalid_type}),se}if(Go(this,za)||ov(this,za,new Set(this._def.values)),!Go(this,za).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return q(n,{received:n.data,code:F.invalid_enum_value,options:s}),se}return pt(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Ls.create(t,{...this._def,...n})}exclude(t,n=this._def){return Ls.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}za=new WeakMap;Ls.create=mv;class Zi extends ce{constructor(){super(...arguments),Ha.set(this,void 0)}_parse(t){const n=me.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==W.string&&s.parsedType!==W.number){const r=me.objectValues(n);return q(s,{expected:me.joinValues(r),received:s.parsedType,code:F.invalid_type}),se}if(Go(this,Ha)||ov(this,Ha,new Set(me.getValidEnumValues(this._def.values))),!Go(this,Ha).has(t.data)){const r=me.objectValues(n);return q(s,{received:s.data,code:F.invalid_enum_value,options:r}),se}return pt(t.data)}get enum(){return this._def.values}}Ha=new WeakMap;Zi.create=(e,t)=>new Zi({values:e,typeName:te.ZodNativeEnum,...le(t)});class ma extends ce{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==W.promise&&n.common.async===!1)return q(n,{code:F.invalid_type,expected:W.promise,received:n.parsedType}),se;const s=n.parsedType===W.promise?n.data:Promise.resolve(n.data);return pt(s.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ma.create=(e,t)=>new ma({type:e,typeName:te.ZodPromise,...le(t)});class on extends ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),r=this._def.effect||null,i={addIssue:l=>{q(s,l),l.fatal?n.abort():n.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),r.type==="preprocess"){const l=r.transform(s.data,i);if(s.common.async)return Promise.resolve(l).then(async o=>{if(n.value==="aborted")return se;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?se:c.status==="dirty"||n.value==="dirty"?Br(c.value):c});{if(n.value==="aborted")return se;const o=this._def.schema._parseSync({data:l,path:s.path,parent:s});return o.status==="aborted"?se:o.status==="dirty"||n.value==="dirty"?Br(o.value):o}}if(r.type==="refinement"){const l=o=>{const c=r.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?se:(o.status==="dirty"&&n.dirty(),l(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?se:(o.status==="dirty"&&n.dirty(),l(o.value).then(()=>({status:n.value,value:o.value}))))}if(r.type==="transform")if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Fi(l))return l;const o=r.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>Fi(l)?Promise.resolve(r.transform(l.value,i)).then(o=>({status:n.value,value:o})):l);me.assertNever(r)}}on.create=(e,t,n)=>new on({schema:e,typeName:te.ZodEffects,effect:t,...le(n)});on.createWithPreprocess=(e,t,n)=>new on({schema:t,effect:{type:"preprocess",transform:e},typeName:te.ZodEffects,...le(n)});class wn extends ce{_parse(t){return this._getType(t)===W.undefined?pt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}wn.create=(e,t)=>new wn({innerType:e,typeName:te.ZodOptional,...le(t)});class Rs extends ce{_parse(t){return this._getType(t)===W.null?pt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Rs.create=(e,t)=>new Rs({innerType:e,typeName:te.ZodNullable,...le(t)});class Gi extends ce{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===W.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gi.create=(e,t)=>new Gi({innerType:e,typeName:te.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...le(t)});class Ji extends ce{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Bi(r)?r.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Tt(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Tt(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Ji.create=(e,t)=>new Ji({innerType:e,typeName:te.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...le(t)});class ec extends ce{_parse(t){if(this._getType(t)!==W.nan){const s=this._getOrReturnCtx(t);return q(s,{code:F.invalid_type,expected:W.nan,received:s.parsedType}),se}return{status:"valid",value:t.data}}}ec.create=e=>new ec({typeName:te.ZodNaN,...le(e)});const KS=Symbol("zod_brand");class Tf extends ce{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class ml extends ce{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?se:i.status==="dirty"?(n.dirty(),Br(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?se:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(t,n){return new ml({in:t,out:n,typeName:te.ZodPipeline})}}class Yi extends ce{_parse(t){const n=this._def.innerType._parse(t),s=r=>(Fi(r)&&(r.value=Object.freeze(r.value)),r);return Bi(n)?n.then(r=>s(r)):s(n)}unwrap(){return this._def.innerType}}Yi.create=(e,t)=>new Yi({innerType:e,typeName:te.ZodReadonly,...le(t)});function fv(e,t={},n){return e?ua.create().superRefine((s,r)=>{var i,l;if(!e(s)){const o=typeof t=="function"?t(s):typeof t=="string"?{message:t}:t,c=(l=(i=o.fatal)!==null&&i!==void 0?i:n)!==null&&l!==void 0?l:!0,d=typeof o=="string"?{message:o}:o;r.addIssue({code:"custom",...d,fatal:c})}}):ua.create()}const WS={object:Ce.lazycreate};var te;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(te||(te={}));const QS=(e,t={message:`Input not instance of ${e.name}`})=>fv(n=>n instanceof e,t),hv=tn.create,pv=Ts.create,ZS=ec.create,GS=Os.create,gv=Vi.create,JS=ur.create,YS=Jo.create,XS=Ui.create,e5=zi.create,t5=ua.create,n5=nr.create,s5=Zn.create,r5=Yo.create,a5=an.create,i5=Ce.create,l5=Ce.strictCreate,o5=Hi.create,c5=Lc.create,d5=qi.create,u5=Sn.create,m5=Ki.create,f5=Xo.create,h5=mr.create,p5=Yr.create,g5=Wi.create,x5=Qi.create,y5=Ls.create,v5=Zi.create,w5=ma.create,sg=on.create,b5=wn.create,j5=Rs.create,N5=on.createWithPreprocess,k5=ml.create,S5=()=>hv().optional(),_5=()=>pv().optional(),E5=()=>gv().optional(),C5={string:e=>tn.create({...e,coerce:!0}),number:e=>Ts.create({...e,coerce:!0}),boolean:e=>Vi.create({...e,coerce:!0}),bigint:e=>Os.create({...e,coerce:!0}),date:e=>ur.create({...e,coerce:!0})},A5=se;var ge=Object.freeze({__proto__:null,defaultErrorMap:da,setErrorMap:AS,getErrorMap:Qo,makeIssue:Zo,EMPTY_PATH:PS,addIssueToContext:q,ParseStatus:lt,INVALID:se,DIRTY:Br,OK:pt,isAborted:om,isDirty:cm,isValid:Fi,isAsync:Bi,get util(){return me},get objectUtil(){return lm},ZodParsedType:W,getParsedType:ms,ZodType:ce,datetimeRegex:uv,ZodString:tn,ZodNumber:Ts,ZodBigInt:Os,ZodBoolean:Vi,ZodDate:ur,ZodSymbol:Jo,ZodUndefined:Ui,ZodNull:zi,ZodAny:ua,ZodUnknown:nr,ZodNever:Zn,ZodVoid:Yo,ZodArray:an,ZodObject:Ce,ZodUnion:Hi,ZodDiscriminatedUnion:Lc,ZodIntersection:qi,ZodTuple:Sn,ZodRecord:Ki,ZodMap:Xo,ZodSet:mr,ZodFunction:Yr,ZodLazy:Wi,ZodLiteral:Qi,ZodEnum:Ls,ZodNativeEnum:Zi,ZodPromise:ma,ZodEffects:on,ZodTransformer:on,ZodOptional:wn,ZodNullable:Rs,ZodDefault:Gi,ZodCatch:Ji,ZodNaN:ec,BRAND:KS,ZodBranded:Tf,ZodPipeline:ml,ZodReadonly:Yi,custom:fv,Schema:ce,ZodSchema:ce,late:WS,get ZodFirstPartyTypeKind(){return te},coerce:C5,any:t5,array:a5,bigint:GS,boolean:gv,date:JS,discriminatedUnion:c5,effect:sg,enum:y5,function:p5,instanceof:QS,intersection:d5,lazy:g5,literal:x5,map:f5,nan:ZS,nativeEnum:v5,never:s5,null:e5,nullable:j5,number:pv,object:i5,oboolean:E5,onumber:_5,optional:b5,ostring:S5,pipeline:k5,preprocess:N5,promise:w5,record:m5,set:h5,strictObject:l5,string:hv,symbol:YS,transformer:sg,tuple:u5,undefined:XS,union:o5,unknown:n5,void:r5,NEVER:A5,ZodIssueCode:F,quotelessJson:CS,ZodError:Tt});const Of=al((e,t)=>({patients:[],currentPatient:null,searchQuery:"",loadPatients:async()=>{try{const n=await D.patients.orderBy("createdAt").reverse().toArray();console.log("Loaded patients from database:",n.length,n),e({patients:n})}catch(n){console.error("Error loading patients:",n)}},searchPatients:async n=>{if(!n.trim())return t().patients;try{return await D.patients.filter(r=>r.givenName.toLowerCase().includes(n.toLowerCase())||r.familyName.toLowerCase().includes(n.toLowerCase())||r.phone.includes(n)).toArray()}catch(s){return console.error("Error searching patients:",s),[]}},addPatient:async n=>{try{const{rec:s,candidates:r}=await Pp({givenName:n.givenName,familyName:n.familyName,phone:n.phone,dob:new Date(n.dob),sex:n.sex,address:n.address,state:n.state,lga:n.lga});if(r.length>0)throw new Error(`DUPLICATES_FOUND:${JSON.stringify({patient:s,candidates:r})}`);const i={...s,photoUrl:n.photoUrl};await D.patients.add(i),console.log("Patient added to database:",i),await $0(Vn(new Date),"registrations");const l={id:Be(),patientId:i.id,stage:"registration",position:await D.queue.count()+1,status:"waiting",updatedAt:new Date};return await D.queue.add(l),console.log("Queue item added:",l),await Gr("system","create","patient",i.id),await t().loadPatients(),console.log("Patients list refreshed"),i.id}catch(s){throw console.error("Error adding patient:",s),s}},updatePatient:async(n,s)=>{try{await D.patients.update(n,{...s,updatedAt:new Date}),await Gr("system","update","patient",n),t().loadPatients()}catch(r){throw console.error("Error updating patient:",r),r}},setCurrentPatient:n=>{e({currentPatient:n})},setSearchQuery:n=>{e({searchQuery:n})},startVisit:async(n,s)=>{try{const r={id:Be(),patientId:n,startedAt:new Date,siteName:s,status:"open"};return await D.visits.add(r),await Gr("system","create","visit",r.id),r.id}catch(r){throw console.error("Error starting visit:",r),r}},checkForDuplicates:async n=>Pp({givenName:n.givenName,familyName:n.familyName,phone:n.phone,dob:new Date(n.dob),sex:n.sex,address:n.address,state:n.state,lga:n.lga})}));function P5({newPatient:e,candidates:t,onResolve:n,onCancel:s}){const{currentUser:r}=De(),[i,l]=x.useState(null),[o,c]=x.useState(!1),d=async()=>{if(!(!i||!r)){c(!0);try{await i2(i,e.id,r.id),n("merge",i)}catch(g){console.error("Error merging patients:",g),alert("Failed to merge patients")}finally{c(!1)}}},u=g=>{let j=0;return g.phone&&e.phone&&g.phone.replace(/\D/g,"")===e.phone.replace(/\D/g,"")&&(j+=50),g.givenName.toLowerCase()===e.givenName.toLowerCase()&&(j+=20),g.familyName.toLowerCase()===e.familyName.toLowerCase()&&(j+=20),g.dob===e.dob&&(j+=30),g.sex===e.sex&&(j+=10),j},h=g=>g>=70?{label:"High Match",color:"bg-red-100 text-red-800"}:g>=40?{label:"Possible Match",color:"bg-yellow-100 text-yellow-800"}:{label:"Low Match",color:"bg-gray-100 text-gray-800"},m=g=>g?g instanceof Date?g.toLocaleDateString():String(g):"";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ge,{className:"h-8 w-8 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Potential Duplicate Patient"}),a.jsx("p",{className:"text-gray-600",children:"We found similar patients. Please review and choose an action."})]})]}),a.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:a.jsx(_f,{className:"h-6 w-6 text-gray-600"})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"New Patient Being Registered"}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Name:"}),a.jsxs("div",{className:"text-blue-700",children:[e.givenName," ",e.familyName]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Phone:"}),a.jsx("div",{className:"text-blue-700",children:m(e.phone)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"DOB:"}),a.jsx("div",{className:"text-blue-700",children:m(e.dob)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Sex:"}),a.jsx("div",{className:"text-blue-700",children:m(e.sex)})]})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Existing Patients (",t.length," found)"]}),a.jsx("div",{className:"space-y-3",children:t.map(g=>{const j=u(g),v=h(j),w=i===g.id;return a.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${w?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"}`,onClick:()=>l(g.id),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(Qn,{className:"h-5 w-5 text-gray-500"})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:[g.givenName," ",g.familyName]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",g.id.slice(-8).toUpperCase()]})]})]}),a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.color}`,children:[v.label," (",j,"%)"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pc,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:g.phone===e.phone?"font-medium text-green-700":"text-gray-600",children:m(g.phone)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(kf,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:g.dob===e.dob?"font-medium text-green-700":"text-gray-600",children:m(g.dob)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-400",children:"Sex:"}),a.jsx("span",{className:g.sex===e.sex?"font-medium text-green-700":"text-gray-600",children:m(g.sex)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ac,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:g.state})]})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Registered: ",g.createdAt.toLocaleDateString()]})]},g.id)})})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>n("create_new"),className:"btn-secondary flex-1",children:"Create New Patient"}),a.jsx("button",{onClick:d,disabled:!i||o,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Merging...":"Use Selected Patient"})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Selecting an existing patient will link this registration to their record."})})]})})})}const xv=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],yv={Lagos:["Agege","Ajeromi-Ifelodun","Alimosho","Amuwo-Odofin","Apapa","Badagry","Epe","Eti-Osa","Ibeju-Lekki","Ifako-Ijaiye","Ikeja","Ikorodu","Kosofe","Lagos Island","Lagos Mainland","Mushin","Ojo","Oshodi-Isolo","Shomolu","Surulere"],Kano:["Ajingi","Albasu","Bagwai","Bebeji","Bichi","Bunkure","Dala","Dambatta","Dawakin Kudu","Dawakin Tofa","Doguwa","Fagge","Gabasawa","Garko","Garun Mallam","Gaya","Gezawa","Gwale","Gwarzo","Kabo","Kano Municipal","Karaye","Kibiya","Kiru","Kumbotso","Kunchi","Kura","Madobi","Makoda","Minjibir","Nasarawa","Rano","Rimin Gado","Rogo","Shanono","Sumaila","Takai","Tarauni","Tofa","Tsanyawa","Tudun Wada","Ungogo","Warawa","Wudil"],FCT:["Abaji","Bwari","Gwagwalada","Kuje","Municipal Area Council","Kwali"]};function Lf(e){const t=e.replace(/\D/g,"");return t.startsWith("234")?`+${t}`:t.startsWith("0")&&t.length===11?`+234${t.slice(1)}`:t.length===10?`+234${t}`:e}function I5(e){const t=Lf(e);return/^\+234[789]\d{9}$/.test(t)}const D5=ge.object({givenName:ge.string().min(1,"Given name is required"),familyName:ge.string().min(1,"Family name is required"),sex:ge.enum(["male","female","other"]),dob:ge.string().min(1,"Date of birth is required"),phone:ge.string().refine(I5,"Invalid Nigerian phone number"),address:ge.string().min(1,"Address is required"),state:ge.string().min(1,"State is required"),lga:ge.string().min(1,"LGA is required"),familyId:ge.string().optional()});function T5({onSuccess:e,onCancel:t}){const{t:n}=Yn(),{addPatient:s}=Of(),[r,i]=x.useState(!1),[l,o]=x.useState(null),[c,d]=x.useState(""),[u,h]=x.useState(!1),[m,g]=x.useState(null),{register:j,handleSubmit:v,watch:w,setValue:p,formState:{errors:f}}=Tc({resolver:Oc(D5)}),y=w("state"),N=yv[y]||[],b=E=>{var I;const _=(I=E.target.files)==null?void 0:I[0];if(_){const T=new FileReader;T.onload=L=>{var ee;const z=(ee=L.target)==null?void 0:ee.result,H=new Image;H.onload=()=>{const re=document.createElement("canvas"),ie=re.getContext("2d"),R=200;let{width:A,height:M}=H;A>M?A>R&&(M=M*R/A,A=R):M>R&&(A=A*R/M,M=R),re.width=A,re.height=M,ie==null||ie.drawImage(H,0,0,A,M);const oe=re.toDataURL("image/jpeg",.8);o(oe)},H.src=z},T.readAsDataURL(_)}},S=async E=>{i(!0),console.log("PatientForm: Submitting patient data:",E);try{const _=Lf(E.phone);console.log("PatientForm: Formatted phone:",_);const I={...E,phone:_,photoUrl:l||void 0},T=await s(I);console.log("PatientForm: Patient created with ID:",T),e==null||e(T)}catch(_){if(console.error("Error adding patient:",_),_.message.startsWith("DUPLICATES_FOUND:")){const I=JSON.parse(_.message.replace("DUPLICATES_FOUND:",""));g(I),h(!0)}else alert("Failed to register patient: "+_.message)}finally{i(!1)}},k=async(E,_)=>{if(h(!1),E==="create_new"&&m)try{const I=await s({...m.patient,photoUrl:l||void 0,givenName:m.patient.givenName+" (New)"});e==null||e(I)}catch(I){console.error("Error creating new patient:",I),alert("Failed to create new patient")}else E==="merge"&&_&&(e==null||e(_));g(null)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Qn,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n("patient.register")})]}),a.jsxs("form",{onSubmit:v(S),className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsxs("div",{className:"relative",children:[l?a.jsx("img",{src:l,alt:"Patient",className:"w-32 h-32 rounded-full object-cover border-4 border-gray-200"}):a.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-100 flex items-center justify-center border-4 border-gray-200",children:a.jsx(Qn,{className:"h-16 w-16 text-gray-400"})}),a.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white rounded-full p-2 cursor-pointer hover:bg-primary/90 transition-colors touch-target",children:[a.jsx(V0,{className:"h-5 w-5"}),a.jsx("input",{type:"file",accept:"image/*",capture:"user",onChange:b,className:"hidden"})]})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Tap camera to add photo"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("patient.givenName")," *"]}),a.jsx("input",{...j("givenName"),className:"input-field",placeholder:"Enter given name"}),f.givenName&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.givenName.message})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("patient.familyName")," *"]}),a.jsx("input",{...j("familyName"),className:"input-field",placeholder:"Enter family name"}),f.familyName&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.familyName.message})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sex *"}),a.jsxs("select",{...j("sex"),className:"input-field",children:[a.jsx("option",{value:"",children:"Select sex"}),a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]}),f.sex&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.sex.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),a.jsx("input",{...j("dob"),type:"date",className:"input-field",max:new Date().toISOString().split("T")[0]}),f.dob&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.dob.message})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("patient.phone")," *"]}),a.jsx("input",{...j("phone"),type:"tel",className:"input-field",placeholder:"08012345678 or +2348012345678"}),f.phone&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.phone.message})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("patient.address")," *"]}),a.jsx("textarea",{...j("address"),className:"input-field",rows:3,placeholder:"Enter full address"}),f.address&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.address.message})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("patient.state")," *"]}),a.jsxs("select",{...j("state"),onChange:E=>{d(E.target.value),p("lga","")},className:"input-field",children:[a.jsx("option",{value:"",children:"Select state"}),xv.map(E=>a.jsx("option",{value:E,children:E},E))]}),f.state&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.state.message})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n("patient.lga")," *"]}),a.jsxs("select",{...j("lga"),className:"input-field",disabled:!y,children:[a.jsx("option",{value:"",children:"Select LGA"}),N.map(E=>a.jsx("option",{value:E,children:E},E))]}),f.lga&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.lga.message})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Family ID (Optional)"}),a.jsx("input",{...j("familyId"),className:"input-field",placeholder:"Link to existing family member"})]}),a.jsxs("div",{className:"flex space-x-4 pt-6",children:[a.jsx(ca,{audioKey:"action.register",fallbackText:"Register Patient",type:"submit",disabled:r,className:"btn-primary flex-1",children:r?"Registering...":"Register Patient"}),t&&a.jsx(ca,{audioKey:"action.cancel",fallbackText:"Cancel",type:"button",onClick:t,className:"btn-secondary flex-1",children:"Cancel"})]})]})]})}),u&&m&&a.jsx(P5,{newPatient:m.patient,candidates:m.candidates,onResolve:k,onCancel:()=>{h(!1),g(null),i(!1)}})]})}function O5(){const e=cn(),t=s=>{e("/",{state:{message:"Patient registered successfully!",patientId:s}})},n=()=>{e("/")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>e("/"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Patient Registration"}),a.jsx("p",{className:"text-gray-600",children:"Register a new patient for today's clinic"})]})]}),a.jsx(T5,{onSuccess:t,onCancel:n})]})}function L5(){const{t:e}=Yn(),t=cn(),[n,s]=x.useState([]),[r,i]=x.useState([]),[l,o]=x.useState(""),[c,d]=x.useState(!0);x.useEffect(()=>{u()},[]),x.useEffect(()=>{if(l.trim()){const m=n.filter(g=>g.givenName.toLowerCase().includes(l.toLowerCase())||g.familyName.toLowerCase().includes(l.toLowerCase())||g.phone.includes(l));i(m)}else i(n)},[l,n]);const u=async()=>{try{console.log("Loading patients...");const m=await D.patients.orderBy("createdAt").reverse().toArray();console.log("Loaded patients:",m.length),s(m),i(m)}catch(m){console.error("Error loading patients:",m)}finally{d(!1)}},h=m=>{const g=new Date(m),j=new Date;let v=j.getFullYear()-g.getFullYear();const w=j.getMonth()-g.getMonth();return(w<0||w===0&&j.getDate()<g.getDate())&&v--,v};return c?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading patients..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Patients"}),a.jsx("p",{className:"text-gray-600",children:"Manage patient records and information"})]}),a.jsxs(As,{to:"/register",className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx(qo,{className:"h-5 w-5"}),a.jsx("span",{children:"Register Patient"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zo,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:l,onChange:m=>o(m.target.value),className:"input-field pl-10",placeholder:"Search patients by name or phone..."})]}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Qn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l?"No patients found":"No patients registered"}),a.jsx("p",{className:"text-gray-600 mb-6",children:l?"Try adjusting your search terms":"Get started by registering your first patient"}),!l&&a.jsx(As,{to:"/register",className:"btn-primary",children:"Register Patient"})]}):r.map(m=>a.jsx("div",{className:"card hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t(`/patients/${m.id}`),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:m.photoUrl?a.jsx("img",{src:m.photoUrl,alt:`${m.givenName} ${m.familyName}`,className:"w-16 h-16 rounded-full object-cover"}):a.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-medium text-gray-600",children:[m.givenName[0],m.familyName[0]]})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 truncate",children:[m.givenName," ",m.familyName]}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:m.sex})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-6 space-y-1 sm:space-y-0 text-sm text-gray-600",children:[a.jsx("div",{className:"flex items-center space-x-1",children:a.jsxs("span",{children:["Age: ",h(m.dob)]})}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Pc,{className:"h-4 w-4"}),a.jsx("span",{children:m.phone})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ac,{className:"h-4 w-4"}),a.jsxs("span",{children:[m.state,", ",m.lga]})]})]})]}),a.jsxs("div",{className:"flex-shrink-0 text-right",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"ID"}),a.jsx("p",{className:"text-sm font-mono text-gray-700",children:m.id.slice(-8).toUpperCase()})]})]})},m.id))})]})}function R5(e,t){if(e<=0||t<=0)return 0;const n=e/100;return Math.round(t/(n*n)*10)/10}function M5(e){const t=[];return(e.systolic&&e.systolic>=140||e.diastolic&&e.diastolic>=90)&&t.push("hypertension"),e.tempC&&e.tempC>=38&&t.push("fever"),e.pulseBpm&&e.pulseBpm>=100&&t.push("tachycardia"),e.bmi&&(e.bmi<18.5?t.push("underweight"):e.bmi>=30&&t.push("obese")),t}function Rf(e){switch(e){case"hypertension":case"fever":case"tachycardia":return"text-red-600 bg-red-50";case"underweight":case"obese":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}}function Mf(e){switch(e){case"hypertension":return"High BP";case"fever":return"Fever";case"tachycardia":return"High HR";case"underweight":return"Underweight";case"obese":return"Obese";default:return e}}function $5(){const{id:e}=jc(),t=cn(),{t:n}=Yn(),[s,r]=x.useState(null),[i,l]=x.useState([]),[o,c]=x.useState([]),[d,u]=x.useState([]),[h,m]=x.useState([]),[g,j]=x.useState(!0);x.useEffect(()=>{e&&v(e)},[e]);const v=async f=>{try{const[y,N,b,S,k]=await Promise.all([D.patients.get(f),D.visits.where("patientId").equals(f).reverse().toArray(),D.vitals.where("patientId").equals(f).reverse().toArray(),D.consultations.where("patientId").equals(f).reverse().toArray(),D.dispenses.where("patientId").equals(f).reverse().toArray()]);r(y||null),l(N),c(b),u(S),m(k)}catch(y){console.error("Error loading patient data:",y)}finally{j(!1)}},w=f=>{const y=new Date(f),N=new Date;let b=N.getFullYear()-y.getFullYear();const S=N.getMonth()-y.getMonth();return(S<0||S===0&&N.getDate()<y.getDate())&&b--,b},p=async()=>{if(s)try{const f={id:crypto.randomUUID(),patientId:s.id,startedAt:new Date,siteName:"Mobile Clinic",status:"open"};await D.visits.add(f),t(`/vitals/${f.id}`)}catch(f){console.error("Error starting visit:",f)}};return g?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading patient..."})]})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/patients"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Patient Details"}),a.jsx("p",{className:"text-gray-600",children:"View patient information and medical history"})]}),a.jsxs("button",{onClick:p,className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx(dr,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Visit"})]})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"flex-shrink-0",children:s.photoUrl?a.jsx("img",{src:s.photoUrl,alt:`${s.givenName} ${s.familyName}`,className:"w-24 h-24 rounded-full object-cover"}):a.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsxs("span",{className:"text-2xl font-medium text-gray-600",children:[s.givenName[0],s.familyName[0]]})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s.givenName," ",s.familyName]}),a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:s.sex})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[a.jsx(kf,{className:"h-4 w-4"}),a.jsxs("span",{children:["Age: ",w(s.dob)," (",new Date(s.dob).toLocaleDateString(),")"]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[a.jsx(Pc,{className:"h-4 w-4"}),a.jsx("span",{children:s.phone})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[a.jsx(Ac,{className:"h-4 w-4"}),a.jsxs("span",{children:[s.state,", ",s.lga]})]}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("strong",{children:"ID:"})," ",s.id.slice(-8).toUpperCase()]})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Address:"})," ",s.address]})})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Nn,{className:"h-5 w-5 text-green-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Vitals"})]}),o.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No vitals recorded"}):a.jsx("div",{className:"space-y-3",children:o.slice(0,3).map(f=>a.jsxs("div",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("div",{className:"text-sm text-gray-600",children:f.takenAt.toLocaleDateString()}),a.jsxs("div",{className:"text-sm",children:[f.systolic&&f.diastolic&&a.jsxs("span",{children:["BP: ",f.systolic,"/",f.diastolic," "]}),f.pulseBpm&&a.jsxs("span",{children:["HR: ",f.pulseBpm," "]}),f.bmi&&a.jsxs("span",{children:["BMI: ",f.bmi]})]}),f.flags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:f.flags.map(y=>a.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${Rf(y)}`,children:Mf(y)},y))})]},f.id))})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Vs,{className:"h-5 w-5 text-purple-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Consultations"})]}),d.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No consultations recorded"}):a.jsx("div",{className:"space-y-3",children:d.slice(0,3).map(f=>a.jsxs("div",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("div",{className:"text-sm text-gray-600",children:f.createdAt.toLocaleDateString()}),a.jsx("div",{className:"text-sm font-medium",children:f.providerName}),f.provisionalDx.length>0&&a.jsx("div",{className:"text-sm text-gray-700",children:f.provisionalDx.slice(0,2).join(", ")})]},f.id))})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(qt,{className:"h-5 w-5 text-orange-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Medications"})]}),h.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No medications dispensed"}):a.jsx("div",{className:"space-y-3",children:h.slice(0,3).map(f=>a.jsxs("div",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("div",{className:"text-sm text-gray-600",children:f.dispensedAt.toLocaleDateString()}),a.jsx("div",{className:"text-sm font-medium",children:f.itemName}),a.jsxs("div",{className:"text-sm text-gray-700",children:[f.dosage,"  ",f.qty]})]},f.id))})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Visit History"}),i.length===0?a.jsx("p",{className:"text-gray-500",children:"No visits recorded"}):a.jsx("div",{className:"space-y-4",children:i.map(f=>a.jsx("div",{className:"border rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium",children:[f.startedAt.toLocaleDateString()," - ",f.siteName]}),a.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${f.status==="open"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.status})]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",f.id.slice(-8).toUpperCase()]})]})},f.id))})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Qn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Patient not found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"The patient you're looking for doesn't exist."}),a.jsx(As,{to:"/patients",className:"btn-primary",children:"Back to Patients"})]})}const rg=.2,F5=e=>{switch(e){case"adult":return"A";case"child":return"B";case"antenatal":return"C";default:return"Z"}};async function B5(e,t,n){const s=`${e}:${t}:${n}`,r=await V.daily_counters.get(s),i=((r==null?void 0:r.seq)??0)+1;return r?await V.daily_counters.update(s,{seq:i}):await V.daily_counters.add({id:s,siteId:e,dateStr:t,category:n,seq:i}),i}const Rc=al(()=>({issueTicket:async({siteId:e,category:t,priority:n="normal",patientId:s,stage:r="registration"})=>{const i=new Date().toISOString().slice(0,10),l=await B5(e,i,t),o=`${F5(t)}-${String(l).padStart(3,"0")}`,c={id:nt(),number:o,patientId:s,category:t,priority:n,createdAt:new Date().toISOString(),siteId:e,state:"waiting",currentStage:r};return await V.tickets.add(c),c},callNext:async e=>{const t=await V.tickets.where("currentStage").equals(e).toArray(),n={urgent:0,normal:1,low:2},s=t.filter(r=>r.state==="waiting").sort((r,i)=>n[r.priority]-n[i.priority]||r.createdAt.localeCompare(i.createdAt))[0];return s?(await V.tickets.update(s.id,{state:"in_progress"}),{...s,state:"in_progress"}):null},completeCurrent:async(e,t)=>{const s=(await V.tickets.where("currentStage").equals(e).toArray()).find(d=>d.state==="in_progress");s&&await V.tickets.update(s.id,{state:"done"});const r=`m-${e}`,i=await V.queue_metrics.get(r),l=(i==null?void 0:i.avgServiceSec)??240,o=Math.max(30,Math.round(rg*t+(1-rg)*l)),c=new Date().toISOString();i?await V.queue_metrics.update(r,{avgServiceSec:o,updatedAt:c}):await V.queue_metrics.add({id:r,stage:e,avgServiceSec:o,updatedAt:c})},estimateTailMinutes:async e=>{const n=(await V.tickets.where("currentStage").equals(e).toArray()).filter(i=>i.state==="waiting").length,s=await V.queue_metrics.get(`m-${e}`),r=(s==null?void 0:s.avgServiceSec)??240;return Math.round(n*r/60)}})),Vl=["registration","vitals","consult","pharmacy"],Cd=e=>Array.isArray(e)?e:[],V5=e=>{if(!e)return"";const t=String(e).split("-");return t.length>1?t[1]:e},U5={registration:Qn,vitals:Nn,consult:Vs,pharmacy:qt},ag={registration:"bg-blue-50 border-blue-200 text-blue-800",vitals:"bg-green-50 border-green-200 text-green-800",consult:"bg-purple-50 border-purple-200 text-purple-800",pharmacy:"bg-orange-50 border-orange-200 text-orange-800"};function z5(){const{t:e}=Yn(),{callNext:t,completeCurrent:n,estimateTailMinutes:s,issueTicket:r}=Rc(),[i,l]=x.useState([]),[o,c]=x.useState("registration"),[d,u]=x.useState(0),h=_s(()=>V.tickets.toArray(),[],[]),m=_s(()=>V.tickets.where("currentStage").equals(o).toArray(),[o],[]),g=Cd(h),j=Cd(m);x.useEffect(()=>{v(),w()},[o]);const v=async()=>{try{const _=await V.queue_metrics.toArray();l(_)}catch(_){console.error("Error loading metrics:",_)}},w=async()=>{try{const _=await s(o);u(_)}catch(_){console.error("Error updating ETA:",_)}},p=j.filter(_=>(_==null?void 0:_.state)==="waiting"),f=j.find(_=>(_==null?void 0:_.state)==="in_progress")??null;j.filter(_=>(_==null?void 0:_.state)==="done");const y=async()=>{await t(o)&&await w()},N=async()=>{await n(o,240),await w()},b=async()=>{const _=["adult","child","antenatal"];for(let I=1;I<=8;I++)await r({siteId:"demo-site",category:_[I%3],priority:I<=2?"urgent":"normal",stage:Vl[Math.floor(Math.random()*Vl.length)]})},S=i.find(_=>(_==null?void 0:_.stage)===o),k=(S==null?void 0:S.avgServiceSec)??240,E=_=>_==="urgent"?"text-red-600":"text-gray-600";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(cl,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("nav.queue")}),a.jsx("p",{className:"text-gray-600",children:"Manage patient flow through care stages"})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Queue Overview"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Vl.map(_=>{const I=Cd(_s(()=>V.tickets.where("currentStage").equals(_).toArray(),[_],[])).filter(L=>(L==null?void 0:L.state)!=="done"),T=U5[_];return a.jsxs("div",{className:`p-4 rounded-lg border ${ag[_]}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(T,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium capitalize",children:_})]}),a.jsx("p",{className:"text-2xl font-bold",children:I.length}),a.jsxs("p",{className:"text-sm opacity-75",children:[I.filter(L=>(L==null?void 0:L.state)==="in_progress").length," active"]})]},_)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Queue Management"}),a.jsx("div",{className:"flex space-x-2 overflow-x-auto mb-6",children:Vl.map(_=>{const I=g.filter(T=>(T==null?void 0:T.currentStage)===_&&(T==null?void 0:T.state)!=="done").length;return a.jsxs("button",{onClick:()=>c(_),className:`px-4 py-2 rounded-lg border font-medium capitalize whitespace-nowrap ${o===_?ag[_]:"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[_," (",I,")"]},_)})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-blue-600",children:"Waiting"}),a.jsx("div",{className:"text-2xl font-bold text-blue-800",children:p.length})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-yellow-600",children:"In Progress"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:f?"1":"0"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-green-600",children:"Avg Service Time"}),a.jsxs("div",{className:"text-2xl font-bold text-green-800",children:[Math.round(k/60),"m"]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("div",{className:"text-sm text-purple-600",children:"ETA for Last"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-800",children:[d,"m"]})]})]}),a.jsxs("div",{className:"flex space-x-4 mb-6",children:[a.jsxs("button",{className:"btn-primary flex items-center space-x-2",onClick:y,disabled:p.length===0||!!f,children:[a.jsx(dr,{className:"h-5 w-5"}),a.jsx("span",{children:"Call Next"})]}),a.jsxs("button",{className:"btn-secondary flex items-center space-x-2",onClick:N,disabled:!f,children:[a.jsx(ba,{className:"h-5 w-5"}),a.jsx("span",{children:"Complete Current"})]}),g.length===0&&a.jsxs("button",{className:"btn-secondary flex items-center space-x-2",onClick:b,children:[a.jsx(dl,{className:"h-5 w-5"}),a.jsx("span",{children:"Generate Demo Tickets"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Now Serving"}),f?a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:V5(f==null?void 0:f.number)}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-gray-900",children:(f==null?void 0:f.number)??""}),a.jsxs("div",{className:"text-sm text-gray-600 capitalize",children:[(f==null?void 0:f.category)??"","  ",(f==null?void 0:f.priority)??""," priority"]})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(jn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No patient currently being served"})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Waiting Queue (",p.length,")"]}),p.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsxs("p",{children:["No patients waiting in ",o]})}):a.jsxs("div",{className:"space-y-2",children:[p.slice(0,10).map((_,I)=>a.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${I===0?"border-green-200 bg-green-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:I+1}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:(_==null?void 0:_.number)??""}),a.jsxs("div",{className:"text-sm text-gray-600 capitalize",children:[(_==null?void 0:_.category)??""," ",a.jsxs("span",{className:E((_==null?void 0:_.priority)??""),children:[(_==null?void 0:_.priority)??""," priority"]})]})]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:I===0?"Next":`~${I*k/60}m`})]},_==null?void 0:_.id)),p.length>10&&a.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["... and ",p.length-10," more patients"]})]})]})]})]})}function $f({onPatientSelect:e,placeholder:t="Search patients...",className:n=""}){const[s,r]=x.useState(""),[i,l]=x.useState([]),[o,c]=x.useState(!1),{searchPatients:d}=Of();x.useEffect(()=>{const m=setTimeout(async()=>{if(s.trim()){const g=await d(s);l(g.slice(0,5)),c(!0)}else l([]),c(!1)},300);return()=>clearTimeout(m)},[s,d]);const u=m=>{e(m),r(`${m.givenName} ${m.familyName}`),c(!1)},h=m=>{const g=new Date(m),j=new Date;let v=j.getFullYear()-g.getFullYear();const w=j.getMonth()-g.getMonth();return(w<0||w===0&&j.getDate()<g.getDate())&&v--,v};return a.jsxs("div",{className:`relative ${n}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zo,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:s,onChange:m=>r(m.target.value),onFocus:()=>s&&c(!0),className:"input-field pl-10",placeholder:t})]}),o&&i.length>0&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:i.map(m=>a.jsx("button",{onClick:()=>u(m),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 focus:bg-gray-50 focus:outline-none",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[m.photoUrl?a.jsx("img",{src:m.photoUrl,alt:`${m.givenName} ${m.familyName}`,className:"w-10 h-10 rounded-full object-cover"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(Qn,{className:"h-5 w-5 text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[m.givenName," ",m.familyName]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Age ",h(m.dob),"  ",m.phone,"  ",m.state]})]})]})},m.id))}),o&&i.length===0&&s.trim()&&a.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"No patients found"})]})}function zs({name:e,label:t,unit:n,metric:s,patientAge:r,patientSex:i,placeholder:l,step:o=1}){var S;const{register:c,watch:d,formState:{errors:u}}=lS(),[h,m]=x.useState(null),[g,j]=x.useState(null),[v,w]=x.useState(!0),p=Number(d(e))||0;x.useEffect(()=>{f()},[s,r,i]),x.useEffect(()=>{h&&p>0?y():j(null)},[p,h]);const f=async()=>{try{const k=await D.vitalsRanges.where("metric").equals(s).and(E=>E.sex===i||E.sex==="U").and(E=>r>=E.ageMin&&r<=E.ageMax).first();m(k||null)}catch(k){console.error("Error loading vital range:",k)}finally{w(!1)}},y=()=>{if(!h||p<=0){j(null);return}const{min:k,max:E}=h,_=k*.7,I=E*1.3;p<_||p>I?j("critical"):p<k?j("low"):p>E?j("high"):j("normal")},b=(()=>{switch(g){case"critical":return{icon:Ge,color:"text-red-700 bg-red-50 border-red-200",message:"Critical value - immediate attention required",priority:"high"};case"high":return{icon:Ge,color:"text-orange-700 bg-orange-50 border-orange-200",message:"Above normal - consider recheck",priority:"medium"};case"low":return{icon:Ge,color:"text-yellow-700 bg-yellow-50 border-yellow-200",message:"Below normal - verify reading",priority:"medium"};case"normal":return{icon:Ss,color:"text-green-700 bg-green-50 border-green-200",message:"Within normal range",priority:"low"};default:return null}})();return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[t,h&&!v&&a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(Normal: ",h.min,"-",h.max," ",n,")"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{...c(e,{valueAsNumber:!0,required:`${t} is required`}),type:"number",step:o,className:`input-field ${(b==null?void 0:b.priority)==="high"?"border-red-300 ring-red-200":(b==null?void 0:b.priority)==="medium"?"border-yellow-300 ring-yellow-200":g==="normal"?"border-green-300 ring-green-200":"border-gray-300"}`,placeholder:l,"aria-describedby":`${e}-status ${e}-range`}),b&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(b.icon,{className:`h-5 w-5 ${b.priority==="high"?"text-red-600":b.priority==="medium"?"text-yellow-600":"text-green-600"}`})})]}),b&&a.jsx("div",{id:`${e}-status`,className:`p-2 rounded-lg border text-sm ${b.color}`,role:b.priority==="high"?"alert":"status","aria-live":b.priority==="high"?"assertive":"polite",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(b.icon,{className:"h-4 w-4"}),a.jsx("span",{children:b.message})]})}),h&&!v&&a.jsxs("p",{id:`${e}-range`,className:"text-xs text-gray-500",children:["Age ",r,", ",i==="M"?"Male":i==="F"?"Female":"Unknown","  Source: ",h.source]}),u[e]&&a.jsx("p",{className:"text-red-600 text-sm",role:"alert",children:(S=u[e])==null?void 0:S.message})]})}const H5=ge.object({heightCm:ge.number().min(30).max(250).optional(),weightKg:ge.number().min(1).max(300).optional(),tempC:ge.number().min(30).max(45).optional(),pulseBpm:ge.number().min(30).max(200).optional(),systolic:ge.number().min(60).max(250).optional(),diastolic:ge.number().min(30).max(150).optional(),spo2:ge.number().min(70).max(100).optional()});function q5({patientId:e,visitId:t,onSuccess:n,onCancel:s}){const{t:r}=Yn(),{currentUser:i}=De(),[l,o]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState([]),[m,g]=x.useState(null),{register:j,handleSubmit:v,watch:w,control:p,formState:{errors:f}}=Tc({resolver:Oc(H5)}),y=w();x.useEffect(()=>{D.patients.get(e).then(g)},[e]),x.useEffect(()=>{const{heightCm:E,weightKg:_,systolic:I,diastolic:T,tempC:L,pulseBpm:z}=y;let H=null;E&&_?(H=R5(E,_),d(H)):d(null);const re=M5({systolic:I,diastolic:T,tempC:L,pulseBpm:z,bmi:H||void 0});h(re)},[y]);const N=async E=>{o(!0);try{const _={id:Be(),patientId:e,visitId:t,...E,bmi:c||void 0,flags:u,takenAt:new Date};await D.vitals.add(_),await Gr((i==null?void 0:i.role)||"unknown","create","vital",_.id),await $0(Vn(new Date),"vitals"),n==null||n()}catch(_){console.error("Error saving vitals:",_)}finally{o(!1)}},b=E=>{const _=new Date(E),I=new Date;let T=I.getFullYear()-_.getFullYear();const L=I.getMonth()-_.getMonth();return(L<0||L===0&&I.getDate()<_.getDate())&&T--,T};if(!m)return a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading patient..."})]})});const S=b(m.dob),k=m.sex==="male"?"M":m.sex==="female"?"F":"U";return a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Nn,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record Vital Signs"}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Age: ",S,"  ",m.sex]})]}),a.jsxs("form",{onSubmit:v(N),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(zs,{name:"heightCm",label:r("vitals.height"),unit:"cm",metric:"hr",patientAge:S,patientSex:k,placeholder:"170",step:.1}),a.jsx(zs,{name:"weightKg",label:r("vitals.weight"),unit:"kg",metric:"hr",patientAge:S,patientSex:k,placeholder:"70",step:.1})]}),c&&a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["BMI: ",a.jsx("span",{className:"text-lg",children:c})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(zs,{name:"tempC",label:r("vitals.temperature"),unit:"C",metric:"temp",patientAge:S,patientSex:k,placeholder:"36.5",step:.1}),a.jsx(zs,{name:"pulseBpm",label:r("vitals.pulse"),unit:"bpm",metric:"hr",patientAge:S,patientSex:k,placeholder:"72"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("vitals.bloodPressure")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(zs,{name:"systolic",label:"Systolic",unit:"mmHg",metric:"sbp",patientAge:S,patientSex:k,placeholder:"120"}),a.jsx(zs,{name:"diastolic",label:"Diastolic",unit:"mmHg",metric:"dbp",patientAge:S,patientSex:k,placeholder:"80"})]})]}),a.jsx(zs,{name:"spo2",label:"SpO2",unit:"%",metric:"spo2",patientAge:S,patientSex:k,placeholder:"98"}),u.length>0&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:" Abnormal Values Detected"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(E=>a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Rf(E)}`,children:Mf(E)},E))})]}),a.jsxs("div",{className:"flex space-x-4 pt-6",children:[a.jsx(ca,{audioKey:"action.save",fallbackText:"Save Vitals",type:"submit",disabled:l,className:"btn-primary flex-1",children:l?"Saving...":"Save Vitals"}),s&&a.jsx(ca,{audioKey:"action.cancel",fallbackText:"Cancel",type:"button",onClick:s,className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})}function ig(){const{visitId:e}=jc(),t=cn(),[n,s]=x.useState(null),[r,i]=x.useState(null),[l,o]=x.useState(null),[c,d]=x.useState(!0);x.useEffect(()=>{e?u(e):d(!1)},[e]);const u=async j=>{try{const v=await D.visits.get(j);if(v){s(v);const w=await D.patients.get(v.patientId);i(w||null)}}catch(v){console.error("Error loading visit data:",v)}finally{d(!1)}},h=async j=>{try{const v={id:Be(),patientId:j.id,startedAt:new Date,siteName:"Mobile Clinic",status:"open"};await D.visits.add(v),i(j),s(v),o(j)}catch(v){console.error("Error creating visit:",v)}},m=()=>{t(n?`/consult/${n.id}`:"/queue")},g=()=>{t("/queue")};return!e&&!l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/queue"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Record Vital Signs"}),a.jsx("p",{className:"text-gray-600",children:"Search for a patient to record vitals"})]})]}),a.jsxs("div",{className:"card max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Patient"}),a.jsx($f,{onPatientSelect:h,placeholder:"Search patients by name or phone...",className:"w-full"})]})]}):c?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading visit..."})]})}):!n||!r?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Visit not found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"The visit you're looking for doesn't exist."}),a.jsx("button",{onClick:()=>t("/queue"),className:"btn-primary",children:"Back to Queue"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/queue"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Record Vital Signs"}),a.jsxs("p",{className:"text-gray-600",children:["Patient: ",r.givenName," ",r.familyName]})]})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[r.photoUrl?a.jsx("img",{src:r.photoUrl,alt:`${r.givenName} ${r.familyName}`,className:"w-16 h-16 rounded-full object-cover"}):a.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-medium text-gray-600",children:[r.givenName[0],r.familyName[0]]})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[r.givenName," ",r.familyName]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Visit ID: ",n.id.slice(-8).toUpperCase()]})]})]})}),a.jsx(q5,{patientId:r.id,visitId:n.id,onSuccess:m,onCancel:g})]})}const K5=ge.object({soapSubjective:ge.string().min(1,"Subjective findings required"),soapObjective:ge.string().min(1,"Objective findings required"),soapAssessment:ge.string().min(1,"Assessment required"),soapPlan:ge.string().min(1,"Plan required")});function W5({patientId:e,visitId:t,onSuccess:n,onCancel:s}){const{t:r}=Yn(),{currentUser:i}=De(),[l,o]=x.useState(!1),[c,d]=x.useState([""]),{register:u,handleSubmit:h,formState:{errors:m}}=Tc({resolver:Oc(K5)}),g=()=>{d([...c,""])},j=p=>{c.length>1&&d(c.filter((f,y)=>y!==p))},v=(p,f)=>{const y=[...c];y[p]=f,d(y)},w=async p=>{o(!0);try{const f={id:Be(),patientId:e,visitId:t,providerName:(i==null?void 0:i.fullName)||"Unknown Provider",...p,provisionalDx:c.filter(y=>y.trim()),createdAt:new Date};await D.consultations.add(f),await Gr((i==null?void 0:i.role)||"unknown","create","consultation",f.id),n==null||n()}catch(f){console.error("Error saving consultation:",f)}finally{o(!1)}};return a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Vs,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Consultation Notes"})]}),a.jsxs("form",{onSubmit:h(w),className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjective (Patient's History) *"}),a.jsx("textarea",{...u("soapSubjective"),className:"input-field",rows:4,placeholder:"Patient reports... Chief complaint, history of present illness, review of systems..."}),m.soapSubjective&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.soapSubjective.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Objective (Physical Examination) *"}),a.jsx("textarea",{...u("soapObjective"),className:"input-field",rows:4,placeholder:"Physical examination findings, vital signs, laboratory results..."}),m.soapObjective&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.soapObjective.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment (Clinical Impression) *"}),a.jsx("textarea",{...u("soapAssessment"),className:"input-field",rows:3,placeholder:"Clinical reasoning, differential diagnosis, problem list..."}),m.soapAssessment&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.soapAssessment.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan (Treatment Plan) *"}),a.jsx("textarea",{...u("soapPlan"),className:"input-field",rows:4,placeholder:"Treatment plan, medications, follow-up instructions, patient education..."}),m.soapPlan&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.soapPlan.message})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Provisional Diagnoses"}),a.jsxs("button",{type:"button",onClick:g,className:"flex items-center space-x-1 text-primary hover:text-primary/80 text-sm font-medium",children:[a.jsx($i,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Diagnosis"})]})]}),a.jsx("div",{className:"space-y-3",children:c.map((p,f)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-500 w-8",children:[f+1,"."]}),a.jsx("input",{type:"text",value:p,onChange:y=>v(f,y.target.value),className:"input-field flex-1",placeholder:"Enter diagnosis (e.g., Hypertension, Type 2 Diabetes)"}),c.length>1&&a.jsx("button",{type:"button",onClick:()=>j(f),className:"text-red-600 hover:text-red-800 p-1 touch-target",children:a.jsx(_f,{className:"h-5 w-5"})})]},f))})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Provider:"})," ",(i==null?void 0:i.fullName)||"Unknown"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"flex space-x-4 pt-6",children:[a.jsx("button",{type:"submit",disabled:l,className:"btn-primary flex-1",children:l?"Saving...":"Save Consultation"}),s&&a.jsx("button",{type:"button",onClick:s,className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})}function lg(){const{visitId:e}=jc(),t=cn(),[n,s]=x.useState(null),[r,i]=x.useState(null),[l,o]=x.useState(null),[c,d]=x.useState([]),[u,h]=x.useState(!0);x.useEffect(()=>{e?m(e):h(!1)},[e]);const m=async f=>{try{const y=await D.visits.get(f);if(y){s(y);const[N,b]=await Promise.all([D.patients.get(y.patientId),D.vitals.where("visitId").equals(f).toArray()]);i(N||null),d(b)}}catch(y){console.error("Error loading visit data:",y)}finally{h(!1)}},g=async f=>{try{const y={id:Be(),patientId:f.id,startedAt:new Date,siteName:"Mobile Clinic",status:"open"};await D.visits.add(y);const N=await D.vitals.where("patientId").equals(f.id).toArray();i(f),s(y),d(N),o(f)}catch(y){console.error("Error creating visit:",y)}},j=()=>{t(n?`/pharmacy/${n.id}`:"/queue")},v=()=>{t("/queue")},w=f=>{const y=new Date(f),N=new Date;let b=N.getFullYear()-y.getFullYear();const S=N.getMonth()-y.getMonth();return(S<0||S===0&&N.getDate()<y.getDate())&&b--,b};if(!e&&!l)return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/queue"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultation"}),a.jsx("p",{className:"text-gray-600",children:"Search for a patient to start consultation"})]})]}),a.jsxs("div",{className:"card max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Patient"}),a.jsx($f,{onPatientSelect:g,placeholder:"Search patients by name or phone...",className:"w-full"})]})]});if(u)return a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading consultation..."})]})});if(!n||!r)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Vs,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Visit not found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"The visit you're looking for doesn't exist."}),a.jsx("button",{onClick:()=>t("/queue"),className:"btn-primary",children:"Back to Queue"})]});const p=c[c.length-1];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/queue"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultation"}),a.jsxs("p",{className:"text-gray-600",children:["Patient: ",r.givenName," ",r.familyName]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Information"}),a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.photoUrl?a.jsx("img",{src:r.photoUrl,alt:`${r.givenName} ${r.familyName}`,className:"w-16 h-16 rounded-full object-cover"}):a.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-medium text-gray-600",children:[r.givenName[0],r.familyName[0]]})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[r.givenName," ",r.familyName]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Age: ",w(r.dob),"  ",r.sex,"  ",r.phone]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Address:"})," ",r.address]}),a.jsxs("p",{children:[a.jsx("strong",{children:"State/LGA:"})," ",r.state,", ",r.lga]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Vitals"}),p?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.heightCm&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Height:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[p.heightCm," cm"]})]}),p.weightKg&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Weight:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[p.weightKg," kg"]})]}),p.bmi&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"BMI:"}),a.jsx("span",{className:"ml-2 font-medium",children:p.bmi})]}),p.tempC&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Temperature:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[p.tempC,"C"]})]}),p.pulseBpm&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Pulse:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[p.pulseBpm," bpm"]})]}),p.systolic&&p.diastolic&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Blood Pressure:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[p.systolic,"/",p.diastolic]})]}),p.spo2&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"SpO2:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[p.spo2,"%"]})]})]}),p.flags.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Alerts:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.flags.map(f=>a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Rf(f)}`,children:Mf(f)},f))})]})]}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No vitals recorded for this visit"})]})]}),a.jsx(W5,{patientId:r.id,visitId:n.id,onSuccess:j,onCancel:v})]})}const Q5=ge.object({itemName:ge.string().min(1,"Medication name is required"),qty:ge.number().min(1,"Quantity must be at least 1"),dosage:ge.string().min(1,"Dosage is required"),directions:ge.string().min(1,"Directions are required")});function Z5({patientId:e,visitId:t,onSuccess:n,onCancel:s}){const{t:r}=Yn(),{currentUser:i}=De(),[l,o]=x.useState(!1),[c,d]=x.useState([]),[u,h]=x.useState(null),[m,g]=x.useState(!1),{register:j,handleSubmit:v,watch:w,setValue:p,formState:{errors:f}}=Tc({resolver:Oc(Q5)}),y=w("itemName"),N=w("qty");x.useEffect(()=>{b()},[]),x.useEffect(()=>{if(y){const k=c.find(E=>E.itemName===y);if(h(k||null),k&&N){const E=k.onHandQty-N;g(E<=k.reorderThreshold)}}},[y,N,c]);const b=async()=>{try{const k=await D.inventory.orderBy("itemName").toArray();d(k)}catch(k){console.error("Error loading inventory:",k)}},S=async k=>{if(!u){alert("Please select a valid medication from inventory");return}if(k.qty>u.onHandQty){alert(`Insufficient stock. Available: ${u.onHandQty}`);return}o(!0);try{const E={id:Be(),patientId:e,visitId:t,...k,dispensedBy:(i==null?void 0:i.fullName)||"Unknown",dispensedAt:new Date};await D.dispenses.add(E);const _=u.onHandQty-k.qty;await D.inventory.update(u.id,{onHandQty:_,updatedAt:new Date}),await Gr((i==null?void 0:i.role)||"unknown","dispense","medication",E.id),n==null||n()}catch(E){console.error("Error dispensing medication:",E)}finally{o(!1)}};return a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(qt,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dispense Medication"})]}),a.jsxs("form",{onSubmit:v(S),className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication *"}),a.jsxs("select",{...j("itemName"),className:"input-field",onChange:k=>{p("itemName",k.target.value)},children:[a.jsx("option",{value:"",children:"Select medication"}),c.map(k=>a.jsxs("option",{value:k.itemName,children:[k.itemName," (Available: ",k.onHandQty," ",k.unit,")"]},k.id))]}),f.itemName&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.itemName.message})]}),u&&a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["Available Stock: ",u.onHandQty," ",u.unit]}),a.jsxs("p",{className:"text-xs text-blue-600",children:["Reorder threshold: ",u.reorderThreshold]})]}),u.onHandQty<=u.reorderThreshold&&a.jsxs("div",{className:"flex items-center text-orange-600",children:[a.jsx(Ge,{className:"h-5 w-5 mr-1"}),a.jsx("span",{className:"text-sm font-medium",children:"Low Stock"})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity to Dispense *"}),a.jsx("input",{...j("qty",{valueAsNumber:!0}),type:"number",min:"1",max:(u==null?void 0:u.onHandQty)||999,className:"input-field",placeholder:"Enter quantity"}),f.qty&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.qty.message})]}),m&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ge,{className:"h-5 w-5 text-yellow-600 mr-2"}),a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Warning:"})," This dispense will bring stock below reorder threshold."]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dosage *"}),a.jsx("input",{...j("dosage"),className:"input-field",placeholder:"e.g., 500mg, 10ml, 1 tablet"}),f.dosage&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.dosage.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Directions for Use *"}),a.jsx("textarea",{...j("directions"),className:"input-field",rows:3,placeholder:"e.g., Take 1 tablet twice daily with food for 7 days"}),f.directions&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.directions.message})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Dispensed by:"})," ",(i==null?void 0:i.fullName)||"Unknown"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"flex space-x-4 pt-6",children:[a.jsx("button",{type:"submit",disabled:l||!u,className:"btn-primary flex-1",children:l?"Dispensing...":"Dispense Medication"}),s&&a.jsx("button",{type:"button",onClick:s,className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})}function og(){const{visitId:e}=jc(),t=cn(),[n,s]=x.useState(null),[r,i]=x.useState(null),[l,o]=x.useState(null),[c,d]=x.useState(null),[u,h]=x.useState(!0);x.useEffect(()=>{e?m(e):h(!1)},[e]);const m=async p=>{try{const f=await D.visits.get(p);if(f){s(f);const[y,N]=await Promise.all([D.patients.get(f.patientId),D.consultations.where("visitId").equals(p).first()]);i(y||null),d(N||null)}}catch(f){console.error("Error loading visit data:",f)}finally{h(!1)}},g=async p=>{try{const f={id:Be(),patientId:p.id,startedAt:new Date,siteName:"Mobile Clinic",status:"open"};await D.visits.add(f);const y=await D.consultations.where("patientId").equals(p.id).reverse().first();i(p),s(f),d(y||null),o(p)}catch(f){console.error("Error creating visit:",f)}},j=()=>{t("/queue",{state:{message:"Medication dispensed successfully!"}})},v=()=>{t("/queue")},w=p=>{const f=new Date(p),y=new Date;let N=y.getFullYear()-f.getFullYear();const b=y.getMonth()-f.getMonth();return(b<0||b===0&&y.getDate()<f.getDate())&&N--,N};return!e&&!l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/queue"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pharmacy"}),a.jsx("p",{className:"text-gray-600",children:"Search for a patient to dispense medication"})]})]}),a.jsxs("div",{className:"card max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Patient"}),a.jsx($f,{onPatientSelect:g,placeholder:"Search patients by name or phone...",className:"w-full"})]})]}):u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading pharmacy..."})]})}):!n||!r?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(qt,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Visit not found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"The visit you're looking for doesn't exist."}),a.jsx("button",{onClick:()=>t("/queue"),className:"btn-primary",children:"Back to Queue"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/queue"),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors touch-target",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pharmacy"}),a.jsxs("p",{className:"text-gray-600",children:["Patient: ",r.givenName," ",r.familyName]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Information"}),a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.photoUrl?a.jsx("img",{src:r.photoUrl,alt:`${r.givenName} ${r.familyName}`,className:"w-16 h-16 rounded-full object-cover"}):a.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-medium text-gray-600",children:[r.givenName[0],r.familyName[0]]})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[r.givenName," ",r.familyName]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Age: ",w(r.dob),"  ",r.sex,"  ",r.phone]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Consultation Summary"}),c?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Provider:"}),a.jsx("p",{className:"text-sm text-gray-600",children:c.providerName})]}),c.provisionalDx.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Diagnoses:"}),a.jsx("ul",{className:"text-sm text-gray-600 list-disc list-inside",children:c.provisionalDx.map((p,f)=>a.jsx("li",{children:p},f))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Treatment Plan:"}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:c.soapPlan})]})]}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No consultation notes available"})]})]}),a.jsx(Z5,{patientId:r.id,visitId:n.id,onSuccess:j,onCancel:v})]})}function G5(){const{currentUser:e}=De(),[t,n]=x.useState([]),[s,r]=x.useState(!0),[i,l]=x.useState(!1),[o,c]=x.useState(null),[d,u]=x.useState({itemName:"",unit:"",onHandQty:0,reorderThreshold:0});x.useEffect(()=>{h()},[]);const h=async()=>{try{console.log("Loading inventory...");const w=await D.inventory.orderBy("itemName").toArray();console.log("Loaded inventory items:",w.length),n(w)}catch(w){console.error("Error loading inventory:",w)}finally{r(!1)}},m=async w=>{w.preventDefault();try{if(o)await D.inventory.update(o.id,{...d,updatedAt:new Date});else{const p={id:Be(),...d,updatedAt:new Date};await D.inventory.add(p)}await h(),g()}catch(p){console.error("Error saving inventory item:",p),alert("Failed to save inventory item. Please try again.")}},g=()=>{u({itemName:"",unit:"",onHandQty:0,reorderThreshold:0}),l(!1),c(null)},j=w=>{u({itemName:w.itemName,unit:w.unit,onHandQty:w.onHandQty,reorderThreshold:w.reorderThreshold}),c(w),l(!0)},v=t.filter(w=>w.onHandQty<=w.reorderThreshold);return s?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading inventory..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Mi,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory"}),a.jsx("p",{className:"text-gray-600",children:"Manage medication and supply inventory"})]})]}),a.jsxs("button",{onClick:()=>l(!0),className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx($i,{className:"h-5 w-5"}),a.jsx("span",{children:"Add Item"})]})]}),v.length>0&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ge,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("h3",{className:"text-sm font-medium text-yellow-800",children:["Low Stock Alert (",v.length," items)"]})]}),a.jsx("div",{className:"text-sm text-yellow-700",children:v.map(w=>w.itemName).join(", ")})]}),i&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:o?"Edit Item":"Add New Item"}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Name *"}),a.jsx("input",{type:"text",required:!0,value:d.itemName,onChange:w=>u({...d,itemName:w.target.value}),className:"input-field",placeholder:"e.g., Paracetamol 500mg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit *"}),a.jsx("input",{type:"text",required:!0,value:d.unit,onChange:w=>u({...d,unit:w.target.value}),className:"input-field",placeholder:"e.g., tablets, bottles, boxes"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity on Hand *"}),a.jsx("input",{type:"number",required:!0,min:"0",value:d.onHandQty,onChange:w=>u({...d,onHandQty:parseInt(w.target.value)||0}),className:"input-field"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Threshold *"}),a.jsx("input",{type:"number",required:!0,min:"0",value:d.reorderThreshold,onChange:w=>u({...d,reorderThreshold:parseInt(w.target.value)||0}),className:"input-field"})]})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"submit",className:"btn-primary",children:o?"Update Item":"Add Item"}),a.jsx("button",{type:"button",onClick:g,className:"btn-secondary",children:"Cancel"})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Inventory"}),t.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Mi,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inventory items"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first inventory item to get started"}),a.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:"Add First Item"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"On Hand"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reorder At"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.itemName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.unit}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.onHandQty}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.reorderThreshold}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.onHandQty<=w.reorderThreshold?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[a.jsx(Ge,{className:"h-3 w-3 mr-1"}),"Low Stock"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"In Stock"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("button",{onClick:()=>j(w),className:"text-primary hover:text-primary/80 inline-flex items-center space-x-1",children:[a.jsx(z0,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit"})]})})]},w.id))})]})})]})]})}function J5(){const{currentUser:e}=De(),[t,n]=x.useState([]),[s,r]=x.useState(!1),[i,l]=x.useState(null),[o,c]=x.useState(!1),[d,u]=x.useState(!1),[h,m]=x.useState({fullName:"",role:"volunteer",email:"",phone:"",pin:"",adminAccess:!1,adminPermanent:!1});if(!e||!dn(e.role,"users"))return null;x.useEffect(()=>{g()},[]);const g=async()=>{try{const y=await D.users.orderBy("createdAt").toArray();n(y)}catch(y){console.error("Error loading users:",y)}},j=async y=>{if(y.preventDefault(),!h.fullName||!h.pin||h.pin.length!==6){alert("Please fill all fields and ensure PIN is 6 digits");return}if(h.adminAccess&&(e==null?void 0:e.role)!=="admin"){alert("Only admins can grant admin access");return}if(h.adminPermanent&&!(e!=null&&e.adminPermanent)){alert("Only permanent admins can create other permanent admins");return}u(!0);try{const N=F0(),b=await Cc(h.pin,N);if(i){if(i.adminPermanent&&!(e!=null&&e.adminPermanent)){alert("Cannot modify permanent admin users"),u(!1);return}await D.users.update(i.id,{fullName:h.fullName,role:h.role,email:h.email||void 0,phone:h.phone||void 0,pinHash:b,pinSalt:N,adminAccess:h.adminAccess,adminPermanent:h.adminPermanent,updatedAt:new Date})}else{const S={id:Be(),fullName:h.fullName,role:h.role,email:h.email||void 0,phone:h.phone||void 0,pinHash:b,pinSalt:N,adminAccess:h.adminAccess,adminPermanent:h.adminPermanent,isActive:1,createdAt:new Date,updatedAt:new Date};await D.users.add(S)}await g(),v()}catch(N){console.error("Error saving user:",N),alert("Failed to save user")}finally{u(!1)}},v=()=>{m({fullName:"",role:"volunteer",email:"",phone:"",pin:"",adminAccess:!1,adminPermanent:!1}),r(!1),l(null)},w=y=>{m({fullName:y.fullName,role:y.role,email:y.email||"",phone:y.phone||"",pin:"",adminAccess:y.adminAccess||!1,adminPermanent:y.adminPermanent||!1}),l(y),r(!0)},p=async y=>{if(y.id===(e==null?void 0:e.id)){alert("Cannot deactivate your own account");return}if(y.adminPermanent){alert("Cannot deactivate permanent admin users");return}try{await D.users.update(y.id,{isActive:y.isActive===1?0:1,updatedAt:new Date}),await g()}catch(N){console.error("Error toggling user status:",N)}},f=async y=>{if(y.id===(e==null?void 0:e.id)){alert("Cannot delete your own account");return}if(y.adminPermanent){alert("Cannot delete permanent admin users");return}if(confirm(`Delete user ${y.fullName}? This cannot be undone.`))try{await D.users.delete(y.id),await g()}catch(N){console.error("Error deleting user:",N)}};return a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",children:[o?a.jsx(U2,{className:"h-4 w-4"}):a.jsx(U0,{className:"h-4 w-4"}),a.jsxs("span",{children:[o?"Hide":"Show"," PINs"]})]}),a.jsxs("button",{onClick:()=>r(!0),className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx(qo,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]})]}),s&&a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:i?"Edit User":"Add New User"}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{type:"text",required:!0,value:h.fullName,onChange:y=>m({...h,fullName:y.target.value}),className:"input-field",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),a.jsxs("select",{value:h.role,onChange:y=>m({...h,role:y.target.value}),className:"input-field",children:[a.jsx("option",{value:"volunteer",children:"Volunteer"}),a.jsx("option",{value:"nurse",children:"Nurse"}),a.jsx("option",{value:"doctor",children:"Doctor"}),a.jsx("option",{value:"pharmacist",children:"Pharmacist"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:h.email,onChange:y=>m({...h,email:y.target.value}),className:"input-field",placeholder:"user@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:h.phone,onChange:y=>m({...h,phone:y.target.value}),className:"input-field",placeholder:"+234..."})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PIN (6 digits) *"}),a.jsx("input",{type:"password",required:!0,value:h.pin,onChange:y=>m({...h,pin:y.target.value.replace(/\D/g,"").slice(0,6)}),className:"input-field",placeholder:"Enter 6-digit PIN"})]}),(e==null?void 0:e.role)==="admin"&&a.jsxs("div",{className:"md:col-span-2 space-y-4 border-t pt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Admin Permissions"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"adminAccess",checked:h.adminAccess,onChange:y=>m({...h,adminAccess:y.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),a.jsx("label",{htmlFor:"adminAccess",className:"text-sm text-gray-700",children:"Grant admin access (can manage users, export data)"})]}),(e==null?void 0:e.adminPermanent)&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"adminPermanent",checked:h.adminPermanent,onChange:y=>m({...h,adminPermanent:y.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),a.jsxs("label",{htmlFor:"adminPermanent",className:"text-sm text-gray-700",children:[a.jsx("span",{className:"font-medium text-red-600",children:"Permanent admin"})," (cannot be deleted or demoted)"]})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Admin access allows user management and data export. Permanent admin status prevents deletion/demotion."})]})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"submit",disabled:d,className:"btn-primary",children:d?"Saving...":i?"Update User":"Create User"}),a.jsx("button",{type:"button",onClick:v,className:"btn-secondary",children:"Cancel"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),o&&a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PIN"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(y=>a.jsxs("tr",{className:y.isActive?"":"opacity-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[y.fullName,y.adminPermanent&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:"Permanent"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",y.id.slice(-8).toUpperCase()]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Bk(y.role)}`,children:Vk(y.role)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"space-y-1",children:[y.adminAccess&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin Access"}),y.adminPermanent&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Permanent"}),!y.adminAccess&&!y.adminPermanent&&a.jsx("span",{className:"text-xs text-gray-400",children:"Standard User"})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsx("div",{children:y.email}),a.jsx("div",{children:y.phone})]}),o&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-600",children:y.fullName==="Kristopher Okobah"?"070398":y.fullName==="Admin User"?"123456":y.fullName==="Dr. Sarah Johnson"?"234567":y.fullName==="Nurse Mary"?"345678":y.fullName==="Pharmacist John"?"456789":y.fullName==="Volunteer Mike"?"567890":""}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.isActive===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.isActive===1?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>w(y),disabled:y.adminPermanent&&!(e!=null&&e.adminPermanent),className:"text-blue-600 hover:text-blue-800",title:y.adminPermanent&&!(e!=null&&e.adminPermanent)?"Cannot edit permanent admin":"Edit user",children:a.jsx(z0,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>p(y),className:`${y.isActive===1?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"} ${y.id===(e==null?void 0:e.id)||y.adminPermanent?"opacity-50 cursor-not-allowed":""}`,disabled:y.id===(e==null?void 0:e.id)||y.adminPermanent,title:y.id===(e==null?void 0:e.id)?"Cannot deactivate your own account":y.adminPermanent?"Cannot deactivate permanent admin":y.isActive===1?"Deactivate user":"Activate user",children:y.isActive===1?"Deactivate":"Activate"}),y.id!==(e==null?void 0:e.id)&&!y.adminPermanent&&a.jsx("button",{onClick:()=>f(y),className:"text-red-600 hover:text-red-800",title:"Delete user",children:a.jsx(q0,{className:"h-4 w-4"})})]})})]},y.id))})]})})]})}function Y5(){const{currentUser:e}=De();return!e||!dn(e.role,"users")?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(oa,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to manage users."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(oa,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage system users and permissions"})]})]}),a.jsx(J5,{})]})}const Ff=al((e,t)=>({wallet:0,loading:!1,ensureWallet:async n=>{e({loading:!0});let s=await V.gamification.get(n);if(!s){const r=new Date().toISOString();await V.gamification.add({id:n,volunteerId:n,tokens:0,badges:[],updatedAt:r}),s=await V.gamification.get(n)}e({wallet:(s==null?void 0:s.tokens)??0,loading:!1})},addTokens:async(n,s,r)=>{const i=await V.gamification.get(n),l=new Date().toISOString();if(!i){await V.gamification.add({id:n,volunteerId:n,tokens:s,badges:r?[r]:[],updatedAt:l}),e({wallet:s});return}const o=(i.tokens??0)+s,c=new Set(i.badges??[]);r&&c.add(r),await V.gamification.update(n,{tokens:o,badges:Array.from(c),updatedAt:l}),e({wallet:o})},spendTokens:async(n,s)=>{const r=await V.gamification.get(n);if(!r||r.tokens<s)return!1;const i=r.tokens-s;return await V.gamification.update(n,{tokens:i,updatedAt:new Date().toISOString()}),e({wallet:i}),!0},addBadge:async(n,s)=>{const r=await V.gamification.get(n);if(!r)return;const i=new Set(r.badges??[]);i.add(s),await V.gamification.update(n,{badges:Array.from(i),updatedAt:new Date().toISOString()})},leaderboard:async(n="all",s=20)=>(await V.gamification.toArray()).map(i=>({volunteerId:i.volunteerId,tokens:i.tokens||0})).sort((i,l)=>l.tokens-i.tokens).slice(0,s)}));function X5(){const{currentUser:e}=De(),{addTokens:t,ensureWallet:n,wallet:s}=Ff(),[r,i]=x.useState([]),[l,o]=x.useState({}),[c,d]=x.useState(0);if(!e||!dn(e.role,"inventory"))return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Restock Game"}),a.jsx("span",{className:"text-sm text-gray-600",children:"(Non-medical supplies)"})]}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Restricted"}),a.jsx("p",{className:"text-gray-600",children:"Only administrators can access the restock game."}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This feature allows direct inventory modifications and requires admin privileges."})]})]});x.useEffect(()=>{V.inventory_nm.orderBy("itemName").toArray().then(i),n("demo-volunteer")},[]);const u=x.useMemo(()=>r.filter(g=>g.onHandQty<=g.reorderThreshold),[r]);function h(g,j){o(v=>({...v,[g]:(v[g]||0)+j})),d(v=>v+Math.max(1,Math.floor(j/2)))}async function m(){const g=new Date().toISOString();await V.transaction("rw",V.inventory_nm,V.stock_moves_nm,async()=>{for(const[j,v]of Object.entries(l)){if(v<=0)continue;const w=await V.inventory_nm.get(j);w&&(await V.stock_moves_nm.add({id:nt(),itemId:j,qtyDelta:v,reason:"restock",createdAt:g}),await V.inventory_nm.update(j,{onHandQty:w.onHandQty+v,updatedAt:g}),await refreshAlertsFor(j))}}),await t("demo-volunteer",c,c>=50?"swift_stocker":void 0),o({}),d(0),i(await V.inventory_nm.orderBy("itemName").toArray()),alert("Restock committed ")}return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Restock Game"}),a.jsx("span",{className:"text-sm text-gray-600",children:"(Non-medical supplies)"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[a.jsxs("div",{className:"text-sm font-medium text-green-800",children:["Session tokens: ",c,"  Wallet: ",s]}),a.jsx("div",{className:"text-xs text-green-600",children:"Tap items to restock and earn tokens!"})]}),u.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("div",{className:"text-lg font-medium",children:" All items well stocked!"}),a.jsx("div",{className:"text-sm",children:"No low-stock items need restocking right now."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(g=>a.jsxs("div",{className:"card border-l-4 border-l-orange-500",children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.itemName}),a.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["On hand: ",a.jsx("span",{className:"font-semibold text-orange-600",children:g.onHandQty}),"  Threshold: ",g.reorderThreshold," ",g.unit]}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("button",{className:"btn-secondary text-sm px-3 py-1",onClick:()=>h(g.id,1),children:"Tap +1"}),a.jsx("button",{className:"btn-secondary text-sm px-3 py-1",onClick:()=>h(g.id,5),children:"+5"}),a.jsx("button",{className:"btn-secondary text-sm px-3 py-1",onClick:()=>h(g.id,10),children:"Hold +10"})]}),l[g.id]&&a.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["Pending: +",l[g.id]]})]},g.id))}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{className:"btn-primary",disabled:Object.keys(l).length===0,onClick:m,children:"Finish & Commit Restock"}),a.jsx("button",{className:"btn-secondary",onClick:()=>{o({}),d(0)},disabled:Object.keys(l).length===0,children:"Clear Pending"})]})]})}const e_=[{id:"sticker",name:"Volunteer Sticker Pack",cost:50,description:"Cool stickers for your gear"},{id:"cap",name:"MBHR Baseball Cap",cost:300,description:"Official volunteer cap"},{id:"lunch",name:"Free Lunch Voucher",cost:500,description:"Enjoy a meal on us!"},{id:"tshirt",name:"Premium T-Shirt",cost:800,description:"High-quality volunteer shirt"}];function t_(){const{wallet:e,spendTokens:t,ensureWallet:n}=Ff(),[s,r]=x.useState([]);x.useEffect(()=>{n("demo-volunteer")},[]);async function i(l){if(!await t("demo-volunteer",l.cost)){alert("Not enough tokens! Keep restocking to earn more.");return}alert(` Redeemed ${l.name}! Check with admin to collect your prize.`)}return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(nm,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Prize Shop"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"card bg-green-50 border-green-200",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-lg font-bold text-green-800",children:[e," Tokens"]}),a.jsx("div",{className:"text-sm text-green-600",children:"Available to spend"})]})]})}),a.jsxs("div",{className:"card bg-purple-50 border-purple-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ho,{className:"h-5 w-5 text-purple-600"}),a.jsx("div",{className:"font-medium text-purple-800",children:"Badges Earned"})]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:s.length===0?a.jsx("span",{className:"text-sm text-purple-600",children:"No badges yet"}):s.map(l=>a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:l.replace("_"," ")},l))})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e_.map(l=>{const o=e>=l.cost;return a.jsx("div",{className:`card transition-all hover:shadow-md ${o?"border-green-200 hover:border-green-300":"border-gray-200 opacity-75"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full mx-auto mb-3 flex items-center justify-center",children:a.jsx(nm,{className:"h-6 w-6 text-gray-600"})}),a.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l.name}),a.jsx("div",{className:"text-sm text-gray-600 mb-3",children:l.description}),a.jsxs("div",{className:"text-lg font-bold text-primary mb-3",children:[l.cost," tokens"]}),a.jsx("button",{className:`w-full ${o?"btn-primary":"btn-secondary opacity-50 cursor-not-allowed"}`,onClick:()=>o&&i(l),disabled:!o,children:o?"Redeem":"Need more tokens"})]})},l.id)})}),a.jsx("div",{className:"card bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("div",{className:"font-medium mb-1",children:" How to earn more tokens:"}),a.jsxs("ul",{className:"text-xs space-y-1 text-blue-700",children:[a.jsx("li",{children:" Restock low inventory items (+1-5 tokens per item)"}),a.jsx("li",{children:" Complete restock sessions (+bonus tokens)"}),a.jsx("li",{children:" Help during busy clinic days (+activity bonus)"})]})]})})]})}function n_(){var re,ie,R;const{currentUser:e}=De(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,l]=x.useState(""),[o,c]=x.useState(!0),[d,u]=x.useState(!1),[h,m]=x.useState(null),[g,j]=x.useState(null),[v,w]=x.useState(null),[p,f]=x.useState("all"),[y,N]=x.useState({medName:"",form:"tablet",strength:"",unit:"tablets",reorderThreshold:50,isControlled:!1}),[b,S]=x.useState({lotNumber:"",qtyOnHand:0,expiryDate:"",supplier:""});if(!e||!dn(e.role,"dispense"))return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Restricted"}),a.jsx("p",{className:"text-gray-600",children:"Only pharmacists and administrators can access pharmacy stock."})]});x.useEffect(()=>{k()},[]),x.useEffect(()=>{E()},[t,i,p]);const k=async()=>{c(!0);try{const[A,M]=await Promise.all([V.pharmacy_items.orderBy("medName").toArray(),V.pharmacy_batches.toArray()]),oe=A.map(be=>{var gr;const kt=M.filter(ct=>ct.itemId===be.id),St=new Date,Xn=new Date(St.getTime()+6*30*24*60*60*1e3),Qt=kt.filter(ct=>new Date(ct.expiryDate)<St).length,un=kt.filter(ct=>{const es=new Date(ct.expiryDate);return es>=St&&es<=Xn}).length,fl=(gr=kt.filter(ct=>ct.qtyOnHand>0).sort((ct,es)=>new Date(ct.expiryDate).getTime()-new Date(es.expiryDate).getTime())[0])==null?void 0:gr.expiryDate;return{...be,batches:kt.sort((ct,es)=>new Date(ct.expiryDate).getTime()-new Date(es.expiryDate).getTime()),totalBatches:kt.length,earliestExpiry:fl,expiredBatches:Qt,expiringSoonBatches:un}});n(oe)}catch(A){console.error("Error loading pharmacy data:",A)}finally{c(!1)}},E=()=>{let A=t;if(i.trim()){const M=i.toLowerCase();A=A.filter(oe=>oe.medName.toLowerCase().includes(M)||oe.strength.toLowerCase().includes(M)||oe.form.toLowerCase().includes(M))}switch(p){case"low_stock":A=A.filter(M=>M.onHandQty<=M.reorderThreshold);break;case"expired":A=A.filter(M=>M.expiredBatches>0);break;case"expiring_soon":A=A.filter(M=>M.expiringSoonBatches>0);break}r(A)},_=async A=>{if(A.preventDefault(),!y.medName.trim()){alert("Please enter medication name");return}try{const M={id:nt(),medName:y.medName.trim(),form:y.form,strength:y.strength.trim(),unit:y.unit,onHandQty:0,reorderThreshold:y.reorderThreshold,isControlled:y.isControlled,updatedAt:new Date().toISOString()};await V.pharmacy_items.add(M),await k(),u(!1),L()}catch(M){console.error("Error adding item:",M),alert("Failed to add medication")}},I=async A=>{if(A.preventDefault(),!h||!b.lotNumber.trim()||!b.expiryDate||b.qtyOnHand<=0){alert("Please fill all required fields");return}try{await V.transaction("rw",V.pharmacy_batches,V.pharmacy_items,async()=>{await V.pharmacy_batches.add({id:nt(),itemId:h,lotNumber:b.lotNumber.trim(),expiryDate:b.expiryDate,qtyOnHand:b.qtyOnHand,receivedAt:new Date().toISOString(),supplier:b.supplier.trim()||void 0});const M=await V.pharmacy_items.get(h);M&&await V.pharmacy_items.update(h,{onHandQty:M.onHandQty+b.qtyOnHand,updatedAt:new Date().toISOString()})}),await k(),m(null),z()}catch(M){console.error("Error adding batch:",M),alert("Failed to add batch")}},T=async A=>{if(confirm("Are you sure you want to delete this medication? This will also delete all associated batches."))try{await V.transaction("rw",V.pharmacy_items,V.pharmacy_batches,async()=>{await V.pharmacy_batches.where("itemId").equals(A).delete(),await V.pharmacy_items.delete(A)}),await k()}catch(M){console.error("Error deleting item:",M),alert("Failed to delete medication")}},L=()=>{N({medName:"",form:"tablet",strength:"",unit:"tablets",reorderThreshold:50,isControlled:!1}),j(null)},z=()=>{S({lotNumber:"",qtyOnHand:0,expiryDate:"",supplier:""})},H=A=>A.onHandQty===0?{label:"Out of Stock",color:"bg-red-100 text-red-800",icon:K0}:A.onHandQty<=A.reorderThreshold?{label:"Low Stock",color:"bg-yellow-100 text-yellow-800",icon:Ge}:{label:"In Stock",color:"bg-green-100 text-green-800",icon:Ss},ee=A=>{const M=new Date,oe=new Date(A),be=new Date(M.getTime()+6*30*24*60*60*1e3);return oe<M?{label:"Expired",color:"text-red-600 bg-red-50"}:oe<=be?{label:"Expiring Soon",color:"text-yellow-600 bg-yellow-50"}:{label:"Good",color:"text-green-600 bg-green-50"}};return o?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qt,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pharmacy Stock"}),a.jsx("p",{className:"text-gray-600",children:"Loading pharmaceutical inventory..."})]})]}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qt,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pharmacy Stock"}),a.jsx("p",{className:"text-gray-600",children:"Manage pharmaceutical inventory and batches"})]})]}),a.jsxs("button",{onClick:()=>u(!0),className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx($i,{className:"h-5 w-5"}),a.jsx("span",{children:"Add Medication"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[a.jsx("div",{className:"text-sm text-blue-600",children:"Total Medications"}),a.jsx("div",{className:"text-2xl font-bold text-blue-800",children:t.length})]}),a.jsxs("div",{className:"card bg-yellow-50 border-yellow-200",children:[a.jsx("div",{className:"text-sm text-yellow-600",children:"Low Stock Items"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:t.filter(A=>A.onHandQty<=A.reorderThreshold).length})]}),a.jsxs("div",{className:"card bg-red-50 border-red-200",children:[a.jsx("div",{className:"text-sm text-red-600",children:"Expired Batches"}),a.jsx("div",{className:"text-2xl font-bold text-red-800",children:t.reduce((A,M)=>A+M.expiredBatches,0)})]}),a.jsxs("div",{className:"card bg-orange-50 border-orange-200",children:[a.jsx("div",{className:"text-sm text-orange-600",children:"Expiring Soon"}),a.jsx("div",{className:"text-2xl font-bold text-orange-800",children:t.reduce((A,M)=>A+M.expiringSoonBatches,0)})]})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(zo,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:i,onChange:A=>l(A.target.value),className:"input-field pl-10",placeholder:"Search medications..."})]}),a.jsx("div",{className:"flex space-x-2",children:[{key:"all",label:"All Items"},{key:"low_stock",label:"Low Stock"},{key:"expired",label:"Expired"},{key:"expiring_soon",label:"Expiring Soon"}].map(A=>a.jsx("button",{onClick:()=>f(A.key),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${p===A.key?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:A.label},A.key))})]})}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Medication"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Batches"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Expiry"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(A=>{const M=H(A),oe=M.icon;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.medName," ",A.strength]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[A.form,"  ",A.unit,A.isControlled&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:"Controlled"})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.onHandQty}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Reorder at ",A.reorderThreshold]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.color}`,children:[a.jsx(oe,{className:"h-3 w-3 mr-1"}),M.label]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[a.jsx("div",{className:"text-sm text-gray-900",children:A.totalBatches}),(A.expiredBatches>0||A.expiringSoonBatches>0)&&a.jsxs("div",{className:"text-xs space-x-1",children:[A.expiredBatches>0&&a.jsxs("span",{className:"text-red-600",children:[A.expiredBatches," expired"]}),A.expiringSoonBatches>0&&a.jsxs("span",{className:"text-yellow-600",children:[A.expiringSoonBatches," expiring"]})]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:A.earliestExpiry?a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-900",children:new Date(A.earliestExpiry).toLocaleDateString()}),a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${ee(A.earliestExpiry).color}`,children:ee(A.earliestExpiry).label})]}):a.jsx("span",{className:"text-gray-400",children:""})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm space-x-2",children:[a.jsx("button",{onClick:()=>m(A.id),className:"text-primary hover:text-primary/80",title:"Add Batch",children:a.jsx($i,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>w(v===A.id?null:A.id),className:"text-blue-600 hover:text-blue-800",title:"View Batches",children:a.jsx(zo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>T(A.id),className:"text-red-600 hover:text-red-800",title:"Delete Item",children:a.jsx(q0,{className:"h-4 w-4"})})]})]},A.id)})})]}),s.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(qt,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No medications found"}),a.jsx("p",{className:"text-gray-600",children:i?"Try adjusting your search terms":"Add your first medication to get started"})]})]})}),v&&a.jsxs("div",{className:"card",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Batch Details - ",(re=t.find(A=>A.id===v))==null?void 0:re.medName]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lot Number"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(ie=t.find(A=>A.id===v))==null?void 0:ie.batches.map(A=>{const M=ee(A.expiryDate);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.lotNumber}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900",children:A.qtyOnHand}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900",children:new Date(A.expiryDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.color}`,children:M.label})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.supplier||""})]},A.id)})})]})})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Medication"}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication Name *"}),a.jsx("input",{type:"text",required:!0,value:y.medName,onChange:A=>N({...y,medName:A.target.value}),className:"input-field",placeholder:"e.g., Paracetamol"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Form"}),a.jsxs("select",{value:y.form,onChange:A=>N({...y,form:A.target.value}),className:"input-field",children:[a.jsx("option",{value:"tablet",children:"Tablet"}),a.jsx("option",{value:"capsule",children:"Capsule"}),a.jsx("option",{value:"syrup",children:"Syrup"}),a.jsx("option",{value:"injection",children:"Injection"}),a.jsx("option",{value:"cream",children:"Cream"}),a.jsx("option",{value:"drops",children:"Drops"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Strength"}),a.jsx("input",{type:"text",value:y.strength,onChange:A=>N({...y,strength:A.target.value}),className:"input-field",placeholder:"e.g., 500mg"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),a.jsxs("select",{value:y.unit,onChange:A=>N({...y,unit:A.target.value}),className:"input-field",children:[a.jsx("option",{value:"tablets",children:"Tablets"}),a.jsx("option",{value:"capsules",children:"Capsules"}),a.jsx("option",{value:"bottles",children:"Bottles"}),a.jsx("option",{value:"vials",children:"Vials"}),a.jsx("option",{value:"tubes",children:"Tubes"}),a.jsx("option",{value:"boxes",children:"Boxes"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Threshold"}),a.jsx("input",{type:"number",min:"0",value:y.reorderThreshold,onChange:A=>N({...y,reorderThreshold:parseInt(A.target.value)||0}),className:"input-field"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"isControlled",checked:y.isControlled,onChange:A=>N({...y,isControlled:A.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),a.jsx("label",{htmlFor:"isControlled",className:"text-sm text-gray-700",children:"Controlled substance"})]}),a.jsxs("div",{className:"flex space-x-4 pt-4",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Medication"}),a.jsx("button",{type:"button",onClick:()=>{u(!1),L()},className:"btn-secondary flex-1",children:"Cancel"})]})]})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add New Batch - ",(R=t.find(A=>A.id===h))==null?void 0:R.medName]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lot Number *"}),a.jsx("input",{type:"text",required:!0,value:b.lotNumber,onChange:A=>S({...b,lotNumber:A.target.value}),className:"input-field",placeholder:"Batch/Lot number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),a.jsx("input",{type:"number",required:!0,min:"1",value:b.qtyOnHand,onChange:A=>S({...b,qtyOnHand:parseInt(A.target.value)||0}),className:"input-field",placeholder:"Quantity received"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),a.jsx("input",{type:"date",required:!0,value:b.expiryDate,onChange:A=>S({...b,expiryDate:A.target.value}),className:"input-field"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier"}),a.jsx("input",{type:"text",value:b.supplier,onChange:A=>S({...b,supplier:A.target.value}),className:"input-field",placeholder:"Supplier name"})]}),a.jsxs("div",{className:"flex space-x-4 pt-4",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Batch"}),a.jsx("button",{type:"button",onClick:()=>{m(null),z()},className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})]})}function s_(){const[e,t]=x.useState([]),[n,s]=x.useState({patientId:"",itemId:"",dosage:"",frequency:"",durationDays:7,qty:10,notes:""}),[r,i]=x.useState(!1);x.useEffect(()=>{V.pharmacy_items.orderBy("medName").toArray().then(t)},[]);async function l(){if(!n.itemId||!n.dosage||!n.frequency){alert("Please fill in all required fields");return}i(!0);try{const c=nt();await V.prescriptions.add({id:c,visitId:nt(),patientId:n.patientId||"demo-patient",prescriberId:"doctor-1",createdAt:new Date().toISOString(),status:"open",lines:[{itemId:n.itemId,dosage:n.dosage,frequency:n.frequency,durationDays:n.durationDays,qty:n.qty,notes:n.notes||void 0}]}),s({patientId:"",itemId:"",dosage:"",frequency:"",durationDays:7,qty:10,notes:""}),alert(" Prescription saved successfully!")}catch(c){console.error("Error saving prescription:",c),alert("Failed to save prescription")}finally{i(!1)}}const o=e.find(c=>c.id===n.itemId);return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Vs,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"New Prescription"})]}),a.jsx("div",{className:"card max-w-2xl",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient ID (Optional)"}),a.jsx("input",{className:"input-field",placeholder:"Leave blank for demo patient",value:n.patientId,onChange:c=>s({...n,patientId:c.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medication *"}),a.jsxs("select",{className:"input-field",value:n.itemId,onChange:c=>s({...n,itemId:c.target.value}),children:[a.jsx("option",{value:"",children:"Select medication"}),e.map(c=>a.jsxs("option",{value:c.id,children:[c.medName," ",c.strength," (",c.form,") - ",c.onHandQty," ",c.unit," available"]},c.id))]})]}),o&&o.onHandQty<=o.reorderThreshold&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:a.jsxs("div",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Low Stock:"})," Only ",o.onHandQty," ",o.unit," remaining"]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dosage *"}),a.jsx("input",{className:"input-field",placeholder:"e.g., 1 tablet, 5ml",value:n.dosage,onChange:c=>s({...n,dosage:c.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequency *"}),a.jsx("input",{className:"input-field",placeholder:"e.g., twice daily, q8h",value:n.frequency,onChange:c=>s({...n,frequency:c.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (days)"}),a.jsx("input",{className:"input-field",type:"number",min:"1",max:"90",value:n.durationDays,onChange:c=>s({...n,durationDays:Number(c.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Quantity"}),a.jsx("input",{className:"input-field",type:"number",min:"1",value:n.qty,onChange:c=>s({...n,qty:Number(c.target.value)})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),a.jsx("textarea",{className:"input-field",rows:3,placeholder:"e.g., Take with food, avoid alcohol",value:n.notes,onChange:c=>s({...n,notes:c.target.value})})]}),a.jsxs("div",{className:"flex space-x-4 pt-4",children:[a.jsx("button",{className:"btn-primary flex-1",disabled:!n.itemId||!n.dosage||!n.frequency||r,onClick:l,children:r?"Saving...":"Save Prescription"}),a.jsx("button",{className:"btn-secondary",onClick:()=>s({patientId:"",itemId:"",dosage:"",frequency:"",durationDays:7,qty:10,notes:""}),children:"Clear Form"})]})]})})]})}function r_(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState([]),[l,o]=x.useState(""),[c,d]=x.useState(!1);x.useEffect(()=>{u()},[]);const u=async()=>{try{const[w,p,f]=await Promise.all([V.prescriptions.where("status").equals("open").toArray(),V.pharmacy_batches.toArray(),V.pharmacy_items.toArray()]);t(w),s(p),i(f)}catch(w){console.error("Error loading dispense data:",w)}},h=e.find(w=>w.id===l),m=h==null?void 0:h.lines[0],g=m?r.find(w=>w.id===m.itemId):null,j=x.useMemo(()=>m?n.filter(w=>w.itemId===m.itemId&&w.qtyOnHand>0).sort((w,p)=>w.expiryDate.localeCompare(p.expiryDate)):[],[m,n]);async function v(){if(!h||!m||!g)return;const w=j[0];if(!w){alert(" No available batches for this medication");return}if(new Date(w.expiryDate)<new Date){alert(" Selected batch has expired");return}if(w.qtyOnHand<m.qty){alert(` Insufficient stock. Available: ${w.qtyOnHand}, Required: ${m.qty}`);return}d(!0);try{const p=new Date().toISOString();await V.transaction("rw",V.pharmacy_batches,V.dispenses,V.pharmacy_items,V.stock_moves_rx,V.prescriptions,async()=>{await V.dispenses.add({id:nt(),prescriptionId:h.id,patientId:h.patientId,itemId:m.itemId,batchId:w.id,qty:m.qty,dispensedBy:"pharmacist-1",dispensedAt:p}),await V.pharmacy_batches.update(w.id,{qtyOnHand:w.qtyOnHand-m.qty}),await V.pharmacy_items.update(g.id,{onHandQty:Math.max(0,g.onHandQty-m.qty),updatedAt:p}),await V.stock_moves_rx.add({id:nt(),itemId:m.itemId,batchId:w.id,qtyDelta:-m.qty,reason:"dispense",createdAt:p}),await V.prescriptions.update(h.id,{status:"dispensed"})}),alert(" Medication dispensed successfully!"),o(""),await u()}catch(p){console.error("Error dispensing medication:",p),alert(" Failed to dispense medication")}finally{d(!1)}}return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(qt,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dispense Medication"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Open Prescriptions"}),e.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Vs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No open prescriptions"})]}):a.jsx("div",{className:"space-y-3",children:e.map(w=>{const p=w.lines[0],f=r.find(y=>y.id===(p==null?void 0:p.itemId));return a.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${l===w.id?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o(w.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:["Rx #",w.id.slice(-6)]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[f==null?void 0:f.medName," ",f==null?void 0:f.strength,"  ",p==null?void 0:p.qty]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[p==null?void 0:p.dosage,"  ",p==null?void 0:p.frequency]})]}),l===w.id&&a.jsx(Ss,{className:"h-5 w-5 text-primary"})]})},w.id)})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dispense Details"}),h?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Patient:"})," ",h.patientId]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Prescriber:"})," ",h.prescriberId]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Medication:"})," ",g==null?void 0:g.medName," ",g==null?void 0:g.strength]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Quantity:"})," ",m==null?void 0:m.qty," ",g==null?void 0:g.unit]})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Available Batches (FEFO)"}),j.length===0?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ge,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:"text-sm text-red-800",children:"No available batches"})]})}):a.jsx("div",{className:"space-y-2",children:j.slice(0,3).map((w,p)=>{const f=new Date(w.expiryDate)<new Date,y=new Date(w.expiryDate)<new Date(Date.now()+6*30*24*60*60*1e3);return a.jsx("div",{className:`p-3 border rounded-lg ${p===0?"border-green-200 bg-green-50":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium",children:["Lot: ",w.lotNumber,p===0&&a.jsx("span",{className:"ml-2 text-green-600",children:"(Next to dispense)"})]}),a.jsxs("div",{className:"text-xs text-gray-600",children:["Expires: ",new Date(w.expiryDate).toLocaleDateString(),"  Available: ",w.qtyOnHand]})]}),a.jsxs("div",{className:"flex flex-col space-y-1",children:[f&&a.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Expired"}),!f&&y&&a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Expiring Soon"})]})]})},w.id)})})]}),a.jsx("div",{className:"pt-4 border-t",children:a.jsx("button",{className:"btn-primary w-full",disabled:!l||j.length===0||c,onClick:v,children:c?"Dispensing...":"Dispense Medication"})})]}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"Select a prescription to dispense"})})]})]})]})}const Ad=["registration","vitals","consult","pharmacy"],cg=e=>Array.isArray(e)?e:[];function a_(){const{callNext:e,completeCurrent:t,estimateTailMinutes:n,issueTicket:s}=Rc(),[r,i]=x.useState([]),[l,o]=x.useState("vitals"),[c,d]=x.useState(0),u=_s(()=>V.tickets.toArray(),[],[]),h=_s(()=>V.tickets.where("currentStage").equals(l).toArray(),[l],[]),m=cg(u),g=cg(h);x.useEffect(()=>{j(),v()},[l]);const j=async()=>{try{const _=await V.queue_metrics.toArray();i(_)}catch(_){console.error("Error loading metrics:",_)}},v=async()=>{try{const _=await n(l);d(_)}catch(_){console.error("Error updating ETA:",_)}},w=g.filter(_=>_.state==="waiting"),p=g.find(_=>_.state==="in_progress"),f=async()=>{await e(l)&&await v()},y=async()=>{await t(l,240),await v()},N=async()=>{const _=["adult","child","antenatal"];for(let I=1;I<=8;I++)await s({siteId:"demo-site",category:_[I%3],priority:I<=2?"urgent":"normal",stage:Ad[Math.floor(Math.random()*Ad.length)]})},b=r.find(_=>_.stage===l),S=(b==null?void 0:b.avgServiceSec)??240,k=_=>{switch(_){case"registration":return"bg-blue-100 text-blue-800 border-blue-200";case"vitals":return"bg-green-100 text-green-800 border-green-200";case"consult":return"bg-purple-100 text-purple-800 border-purple-200";case"pharmacy":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},E=_=>_==="urgent"?"text-red-600":"text-gray-600";return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(cl,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Queue Management"})]}),a.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:Ad.map(_=>{const I=m.filter(T=>T.currentStage===_&&T.state!=="done").length;return a.jsxs("button",{onClick:()=>o(_),className:`px-4 py-2 rounded-lg border font-medium capitalize whitespace-nowrap ${l===_?k(_):"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[_," (",I,")"]},_)})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[a.jsx("div",{className:"text-sm text-blue-600",children:"Waiting"}),a.jsx("div",{className:"text-2xl font-bold text-blue-800",children:w.length})]}),a.jsxs("div",{className:"card bg-yellow-50 border-yellow-200",children:[a.jsx("div",{className:"text-sm text-yellow-600",children:"In Progress"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:p?"1":"0"})]}),a.jsxs("div",{className:"card bg-green-50 border-green-200",children:[a.jsx("div",{className:"text-sm text-green-600",children:"Avg Service Time"}),a.jsxs("div",{className:"text-2xl font-bold text-green-800",children:[Math.round(S/60),"m"]})]}),a.jsxs("div",{className:"card bg-purple-50 border-purple-200",children:[a.jsx("div",{className:"text-sm text-purple-600",children:"ETA for Last"}),a.jsxs("div",{className:"text-2xl font-bold text-purple-800",children:[c,"m"]})]})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("button",{className:"btn-primary flex items-center space-x-2",onClick:f,disabled:w.length===0||!!p,children:[a.jsx(dr,{className:"h-5 w-5"}),a.jsx("span",{children:"Call Next"})]}),a.jsxs("button",{className:"btn-secondary flex items-center space-x-2",onClick:y,disabled:!p,children:[a.jsx(ba,{className:"h-5 w-5"}),a.jsx("span",{children:"Complete Current"})]}),m.length===0&&a.jsxs("button",{className:"btn-secondary flex items-center space-x-2",onClick:N,children:[a.jsx(dl,{className:"h-5 w-5"}),a.jsx("span",{children:"Generate Demo Tickets"})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Now Serving"}),p?a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:p.number.split("-")[1]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold text-gray-900",children:p.number}),a.jsxs("div",{className:"text-sm text-gray-600 capitalize",children:[p.category,"  ",p.priority," priority"]})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(jn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No patient currently being served"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Waiting Queue (",w.length,")"]}),w.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsxs("p",{children:["No patients waiting in ",l]})}):a.jsxs("div",{className:"space-y-2",children:[w.slice(0,10).map((_,I)=>a.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${I===0?"border-green-200 bg-green-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:I+1}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:_.number}),a.jsxs("div",{className:"text-sm text-gray-600 capitalize",children:[_.category," ",a.jsxs("span",{className:E(_.priority),children:[_.priority," priority"]})]})]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:I===0?"Next":`~${I*S/60}m`})]},_.id)),w.length>10&&a.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["... and ",w.length-10," more patients"]})]})]})]})}function i_(){const{issueTicket:e}=Rc(),[t,n]=x.useState({category:"adult",priority:"normal",patientId:"",stage:"registration"}),[s,r]=x.useState(!1);async function i(l){l.preventDefault(),r(!0);try{const o=await e({siteId:"demo-site",category:t.category,priority:t.priority,patientId:t.patientId||void 0,stage:t.stage});alert(` Ticket issued: ${o.number}`),n({category:"adult",priority:"normal",patientId:"",stage:"registration"})}catch(o){console.error("Error issuing ticket:",o),alert(" Failed to issue ticket")}finally{r(!1)}}return a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(H0,{className:"h-8 w-8 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Issue Ticket"})]}),a.jsx("div",{className:"card max-w-md",children:a.jsxs("form",{onSubmit:i,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:t.category,onChange:l=>n({...t,category:l.target.value}),className:"input-field",children:[a.jsx("option",{value:"adult",children:"Adult"}),a.jsx("option",{value:"child",children:"Child"}),a.jsx("option",{value:"antenatal",children:"Antenatal"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),a.jsxs("select",{value:t.priority,onChange:l=>n({...t,priority:l.target.value}),className:"input-field",children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"urgent",children:"Urgent"}),a.jsx("option",{value:"low",children:"Low"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient ID (Optional)"}),a.jsx("input",{type:"text",value:t.patientId,onChange:l=>n({...t,patientId:l.target.value}),className:"input-field",placeholder:"Leave blank for walk-in"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Stage"}),a.jsxs("select",{value:t.stage,onChange:l=>n({...t,stage:l.target.value}),className:"input-field",children:[a.jsx("option",{value:"registration",children:"Registration"}),a.jsx("option",{value:"vitals",children:"Vitals"}),a.jsx("option",{value:"consult",children:"Consultation"}),a.jsx("option",{value:"pharmacy",children:"Pharmacy"})]})]}),a.jsx("button",{type:"submit",disabled:s,className:"btn-primary w-full",children:s?"Issuing...":"Issue Ticket"})]})}),a.jsxs("div",{className:"card bg-blue-50 border-blue-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(dl,{className:"h-5 w-5 text-blue-600"}),a.jsx("h3",{className:"font-medium text-blue-800",children:"How it works"})]}),a.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("p",{children:" Tickets are automatically numbered (A-001, B-001, C-001)"}),a.jsx("p",{children:" Categories: A=Adult, B=Child, C=Antenatal"}),a.jsx("p",{children:" Urgent tickets are prioritized in the queue"}),a.jsx("p",{children:" Patients can be linked to existing records"})]})]})]})}function l_(){const[e,t]=x.useState([]),[n,s]=x.useState(!0);return x.useEffect(()=>{(async()=>{s(!0);const r=await Ff.getState().leaderboard("all",50),i=await D.users.toArray(),l=new Map(i.map(o=>[o.id,o.fullName??o.id]));t(r.map(o=>({...o,name:l.get(o.volunteerId)??o.volunteerId}))),s(!1)})()},[]),n?a.jsx("div",{className:"p-6",children:"Loading leaderboard"}):a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Volunteer Leaderboard"}),a.jsx("ol",{className:"divide-y rounded-2xl border",children:e.map((r,i)=>a.jsxs("li",{className:"flex items-center justify-between p-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-8 text-center font-mono",children:i+1}),a.jsx("span",{className:"font-medium",children:r.name})]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-semibold",children:r.tokens})," tokens"]})]},r.volunteerId))})]})}const o_=["registration","vitals","consult","pharmacy"];function c_(){const[e,t]=x.useState([]);return x.useEffect(()=>{const n=_c(async()=>{const s=[];for(const r of o_){const i=await V.tickets.where({currentStage:r,state:"in_progress"}).reverse().sortBy("createdAt").then(o=>{var c;return(c=o.at(-1))==null?void 0:c.number}),l=await V.tickets.where({currentStage:r,state:"waiting"}).limit(3).sortBy("createdAt").then(o=>o.map(c=>c.number));s.push({stage:r,current:i,next:l})}return s}).subscribe(t);return()=>n.unsubscribe()},[]),a.jsxs("div",{className:"min-h-screen bg-black text-white p-8 font-semibold",children:[a.jsx("h1",{className:"text-4xl mb-6",children:"Now Serving"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(n=>a.jsxs("div",{className:"rounded-2xl p-6 bg-zinc-900 border border-zinc-700",children:[a.jsx("div",{className:"text-zinc-400 text-xl capitalize",children:n.stage}),a.jsx("div",{className:"text-5xl md:text-6xl my-2 tabular-nums",children:n.current??""}),a.jsx("div",{className:"text-zinc-400 text-sm",children:"Up next"}),a.jsx("div",{className:"flex gap-3 text-2xl mt-1 tabular-nums",children:n.next.length?n.next.map(s=>a.jsx("span",{children:s},s)):a.jsx("span",{children:""})})]},n.stage))}),a.jsx("div",{className:"mt-6 text-zinc-500 text-sm",children:"Auto-updates offline via IndexedDB"})]})}class d_ extends Dt{constructor(){super("gamification_db"),this.version(1).stores({game_tasks:"id, code, category, activeFrom, activeTo",game_attempts:"id, taskCode, actorId, startedAt, finishedAt, status, _dirty, _syncedAt",badges:"id, code, category, rarity",badge_awards:"id, badgeCode, actorId, awardedAt, _dirty, _syncedAt",wallets:"actorId, level, streakDays, updatedAt, _dirty, _syncedAt",leader_events:"id, actorId, metric, at, _dirty, _syncedAt",team_goals:"id, status, startDate, endDate, metric"})}}const ze=new d_,Et=()=>Ec();function u_(e,t={}){const{streak:n=0,accuracy:s=1,teamBonus:r=0,speedBonus:i=1,qualityBonus:l=1}=t,o=1+Math.min(n,5)*.1,c=Math.max(.8,Math.min(1.3,s)),d=Math.round(e*o*c*i*l)+r;return Math.max(1,d)}async function m_(e,t){const n=[];try{const s=await ze.game_attempts.where("actorId").equals(e).and(u=>u.status==="verified"||u.status==="completed").toArray(),r=await ze.wallets.get(e),i=await ze.badge_awards.where("actorId").equals(e).toArray(),l=new Set(i.map(u=>u.badgeCode)),o=s.filter(u=>u.taskCode===t),c=s.length,d=(r==null?void 0:r.lifetimeTokens)||0;o.length===1&&!l.has("first_quest")&&n.push("first_quest"),(r==null?void 0:r.streakDays)>=7&&!l.has("week_warrior")&&n.push("week_warrior"),d>=1e3&&!l.has("token_collector")&&n.push("token_collector"),t==="queue_maestro"&&s.filter(h=>h.taskCode==="queue_maestro").length>=50&&!l.has("flow_master")&&n.push("flow_master");for(const u of n)await ze.badge_awards.add({id:Et(),badgeCode:u,actorId:e,awardedAt:new Date().toISOString(),reason:`Earned through ${t}`,_dirty:1})}catch(s){console.error("Error checking badge eligibility:",s)}return n}async function f_(e,t,n=!0){var o;const s=new Date().toISOString(),r=s.split("T")[0];let i=await ze.wallets.get(e);i||(i={actorId:e,tokens:0,lifetimeTokens:0,level:1,streakDays:0,updatedAt:s,_dirty:1}),i.tokens+=t,i.lifetimeTokens+=t;const l=(o=i.lastActiveDate)==null?void 0:o.split("T")[0];if(n&&!(!l||l===r)){const c=new Date;c.setDate(c.getDate()-1);const d=c.toISOString().split("T")[0];l===d?i.streakDays+=1:i.streakDays=1}return i.level=Math.floor(i.lifetimeTokens/500)+1,i.lastActiveDate=s,i.updatedAt=s,i._dirty=1,await ze.wallets.put(i),i}async function h_(){try{if(await ze.game_tasks.count()>0)return;console.log(" Seeding gamification data...");const t=[{id:Et(),code:"queue_maestro",title:"Queue Maestro",description:"Process patients efficiently through care stages",baseTokens:15,estimatedMinutes:5,validators:["service_time","handoff_clean"],category:"clinic-flow",requiredRole:["nurse","volunteer","admin"],cooldownMinutes:2,maxPerDay:50,updatedAt:new Date().toISOString()},{id:Et(),code:"vitals_precision",title:"Vitals Precision",description:"Capture accurate vital signs with validation",baseTokens:12,estimatedMinutes:3,validators:["completeness","range_check"],category:"clinic-flow",requiredRole:["nurse","volunteer","admin"],cooldownMinutes:1,maxPerDay:100,updatedAt:new Date().toISOString()},{id:Et(),code:"restock_blitz",title:"Restock Blitz",description:"Restock low inventory items quickly and accurately",baseTokens:8,estimatedMinutes:2,validators:["quantity_check","combo_meter"],category:"inventory",requiredRole:["volunteer","nurse","admin"],cooldownMinutes:0,maxPerDay:20,updatedAt:new Date().toISOString()},{id:Et(),code:"knowledge_blitz",title:"Knowledge Blitz",description:"60-second quiz on protocols and procedures",baseTokens:10,estimatedMinutes:1,validators:["accuracy","speed"],category:"knowledge",cooldownMinutes:60,maxPerDay:5,updatedAt:new Date().toISOString()},{id:Et(),code:"shelf_sleuth",title:"Shelf Sleuth",description:"Verify inventory counts and find discrepancies",baseTokens:20,estimatedMinutes:8,validators:["accuracy","discoveries"],category:"inventory",requiredRole:["volunteer","nurse","pharmacist","admin"],cooldownMinutes:30,maxPerDay:10,updatedAt:new Date().toISOString()}];await ze.game_tasks.bulkAdd(t);const n=[{id:Et(),code:"first_quest",name:"First Quest",description:"Complete your first gamified task",icon:"",category:"milestone",requirements:JSON.stringify({totalAttempts:1}),rarity:"common"},{id:Et(),code:"week_warrior",name:"Week Warrior",description:"Maintain a 7-day activity streak",icon:"",category:"streak",requirements:JSON.stringify({streakDays:7}),rarity:"rare"},{id:Et(),code:"flow_master",name:"Flow Master",description:"Complete 50 Queue Maestro challenges",icon:"",category:"expertise",requirements:JSON.stringify({taskCode:"queue_maestro",count:50}),rarity:"epic"},{id:Et(),code:"token_collector",name:"Token Collector",description:"Earn 1,000 lifetime tokens",icon:"",category:"milestone",requirements:JSON.stringify({lifetimeTokens:1e3}),rarity:"rare"},{id:Et(),code:"eagle_eye",name:"Eagle Eye",description:"Achieve 100% accuracy in vitals for a week",icon:"",category:"precision",requirements:JSON.stringify({taskCode:"vitals_precision",accuracy:1,days:7}),rarity:"epic"},{id:Et(),code:"stock_sleuth",name:"Stock Sleuth",description:"Discover 10 inventory discrepancies",icon:"",category:"discovery",requirements:JSON.stringify({discoveries:10}),rarity:"rare"}];await ze.badges.bulkAdd(n),console.log(" Gamification data seeded successfully")}catch(e){console.error(" Failed to seed gamification data:",e)}}function p_({onStartQuest:e}){const{currentUser:t}=De(),[n,s]=x.useState([]),[r,i]=x.useState([]),[l,o]=x.useState(null),[c,d]=x.useState("daily"),[u,h]=x.useState(!0);x.useEffect(()=>{t&&m()},[t,c]);const m=async()=>{if(t)try{h(!0);const p=await ze.game_tasks.toArray(),f=t.role,y=p.filter(k=>{if(k.requiredRole&&!k.requiredRole.includes(f))return!1;const E=new Date().toISOString();return!(k.activeFrom&&E<k.activeFrom||k.activeTo&&E>k.activeTo)}),N=new Date().toISOString().split("T")[0],b=await ze.game_attempts.where("actorId").equals(t.id).and(k=>k.startedAt.startsWith(N)).toArray(),S=await ze.wallets.get(t.id);s(y),i(b),o(S||null)}catch(p){console.error("Error loading quest data:",p)}finally{h(!1)}},g=p=>{const f=r.filter(b=>b.taskCode===p.code),y=f.find(b=>b.status==="in_progress"),N=f.filter(b=>b.status==="completed"||b.status==="verified").length;if(y)return"in_progress";if(p.maxPerDay&&N>=p.maxPerDay)return"daily_limit";if(p.cooldownMinutes&&p.cooldownMinutes>0){const b=f.filter(S=>S.finishedAt).sort((S,k)=>k.finishedAt.localeCompare(S.finishedAt))[0];if(b){const S=new Date(b.finishedAt);if(S.setMinutes(S.getMinutes()+p.cooldownMinutes),new Date<S)return"cooldown"}}return"available"},j=(p,f)=>{const N=r.filter(b=>b.taskCode===p.code).filter(b=>b.status==="completed"||b.status==="verified").length;switch(f){case"in_progress":return{text:"In Progress",color:"text-blue-600 bg-blue-50",icon:dr};case"daily_limit":return{text:`Completed (${N}/${p.maxPerDay})`,color:"text-green-600 bg-green-50",icon:Ss};case"cooldown":return{text:"Cooling Down",color:"text-orange-600 bg-orange-50",icon:jn};case"available":return{text:"Available",color:"text-emerald-600 bg-emerald-50",icon:Ho};default:return{text:"Available",color:"text-gray-600 bg-gray-50",icon:Ho}}},v=p=>{switch(p){case"clinic-flow":return"";case"inventory":return"";case"knowledge":return"";case"community":return"";default:return""}},w=p=>{e&&e(p)};return u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading quests..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Wn,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quest Board"}),a.jsx("p",{className:"text-gray-600",children:"Complete tasks to earn tokens and badges"})]})]}),l&&a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:l.tokens}),a.jsx("div",{className:"text-sm text-gray-600",children:"Tokens"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["Level ",l.level]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Current Level"})]}),a.jsxs("div",{className:"text-center flex items-center space-x-1",children:[a.jsx(Sf,{className:"h-5 w-5 text-red-500"}),a.jsx("div",{className:"text-xl font-bold text-red-600",children:l.streakDays}),a.jsx("div",{className:"text-sm text-gray-600",children:"Day Streak"})]})]})]}),a.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[{key:"daily",label:"Daily Quests"},{key:"weekly",label:"Weekly Challenges"},{key:"event",label:"Special Events"}].map(p=>a.jsx("button",{onClick:()=>d(p.key),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${c===p.key?"bg-white text-primary shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:p.label},p.key))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>{const f=g(p),y=j(p,f),N=y.icon,b=f==="available";return a.jsxs("div",{className:`card transition-all hover:shadow-lg ${b?"border-emerald-200 hover:border-emerald-300":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-2xl",children:v(p.category)}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:p.title}),a.jsx("p",{className:"text-sm text-gray-600 capitalize",children:p.category.replace("-"," ")})]})]}),a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${y.color}`,children:[a.jsx(N,{className:"h-3 w-3 mr-1"}),y.text]})]}),a.jsx("p",{className:"text-sm text-gray-700 mb-4",children:p.description}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Est. ",p.estimatedMinutes," min"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(B0,{className:"h-4 w-4 text-yellow-500"}),a.jsxs("span",{className:"font-medium text-primary",children:[p.baseTokens," tokens"]})]})]}),p.maxPerDay&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[a.jsx("span",{children:"Daily Progress"}),a.jsxs("span",{children:[r.filter(S=>S.taskCode===p.code&&(S.status==="completed"||S.status==="verified")).length,"/",p.maxPerDay]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${Math.min(100,r.filter(S=>S.taskCode===p.code&&(S.status==="completed"||S.status==="verified")).length/p.maxPerDay*100)}%`}})})]}),a.jsx("button",{onClick:()=>w(p),disabled:!b,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${b?"bg-primary text-white hover:bg-primary/90":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:f==="in_progress"?"Continue Quest":"Start Quest"})]},p.id)})}),n.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Wn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Quests Available"}),a.jsx("p",{className:"text-gray-600",children:"Check back later for new challenges!"})]})]})}const g_=["registration","vitals","consult","pharmacy"];function x_({onComplete:e,onCancel:t}){const{currentUser:n}=De(),{callNext:s,completeCurrent:r}=Rc(),[i,l]=x.useState("registration"),[o,c]=x.useState(null),[d,u]=x.useState({patientsProcessed:0,averageTime:0,tokensEarned:0,speedBonuses:0}),h=_s(()=>V.tickets.where("currentStage").equals(i).toArray(),[i],[]),m=(h==null?void 0:h.filter(b=>b.state==="waiting"))||[],g=h==null?void 0:h.find(b=>b.state==="in_progress");x.useEffect(()=>{j()},[n]);const j=async()=>{if(n)try{const b=await ze.game_attempts.where("actorId").equals(n.id).and(S=>S.taskCode==="queue_maestro"&&S.status==="in_progress").first();c(b||null)}catch(b){console.error("Error loading current attempt:",b)}},v=async()=>{if(!(!n||o))try{const b={id:Et(),taskCode:"queue_maestro",actorId:n.id,payloadJson:JSON.stringify({stage:i,startedAt:new Date().toISOString(),patientsProcessed:0,totalServiceTime:0}),startedAt:new Date().toISOString(),status:"in_progress",_dirty:1};await ze.game_attempts.add(b),c(b)}catch(b){console.error("Error starting quest:",b)}},w=async()=>{if(!(!o||!n))try{const b=await s(i);if(!b){alert("No patients waiting in this stage");return}const S=Math.random()*6+2;setTimeout(async()=>{await p(b.id,S)},2e3)}catch(b){console.error("Error processing patient:",b)}},p=async(b,S)=>{if(!(!o||!n))try{await r(i,S*60);const k=JSON.parse(o.payloadJson);k.patientsProcessed+=1,k.totalServiceTime+=S;const E=k.totalServiceTime/k.patientsProcessed,I=E<=4?1.2:1;u(L=>({patientsProcessed:k.patientsProcessed,averageTime:E,tokensEarned:L.tokensEarned,speedBonuses:L.speedBonuses+(I>1?1:0)})),await ze.game_attempts.update(o.id,{payloadJson:JSON.stringify(k),_dirty:1});const T=await ze.game_attempts.get(o.id);c(T||null)}catch(k){console.error("Error completing patient processing:",k)}},f=async()=>{if(!(!o||!n))try{const b=JSON.parse(o.payloadJson),S=new Date().toISOString(),k=15,E=b.patientsProcessed,_=b.totalServiceTime/Math.max(1,E),T=_<=4?1.2:_<=6?1:.8,L=E>=5?1.1:1,z=await ze.wallets.get(n.id),H=(z==null?void 0:z.streakDays)||0,ee=u_(k*E,{streak:H,accuracy:1,speedBonus:T,qualityBonus:L});await ze.game_attempts.update(o.id,{finishedAt:S,status:"completed",score:Math.round(_*100)/100,tokens:ee,multipliersJson:JSON.stringify({speedBonus:T,volumeBonus:L,streakBonus:1+Math.min(H,5)*.1}),_dirty:1}),await f_(n.id,ee,!0);const re=await m_(n.id,"queue_maestro");u(ie=>({...ie,tokensEarned:ee})),c(null),e&&e(ee,re),alert(` Quest Complete!

Patients Processed: ${E}
Average Time: ${_.toFixed(1)} min
Tokens Earned: ${ee}
${re.length>0?`New Badges: ${re.join(", ")}`:""}`)}catch(b){console.error("Error completing quest:",b)}},y=async()=>{if(o)try{await ze.game_attempts.delete(o.id),c(null),u({patientsProcessed:0,averageTime:0,tokensEarned:0,speedBonuses:0}),t&&t()}catch(b){console.error("Error canceling quest:",b)}},N=o?JSON.parse(o.payloadJson):null;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-3xl",children:""}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Queue Maestro"}),a.jsx("p",{className:"text-gray-600",children:"Process patients efficiently through care stages"})]})]}),o&&a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(N==null?void 0:N.patientsProcessed)||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Processed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(N==null?void 0:N.patientsProcessed)>0?(N.totalServiceTime/N.patientsProcessed).toFixed(1):"0.0","m"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Time"})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Stage"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:g_.map(b=>{const S=(h==null?void 0:h.filter(k=>k.currentStage===b&&k.state!=="done").length)||0;return a.jsxs("button",{onClick:()=>l(b),disabled:!!o,className:`p-4 rounded-lg border font-medium capitalize transition-colors ${i===b?"bg-primary text-white border-primary":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"} ${o?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("div",{className:"text-lg font-bold",children:S}),a.jsx("div",{className:"text-sm",children:b})]},b)})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quest Status"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(B0,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{className:"font-medium text-primary",children:"15 tokens per patient"})]})]}),o?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium text-blue-800",children:"Quest in Progress"}),a.jsxs("span",{className:"text-sm text-blue-600",children:["Stage: ",i]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Patients:"}),a.jsx("span",{className:"ml-2 font-medium",children:(N==null?void 0:N.patientsProcessed)||0})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Avg Time:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[(N==null?void 0:N.patientsProcessed)>0?(N.totalServiceTime/N.patientsProcessed).toFixed(1):"0.0","m"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600",children:"Target:"}),a.jsx("span",{className:"ml-2 font-medium",children:"4.0m"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:g?a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600",children:[a.jsx(jn,{className:"h-5 w-5"}),a.jsxs("span",{children:["Patient ",g.number," in progress"]})]}):a.jsx("div",{className:"flex items-center space-x-2 text-gray-600",children:a.jsx("span",{children:"Ready for next patient"})})}),a.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," waiting"]})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("button",{onClick:w,disabled:m.length===0||!!g,className:"btn-primary flex-1 inline-flex items-center justify-center space-x-2",children:[a.jsx(dr,{className:"h-5 w-5"}),a.jsx("span",{children:"Process Next Patient"})]}),(N==null?void 0:N.patientsProcessed)>0&&a.jsxs("button",{onClick:f,className:"btn-secondary inline-flex items-center space-x-2",children:[a.jsx(ba,{className:"h-5 w-5"}),a.jsx("span",{children:"Complete Quest"})]}),a.jsx("button",{onClick:y,className:"btn-secondary text-red-600 hover:bg-red-50",children:"Cancel"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Wn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Ready to start processing patients in ",i,"?"]}),a.jsxs("button",{onClick:v,disabled:m.length===0,className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx(dr,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Quest"})]}),m.length===0&&a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No patients waiting in this stage"})]})]}),a.jsxs("div",{className:"card bg-green-50 border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[a.jsx(Sf,{className:"h-5 w-5 text-green-600"}),a.jsx("h4",{className:"font-medium text-green-800",children:"Performance Tips"})]}),a.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[a.jsx("p",{children:" Keep service time 4 minutes per patient for speed bonus"}),a.jsx("p",{children:" Process 5+ patients for volume bonus"}),a.jsx("p",{children:" Maintain daily streaks for streak multiplier"}),a.jsx("p",{children:" Clean handoffs (no patient returns) boost your score"})]})]})]})}async function vv(){if(await V.inventory_nm.count())return;const t=new Date().toISOString();await V.inventory_nm.bulkAdd([{id:nt(),itemName:"Water (0.5L)",unit:"bottles",onHandQty:120,reorderThreshold:60,updatedAt:t},{id:nt(),itemName:"Volunteer T-shirt (L)",unit:"pcs",onHandQty:18,reorderThreshold:40,updatedAt:t},{id:nt(),itemName:"Wristbands",unit:"pcs",onHandQty:5,reorderThreshold:30,updatedAt:t}]),await V.pharmacy_items.bulkAdd([{id:nt(),medName:"Paracetamol",form:"tab",strength:"500mg",unit:"tabs",onHandQty:520,reorderThreshold:100,updatedAt:t},{id:nt(),medName:"Amoxicillin",form:"cap",strength:"500mg",unit:"caps",onHandQty:180,reorderThreshold:60,updatedAt:t}]);const n=await V.pharmacy_items.where("medName").equals("Paracetamol").first(),s=await V.pharmacy_items.where("medName").equals("Amoxicillin").first();n&&await V.pharmacy_batches.add({id:nt(),itemId:n.id,lotNumber:"PAR2024001",expiryDate:"2025-12-31",qtyOnHand:520,receivedAt:t,supplier:"MedSupply Co"}),s&&await V.pharmacy_batches.add({id:nt(),itemId:s.id,lotNumber:"AMX2024001",expiryDate:"2025-06-30",qtyOnHand:180,receivedAt:t,supplier:"PharmaCorp"}),await V.gamification.add({id:"demo",volunteerId:"demo",tokens:450,badges:["first_restock","team_player"],updatedAt:t});const r=["registration","vitals","consult","pharmacy"];for(const i of r)await V.queue_metrics.add({id:`m-${i}`,stage:i,avgServiceSec:240,updatedAt:t});console.log(" MBHR demo data seeded")}function y_({className:e=""}){const{currentUser:t}=De(),[n,s]=x.useState(null),[r,i]=x.useState([]),[l,o]=x.useState(!0);x.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{const[u,h]=await Promise.all([D.gamificationWallets.get(t.id),D.gameSessions.where("volunteerId").equals(t.id).and(m=>!m.committed&&m.finishedAt).toArray()]);s(u),i(h)}catch(u){console.error("Error loading game data:",u)}finally{o(!1)}},d=[{id:"vitals",name:"Vitals Precision",description:"Validate vital signs with accuracy bonuses",icon:Nn,color:"bg-green-500 hover:bg-green-600",baseTokens:8,estimatedMinutes:3,href:"/games/vitals-precision"},{id:"shelf",name:"Shelf Sleuth",description:"Verify inventory counts and find discrepancies",icon:Mi,color:"bg-blue-500 hover:bg-blue-600",baseTokens:12,estimatedMinutes:5,href:"/games/shelf-sleuth"},{id:"quiz",name:"Knowledge Blitz",description:"60-second protocol and procedure quizzes",icon:Ua,color:"bg-purple-500 hover:bg-purple-600",baseTokens:10,estimatedMinutes:1,href:"/games/knowledge-blitz"},{id:"triage",name:"Triage Sprint",description:"Quick priority assessment challenges",icon:Ge,color:"bg-orange-500 hover:bg-orange-600",baseTokens:15,estimatedMinutes:2,href:"/games/triage-sprint"},{id:"vitals-enhanced",name:"Enhanced Vitals",description:"Age/sex-specific vital signs validation",icon:Nn,color:"bg-emerald-500 hover:bg-emerald-600",baseTokens:12,estimatedMinutes:4,href:"/games/vitals-precision-enhanced"}];return l?a.jsx("div",{className:`space-y-6 ${e}`,children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((u,h)=>a.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"},h))})]})}):a.jsxs("div",{className:`space-y-6 ${e}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Wn,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Game Hub"}),a.jsx("p",{className:"text-gray-600",children:"Earn tokens and badges through clinic work"})]})]}),n&&a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:n.tokens}),a.jsx("div",{className:"text-sm text-gray-600",children:"Tokens"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["Level ",n.level]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Current Level"})]}),a.jsxs("div",{className:"text-center flex items-center space-x-1",children:[a.jsx(Sf,{className:"h-5 w-5 text-red-500"}),a.jsx("div",{className:"text-xl font-bold text-red-600",children:n.streakDays}),a.jsx("div",{className:"text-sm text-gray-600",children:"Day Streak"})]})]})]}),r.length>0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(jn,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-medium text-yellow-800",children:["Pending Approval (",r.length," sessions)"]}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Your completed game sessions are waiting for supervisor approval to mint tokens."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map(u=>a.jsx(As,{to:u.href,className:`${u.color} text-white rounded-lg p-6 transition-all hover:scale-105 transform group`,children:a.jsxs("div",{className:"text-center",children:[a.jsx(u.icon,{className:"h-12 w-12 mx-auto mb-4 group-hover:scale-110 transition-transform"}),a.jsx("h3",{className:"text-lg font-bold mb-2",children:u.name}),a.jsx("p",{className:"text-sm opacity-90 mb-4",children:u.description}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:[u.estimatedMinutes," min"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ho,{className:"h-4 w-4"}),a.jsxs("span",{children:[u.baseTokens," tokens"]})]})]})]})},u.id))}),(n==null?void 0:n.badges.length)>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Badges"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.badges.slice(-6).map((u,h)=>a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:[" ",u.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())]},h))})]}),!n&&a.jsx("div",{className:"card bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Wn,{className:"h-12 w-12 mx-auto text-blue-600 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Welcome to the Game Hub!"}),a.jsx("p",{className:"text-blue-700 mb-4",children:"Complete your first game to start earning tokens and badges."}),a.jsx("p",{className:"text-sm text-blue-600",children:"All games are based on real clinic work - you're helping patients while having fun!"})]})})]})}class oi{static calculateTokens(t,n={}){const{streak:s=0,accuracy:r=1,teamBonus:i=0,speedBonus:l=1,qualityBonus:o=1}=n,c=1+Math.min(s,5)*.1,d=Math.max(.8,Math.min(1.3,r)),u=Math.round(t*c*d*l*o)+i;return Math.max(1,u)}static async startSession(t,n,s={}){const r={id:Be(),type:t,volunteerId:n,startedAt:new Date,score:0,tokensEarned:0,payloadJson:JSON.stringify(s),committed:!1,committed_idx:0,_dirty:1};return await D.gameSessions.add(r),r}static async completeSession(t,n){var s;await D.gameSessions.update(t,{finishedAt:new Date,score:n.score,tokensEarned:n.tokensEarned,payloadJson:JSON.stringify({...JSON.parse(((s=await D.gameSessions.get(t))==null?void 0:s.payloadJson)||"{}"),result:n,badges:n.badges}),_dirty:1})}static async approveSession(t,n){const s=await D.gameSessions.get(t);!s||s.committed||(await this.updateWallet(s.volunteerId,s.tokensEarned),await D.gameSessions.update(t,{committed:!0,_dirty:1}),await D.auditLogs.add({id:Be(),actorRole:"admin",action:"approve_game_session",entity:"game_session",entityId:t,at:new Date}))}static async updateWallet(t,n,s=!0){var c;const r=new Date,i=r.toISOString().split("T")[0];let l=await D.gamificationWallets.get(t);l||(l={volunteerId:t,tokens:0,badges:[],level:1,streakDays:0,lifetimeTokens:0,updatedAt:r,_dirty:1}),l.tokens+=n,l.lifetimeTokens+=n;const o=(c=l.lastActiveDate)==null?void 0:c.toISOString().split("T")[0];if(s&&!(!o||o===i)){const d=new Date;d.setDate(d.getDate()-1);const u=d.toISOString().split("T")[0];o===u?l.streakDays+=1:l.streakDays=1}return l.level=Math.floor(l.lifetimeTokens/500)+1,l.lastActiveDate=r,l.updatedAt=r,l._dirty=1,await D.gamificationWallets.put(l),l}static async getLeaderboard(t="all",n=20){try{const s=await D.gamificationWallets.orderBy("tokens").reverse().limit(n).toArray(),r=s.map(o=>o.volunteerId),i=await D.users.where("id").anyOf(r).toArray(),l=new Map(i.map(o=>[o.id,o.fullName]));return s.map(o=>({volunteerId:o.volunteerId,tokens:o.tokens,name:l.get(o.volunteerId)||o.volunteerId}))}catch(s){return console.error("Error getting leaderboard:",s),[]}}static async checkBadgeEligibility(t,n){const s=[];try{const r=await D.gameSessions.where("volunteerId").equals(t).and(o=>o.committed).toArray(),i=await D.gamificationWallets.get(t),l=r.filter(o=>o.type===n);if(l.length===1&&s.push("first_quest"),(i==null?void 0:i.streakDays)>=7&&s.push("week_warrior"),(i==null?void 0:i.lifetimeTokens)>=1e3&&s.push("token_collector"),n==="vitals"&&l.length>=100&&s.push("vitals_master"),n==="shelf"&&l.length>=50&&s.push("shelf_sleuth"),i&&s.length>0){const o=[...new Set([...i.badges,...s])];await D.gamificationWallets.update(t,{badges:o,_dirty:1})}}catch(r){console.error("Error checking badge eligibility:",r)}return s}}function v_(){const{currentUser:e}=De(),t=cn(),[n,s]=x.useState(null),[r,i]=x.useState([]),[l,o]=x.useState(0),[c,d]=x.useState(null),[u,h]=x.useState([]),[m,g]=x.useState(60),[j,v]=x.useState(!1),[w,p]=x.useState(!1),[f,y]=x.useState(0),[N,b]=x.useState(0),S=[{id:"1",topic:"vital_signs",difficulty:"easy",stem:"What is the normal resting heart rate range for adults?",choices:["40-60 bpm","60-100 bpm","100-120 bpm","120-140 bpm"],answerIndex:1,explanation:"Normal adult resting heart rate is 60-100 beats per minute."},{id:"2",topic:"medication",difficulty:"medium",stem:"Which medication should be stored in a cool, dry place?",choices:["Paracetamol tablets","Insulin vials","Cough syrup","All of the above"],answerIndex:3,explanation:"All medications should be stored properly to maintain efficacy."},{id:"3",topic:"infection_control",difficulty:"easy",stem:"How long should you wash your hands with soap?",choices:["5 seconds","10 seconds","20 seconds","30 seconds"],answerIndex:2,explanation:"Proper handwashing requires at least 20 seconds with soap and water."},{id:"4",topic:"triage",difficulty:"medium",stem:"A patient with chest pain and difficulty breathing should be triaged as:",choices:["Low priority","Normal priority","Urgent priority","Can wait"],answerIndex:2,explanation:"Chest pain with breathing difficulty indicates potential cardiac emergency."},{id:"5",topic:"pharmacy",difficulty:"hard",stem:"FEFO stands for:",choices:["First Expired, First Out","First Entry, First Out","Fast Expiry, Fast Out","Final Entry, Final Out"],answerIndex:0,explanation:"FEFO ensures medications closest to expiry are dispensed first."},{id:"6",topic:"vital_signs",difficulty:"medium",stem:"Normal body temperature range is:",choices:["35.0-36.0C","36.1-37.2C","37.3-38.0C","38.1-39.0C"],answerIndex:1,explanation:"Normal body temperature ranges from 36.1C to 37.2C."},{id:"7",topic:"workflow",difficulty:"easy",stem:"What is the correct patient flow sequence?",choices:["Registration  Pharmacy  Vitals  Consult","Registration  Vitals  Consult  Pharmacy","Vitals  Registration  Consult  Pharmacy","Consult  Vitals  Registration  Pharmacy"],answerIndex:1,explanation:"Patients flow from Registration  Vitals  Consultation  Pharmacy."},{id:"8",topic:"safety",difficulty:"medium",stem:"If a patient reports an allergy to penicillin, you should:",choices:["Give them penicillin anyway","Note it clearly in their record","Ignore the information","Ask them to prove it"],answerIndex:1,explanation:"Drug allergies must be clearly documented to prevent adverse reactions."}];x.useEffect(()=>{if(j&&m>0&&!w){const T=setTimeout(()=>g(m-1),1e3);return()=>clearTimeout(T)}else m===0&&!w&&_()},[j,m,w]);const k=async()=>{if(e)try{const T=[...S].sort(()=>Math.random()-.5).slice(0,5),L=await oi.startSession("quiz",e.id,{totalQuestions:T.length,startTime:new Date().toISOString()});s(L),i(T),o(0),v(!0),g(60),h([]),d(null),y(0),b(0),p(!1)}catch(T){console.error("Error starting knowledge blitz:",T)}},E=()=>{if(c===null)return;const T=c===r[l].answerIndex,L=[...u,c];h(L);const z=T?f+1:0;y(z),b(Math.max(N,z)),l<r.length-1?setTimeout(()=>{o(l+1),d(null)},1e3):setTimeout(()=>{_()},1e3)},_=async()=>{if(!(!n||!e))try{p(!0);const T=u.filter((ie,R)=>{var A;return ie===((A=r[R])==null?void 0:A.answerIndex)}).length,L=T/r.length,z=m>=10?1.1:1,H=N>=5?1.2:1,ee=await D.gamificationWallets.get(e.id),re=oi.calculateTokens(10,{accuracy:L,streak:(ee==null?void 0:ee.streakDays)||0,speedBonus:z,qualityBonus:H});await oi.completeSession(n.id,{score:T,tokensEarned:re,badges:[],multipliers:{accuracy:L,speed:z,quality:H}}),setTimeout(()=>{t("/games")},5e3)}catch(T){console.error("Error ending game:",T)}};if(!j)return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ua,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Blitz"}),a.jsx("p",{className:"text-gray-600",children:"60-second rapid-fire quiz on protocols and procedures"})]})]}),a.jsx("div",{className:"card max-w-2xl mx-auto",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ua,{className:"h-16 w-16 mx-auto text-purple-500 mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ready for the Blitz?"}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"text-sm text-purple-800",children:[a.jsx("div",{className:"font-medium mb-2",children:" Challenge Rules:"}),a.jsxs("ul",{className:"text-xs space-y-1 text-purple-700 text-left",children:[a.jsx("li",{children:" 5 random questions in 60 seconds"}),a.jsx("li",{children:" +2 tokens per correct answer"}),a.jsx("li",{children:" +5 bonus for 5-question streak"}),a.jsx("li",{children:" +10% speed bonus if 10+ seconds remain"}),a.jsx("li",{children:" Topics: vitals, meds, protocols, safety"})]})]})}),a.jsx("button",{onClick:k,className:"btn-primary",children:"Start Knowledge Blitz"})]})})]});if(w){const T=u.filter((z,H)=>{var ee;return z===((ee=r[H])==null?void 0:ee.answerIndex)}).length,L=Math.round(T/r.length*100);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ua,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Blitz Complete!"}),a.jsx("p",{className:"text-gray-600",children:"Great job! Here are your results:"})]})]}),a.jsx("div",{className:"card max-w-2xl mx-auto",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:L>=80?"":L>=60?"":""}),a.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-bold text-primary",children:[T,"/",r.length]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[L,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold text-red-600",children:N}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Streak"})]})]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-green-800 font-medium",children:" Session completed! Waiting for supervisor approval to mint tokens."})}),a.jsx("button",{onClick:()=>t("/games"),className:"btn-primary",children:"Back to Game Hub"})]})})]})}const I=r[l];return I?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ua,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Blitz"}),a.jsxs("p",{className:"text-gray-600",children:["Question ",l+1," of ",r.length]})]})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:u.filter((T,L)=>{var z;return T===((z=r[L])==null?void 0:z.answerIndex)}).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Correct"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f}),a.jsx("div",{className:"text-sm text-gray-600",children:"Streak"})]}),a.jsxs("div",{className:"text-center flex items-center space-x-1",children:[a.jsx(jn,{className:"h-5 w-5 text-red-500"}),a.jsxs("div",{className:`text-2xl font-bold ${m<=10?"text-red-600 animate-pulse":"text-red-600"}`,children:[m,"s"]})]})]})]}),a.jsxs("div",{className:"card max-w-3xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 capitalize",children:[I.topic.replace("_"," "),"  ",I.difficulty]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[l+1,"/",r.length]})]}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:I.stem})]}),a.jsx("div",{className:"space-y-3 mb-6",children:I.choices.map((T,L)=>a.jsx("button",{onClick:()=>d(L),className:`w-full text-left p-4 rounded-lg border transition-all ${c===L?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${c===L?"border-primary bg-primary text-white":"border-gray-300"}`,children:a.jsx("span",{className:"text-sm font-medium",children:String.fromCharCode(65+L)})}),a.jsx("span",{className:"text-gray-900",children:T})]})},L))}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:E,disabled:c===null,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Answer"})})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsx("div",{className:"flex justify-center space-x-2",children:r.map((T,L)=>a.jsx("div",{className:`w-3 h-3 rounded-full ${L<l?"bg-green-500":L===l?"bg-primary":"bg-gray-300"}`},L))})})]}):null}const dg=e=>{if(!e)return;const t=e instanceof Date?e:new Date(e);return Number.isFinite(t.getTime())?t.toISOString():void 0},w_=(e,t)=>{const n=dg(e)??Dt.minKey,s=dg(t)??Dt.maxKey;return[n,s]},Oa=(e,t,n,s)=>{if(n||s){const[r,i]=w_(n,s);return e.where(t).between(r,i,!0,!0)}return e.orderBy(t)};function b_(){const{currentUser:e}=De(),[t,n]=x.useState(null),[s,r]=x.useState(!0),[i,l]=x.useState({from:new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]});if(!e||!dn(e.role,"export"))return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Jr,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Restricted"}),a.jsx("p",{className:"text-gray-600",children:"Only administrators can access the analytics dashboard."})]});x.useEffect(()=>{o()},[i]);const o=async()=>{r(!0);try{const c=i.from?new Date(i.from+"T00:00:00.000Z"):null,d=i.to?new Date(i.to+"T23:59:59.999Z"):null,[u,h,m,g]=await Promise.all([D.patients.count(),Oa(D.patients,"createdAt",c,d).count(),D.gameSessions.filter(N=>!N.committed&&!!N.finishedAt).count(),D.gamificationWallets.orderBy("tokens").reverse().limit(5).toArray()]),j=[];for(let N=6;N>=0;N--){const b=new Date;b.setDate(b.getDate()-N);const S=new Date(b.getFullYear(),b.getMonth(),b.getDate()),k=new Date(b.getFullYear(),b.getMonth(),b.getDate()+1),[E,_,I,T]=await Promise.all([Oa(D.patients,"createdAt",S,k).count(),Oa(D.vitals,"takenAt",S,k).count(),Oa(D.consultations,"createdAt",S,k).count(),Oa(D.dispenses,"dispensedAt",S,k).count()]);j.push({date:b.toISOString().split("T")[0],registrations:E,vitals:_,consultations:I,dispenses:T})}const v=await Promise.all(["registration","vitals","consult","pharmacy"].map(async N=>{const b=await D.queue.where("stage").equals(N).and(S=>S.status==="waiting").count();return{stage:N,avgWaitMinutes:15,throughput:0,currentWaiting:b}})),w=await D.users.toArray(),p=new Map(w.map(N=>[N.id,N.fullName])),f=g.map(N=>({name:p.get(N.volunteerId)||"Unknown",tokens:N.tokens,badges:N.badges.length})),y={overview:{totalPatients:u,todayRegistrations:h,activeVisits:0,completedVisits:0,avgWaitTime:15,tokensAwarded:g.reduce((N,b)=>N+b.tokens,0)},throughput:j,queueMetrics:v,gamification:{totalSessions:0,pendingApprovals:m,topPerformers:f}};n(y)}catch(c){console.error("Error loading analytics data:",c)}finally{r(!1)}};return s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Jr,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Loading clinic performance data..."})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((c,d)=>a.jsx("div",{className:"card animate-pulse",children:a.jsx("div",{className:"h-20 bg-gray-200 rounded"})},d))})]}):t?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Jr,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Clinic performance and gamification insights"})]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(kf,{className:"h-5 w-5 text-gray-400"}),a.jsx("input",{type:"date",value:i.from,onChange:c=>l({...i,from:c.target.value}),className:"input-field text-sm py-2"}),a.jsx("span",{className:"text-gray-500",children:"to"}),a.jsx("input",{type:"date",value:i.to,onChange:c=>l({...i,to:c.target.value}),className:"input-field text-sm py-2"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"card bg-blue-50 border-blue-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-blue-100",children:a.jsx(oa,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Patients"}),a.jsx("p",{className:"text-2xl font-bold text-blue-800",children:t.overview.totalPatients})]})]})}),a.jsx("div",{className:"card bg-green-50 border-green-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-green-100",children:a.jsx(Nn,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-green-600",children:"Active Visits"}),a.jsx("p",{className:"text-2xl font-bold text-green-800",children:t.overview.activeVisits})]})]})}),a.jsx("div",{className:"card bg-orange-50 border-orange-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-orange-100",children:a.jsx(jn,{className:"h-6 w-6 text-orange-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Avg Wait Time"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-800",children:[t.overview.avgWaitTime,"m"]})]})]})}),a.jsx("div",{className:"card bg-purple-50 border-purple-200",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-purple-100",children:a.jsx(Wn,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Tokens Awarded"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:t.overview.tokensAwarded})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Throughput"}),a.jsx("div",{className:"space-y-3",children:t.throughput.map((c,d)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:new Date(c.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsxs("div",{className:"flex space-x-4 text-sm",children:[a.jsxs("span",{className:"text-blue-600",children:[c.registrations," reg"]}),a.jsxs("span",{className:"text-green-600",children:[c.vitals," vitals"]}),a.jsxs("span",{className:"text-purple-600",children:[c.consultations," consult"]}),a.jsxs("span",{className:"text-orange-600",children:[c.dispenses," dispense"]})]})]},c.date))})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Queue Status"}),a.jsx("div",{className:"space-y-4",children:t.queueMetrics.map(c=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900 capitalize",children:c.stage}),a.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(Avg: ",c.avgWaitMinutes,"m)"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-lg font-bold text-primary",children:c.currentWaiting}),a.jsx("span",{className:"text-sm text-gray-600",children:"waiting"})]})]},c.stage))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performers"}),a.jsx("div",{className:"space-y-3",children:t.gamification.topPerformers.map((c,d)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-bold text-sm",children:d+1}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:c.name}),a.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:[c.badges," badges"]})]})]}),a.jsx("span",{className:"text-lg font-bold text-primary",children:c.tokens})]},d))})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Gamification Overview"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Total Game Sessions"}),a.jsx("span",{className:"text-lg font-bold text-gray-900",children:t.gamification.totalSessions})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Pending Approvals"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[t.gamification.pendingApprovals>0&&a.jsx(Ge,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-lg font-bold text-gray-900",children:t.gamification.pendingApprovals})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-700",children:"Total Tokens Awarded"}),a.jsx("span",{className:"text-lg font-bold text-primary",children:t.overview.tokensAwarded})]})]}),t.gamification.pendingApprovals>0&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsx("button",{className:"btn-primary w-full text-sm",children:"Review Pending Approvals"})})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Export"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsx("button",{className:"btn-secondary text-sm",children:"Export Analytics (CSV)"}),a.jsx("button",{className:"btn-secondary text-sm",children:"Export Gamification (CSV)"}),a.jsx("button",{className:"btn-secondary text-sm",children:"Export Queue Metrics (CSV)"}),a.jsx("button",{className:"btn-secondary text-sm",children:"Generate Report (PDF)"})]})]})]}):null}function j_(){const{currentUser:e}=De(),[t,n]=x.useState([]),[s,r]=x.useState(!0),[i,l]=x.useState(null);if(!e||!dn(e.role,"users"))return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Restricted"}),a.jsx("p",{className:"text-gray-600",children:"Only administrators can approve game sessions."})]});x.useEffect(()=>{o()},[]);const o=async()=>{try{const g=await D.gameSessions.where("committed").equals(!1).and(f=>!!f.finishedAt).toArray(),j=[...new Set(g.map(f=>f.volunteerId))],v=await D.users.where("id").anyOf(j).toArray(),w=new Map(v.map(f=>[f.id,f.fullName])),p=g.map(f=>({id:f.id,type:f.type,volunteerId:f.volunteerId,volunteerName:w.get(f.volunteerId)||"Unknown",startedAt:f.startedAt,finishedAt:f.finishedAt,score:f.score,tokensEarned:f.tokensEarned,payload:JSON.parse(f.payloadJson)}));n(p)}catch(g){console.error("Error loading pending sessions:",g)}finally{r(!1)}},c=async g=>{if(e){l(g);try{await oi.approveSession(g,e.id),await o()}catch(j){console.error("Error approving session:",j),alert("Failed to approve session")}finally{l(null)}}},d=async g=>{if(confirm("Are you sure you want to reject this session? This cannot be undone.")){l(g);try{await D.gameSessions.delete(g),await o()}catch(j){console.error("Error rejecting session:",j),alert("Failed to reject session")}finally{l(null)}}},u=async()=>{if(confirm(`Approve all ${t.length} pending sessions?`)){l("bulk");try{for(const g of t)await oi.approveSession(g.id,e.id);await o(),alert(` Approved ${t.length} sessions successfully!`)}catch(g){console.error("Error bulk approving:",g),alert("Failed to approve some sessions")}finally{l(null)}}},h=g=>({vitals:"Vitals Precision",shelf:"Shelf Sleuth",quiz:"Knowledge Blitz",triage:"Triage Sprint"})[g]||g,m=g=>({vitals:"bg-green-100 text-green-800",shelf:"bg-blue-100 text-blue-800",quiz:"bg-purple-100 text-purple-800",triage:"bg-orange-100 text-orange-800"})[g]||"bg-gray-100 text-gray-800";return s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Wn,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Approval Inbox"}),a.jsx("p",{className:"text-gray-600",children:"Loading pending game sessions..."})]})]}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Wn,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Approval Inbox"}),a.jsx("p",{className:"text-gray-600",children:"Review and approve completed game sessions"})]})]}),t.length>0&&a.jsxs("button",{onClick:u,disabled:i==="bulk",className:"btn-primary inline-flex items-center space-x-2",children:[a.jsx(Ss,{className:"h-5 w-5"}),a.jsx("span",{children:i==="bulk"?"Approving...":`Approve All (${t.length})`})]})]}),a.jsx("div",{className:"space-y-4",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ss,{className:"h-12 w-12 mx-auto text-green-500 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"All caught up!"}),a.jsx("p",{className:"text-gray-600",children:"No pending game sessions to review."})]}):t.map(g=>a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${m(g.type)}`,children:h(g.type)})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:g.volunteerName}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{children:["Score: ",g.score]}),a.jsxs("span",{children:["Duration: ",Math.round((g.finishedAt.getTime()-g.startedAt.getTime())/6e4),"m"]}),a.jsxs("span",{children:["Completed: ",g.finishedAt.toLocaleTimeString()]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-bold text-primary",children:g.tokensEarned}),a.jsx("div",{className:"text-sm text-gray-600",children:"tokens"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>c(g.id),disabled:i===g.id,className:"bg-green-100 text-green-800 px-3 py-2 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50",children:i===g.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):a.jsx(Ss,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>d(g.id),disabled:i===g.id,className:"bg-red-100 text-red-800 px-3 py-2 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",children:a.jsx(K0,{className:"h-4 w-4"})})]})]})]})},g.id))})]})}function N_({steps:e,onComplete:t,onCancel:n,className:s=""}){const{t:r,speak:i}=ja(),[l,o]=x.useState(0);l<e.length-1;const c=l>0,d=l===e.length-1,u=e[l],h=async()=>{if(d)t();else{o(l+1);const j=e[l+1];if(j.audioKey)try{await i(j.audioKey)}catch(v){console.warn("Audio playback failed:",v)}}},m=()=>{c&&o(l-1)},g=async()=>{if(u.audioKey)try{await i(u.audioKey)}catch(j){console.warn("Audio playback failed:",j)}};return a.jsxs("div",{className:`max-w-2xl mx-auto ${s}`,children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[r("stepper.step")," ",l+1," ",r("common.of")," ",e.length]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round((l+1)/e.length*100),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-primary h-3 rounded-full transition-all duration-300",style:{width:`${(l+1)/e.length*100}%`}})}),a.jsx("div",{className:"flex justify-between mt-2",children:e.map((j,v)=>a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${v<l?"bg-green-500 text-white":v===l?"bg-primary text-white":"bg-gray-300 text-gray-600"}`,children:v<l?a.jsx(ba,{className:"h-4 w-4"}):v+1},j.id))})]}),a.jsx("div",{className:"text-center mb-6",children:a.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u.title}),u.audioKey&&a.jsx("button",{onClick:g,className:"p-2 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 transition-colors touch-target",title:r("accessibility.playAudio"),children:a.jsx(Ic,{className:"h-5 w-5"})})]})}),a.jsx("div",{className:"card mb-8",children:u.component}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("button",{onClick:m,disabled:!c,className:"btn-secondary inline-flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(D2,{className:"h-5 w-5"}),a.jsx("span",{children:r("action.back")})]}),a.jsxs("div",{className:"flex space-x-4",children:[n&&a.jsx("button",{onClick:n,className:"btn-secondary",children:r("action.cancel")}),a.jsxs("button",{onClick:h,disabled:u.isValid===!1,className:"btn-primary inline-flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{children:r(d?"action.complete":"action.next")}),!d&&a.jsx(O2,{className:"h-5 w-5"})]})]})]})]})}function k_({value:e,onChange:t,min:n=0,max:s=100,step:r=1,label:i,unit:l,showDots:o=!0,className:c=""}){const[d,u]=x.useState(e.toString()),h=()=>{const v=Math.min(s,e+r);t(v),u(v.toString())},m=()=>{const v=Math.max(n,e-r);t(v),u(v.toString())},g=v=>{const w=v.target.value;u(w);const p=parseFloat(w);!isNaN(p)&&p>=n&&p<=s&&t(p)},j=()=>!o||e>20?null:a.jsx("div",{className:"flex flex-wrap gap-1 justify-center mt-3",children:Array.from({length:Math.floor(e)},(v,w)=>a.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"},w))});return a.jsxs("div",{className:`space-y-4 ${c}`,children:[a.jsx("label",{className:"block text-lg font-medium text-gray-700 text-center",children:i}),a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[a.jsx("button",{type:"button",onClick:m,disabled:e<=n,className:"w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed touch-target-large",children:a.jsx(tk,{className:"h-6 w-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("input",{type:"number",value:d,onChange:g,min:n,max:s,step:r,className:"w-24 text-3xl font-bold text-center border-2 border-gray-300 rounded-lg py-2 focus:border-primary focus:ring-2 focus:ring-primary/20"}),l&&a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:l})]}),a.jsx("button",{type:"button",onClick:h,disabled:e>=s,className:"w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed touch-target-large",children:a.jsx($i,{className:"h-6 w-6"})})]}),j()]})}function S_({onSuccess:e,onCancel:t}){const{t:n}=ja(),{addPatient:s}=Of(),[r,i]=x.useState({givenName:"",familyName:"",sex:"",age:25,phone:"",address:"",state:"",lga:"",photo:null}),[l,o]=x.useState(!1),c=m=>{var j;const g=(j=m.target.files)==null?void 0:j[0];if(g){const v=new FileReader;v.onload=w=>{var y;const p=(y=w.target)==null?void 0:y.result,f=new Image;f.onload=()=>{const N=document.createElement("canvas"),b=N.getContext("2d"),S=200;let{width:k,height:E}=f;k>E?k>S&&(E=E*S/k,k=S):E>S&&(k=k*S/E,E=S),N.width=k,N.height=E,b==null||b.drawImage(f,0,0,k,E);const _=N.toDataURL("image/jpeg",.8);i(I=>({...I,photo:_}))},f.src=p},v.readAsDataURL(g)}},d=m=>`${new Date().getFullYear()-m}-01-01`,u=async()=>{o(!0);try{const m=d(r.age),g=Lf(r.phone),j=await s({givenName:r.givenName,familyName:r.familyName,sex:r.sex,dob:m,phone:g,address:r.address,state:r.state,lga:r.lga,photoUrl:r.photo||void 0});e==null||e(j)}catch(m){console.error("Error registering patient:",m),alert(n("error.registrationFailed"))}finally{o(!1)}},h=[{id:"photo",title:n("patient.photo"),audioKey:"patient.photo",isValid:!0,component:a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{className:"relative mx-auto w-32 h-32",children:[r.photo?a.jsx("img",{src:r.photo,alt:"Patient",className:"w-32 h-32 rounded-full object-cover border-4 border-gray-200"}):a.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-100 flex items-center justify-center border-4 border-gray-200",children:a.jsx(Qn,{className:"h-16 w-16 text-gray-400"})}),a.jsxs("label",{className:"absolute bottom-0 right-0 bg-primary text-white rounded-full p-3 cursor-pointer hover:bg-primary/90 transition-colors touch-target-large shadow-lg",children:[a.jsx(V0,{className:"h-6 w-6"}),a.jsx("input",{type:"file",accept:"image/*",capture:"user",onChange:c,className:"hidden"})]})]}),a.jsx("p",{className:"text-lg text-gray-600",children:n("simple.tapCameraToAddPhoto")})]})},{id:"names",title:n("patient.names"),audioKey:"patient.names",isValid:r.givenName.trim()&&r.familyName.trim(),component:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-3 flex items-center space-x-2",children:[a.jsx(Lp,{className:"h-6 w-6 text-primary"}),a.jsxs("span",{children:[n("patient.givenName")," *"]})]}),a.jsx("input",{type:"text",value:r.givenName,onChange:m=>i(g=>({...g,givenName:m.target.value})),className:"input-field text-xl",placeholder:n("simple.enterFirstName"),autoFocus:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-3 flex items-center space-x-2",children:[a.jsx(Lp,{className:"h-6 w-6 text-primary"}),a.jsxs("span",{children:[n("patient.familyName")," *"]})]}),a.jsx("input",{type:"text",value:r.familyName,onChange:m=>i(g=>({...g,familyName:m.target.value})),className:"input-field text-xl",placeholder:n("simple.enterLastName")})]})]})},{id:"demographics",title:n("patient.demographics"),audioKey:"patient.demographics",isValid:r.sex&&r.age>0,component:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-4 text-center",children:[n("patient.sex")," *"]}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{value:"male",label:n("patient.male"),icon:"",color:"bg-blue-100 border-blue-300 text-blue-800"},{value:"female",label:n("patient.female"),icon:"",color:"bg-pink-100 border-pink-300 text-pink-800"},{value:"other",label:n("patient.other"),icon:"",color:"bg-gray-100 border-gray-300 text-gray-800"}].map(m=>a.jsxs("button",{type:"button",onClick:()=>i(g=>({...g,sex:m.value})),className:`p-6 rounded-xl border-2 transition-all touch-target-large ${r.sex===m.value?`${m.color} ring-2 ring-primary/20`:"bg-white border-gray-200 hover:border-gray-300"}`,children:[a.jsx("div",{className:"text-4xl mb-2",children:m.icon}),a.jsx("div",{className:"text-lg font-medium",children:m.label})]},m.value))})]}),a.jsx(k_,{value:r.age,onChange:m=>i(g=>({...g,age:m})),min:0,max:120,label:n("patient.age"),unit:n("common.years"),showDots:r.age<=10})]})},{id:"contact",title:n("patient.contact"),audioKey:"patient.contact",isValid:r.phone.trim(),component:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-3 flex items-center space-x-2",children:[a.jsx(Pc,{className:"h-6 w-6 text-primary"}),a.jsxs("span",{children:[n("patient.phone")," *"]})]}),a.jsx("input",{type:"tel",value:r.phone,onChange:m=>i(g=>({...g,phone:m.target.value})),className:"input-field text-xl",placeholder:"08012345678"}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:n("simple.phoneExample")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-3 flex items-center space-x-2",children:[a.jsx(Ac,{className:"h-6 w-6 text-primary"}),a.jsx("span",{children:n("patient.address")})]}),a.jsx("textarea",{value:r.address,onChange:m=>i(g=>({...g,address:m.target.value})),className:"input-field text-lg",rows:3,placeholder:n("simple.enterAddress")})]})]})},{id:"location",title:n("patient.location"),audioKey:"patient.location",isValid:r.state&&r.lga,component:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:[n("patient.state")," *"]}),a.jsxs("select",{value:r.state,onChange:m=>{i(g=>({...g,state:m.target.value,lga:""}))},className:"input-field text-xl",children:[a.jsx("option",{value:"",children:n("simple.selectState")}),xv.map(m=>a.jsx("option",{value:m,children:m},m))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:[n("patient.lga")," *"]}),a.jsxs("select",{value:r.lga,onChange:m=>i(g=>({...g,lga:m.target.value})),className:"input-field text-xl",disabled:!r.state,children:[a.jsx("option",{value:"",children:n("simple.selectLGA")}),(yv[r.state]||[]).map(m=>a.jsx("option",{value:m,children:m},m))]})]})]})}];return a.jsx(N_,{steps:h,onComplete:u,onCancel:t,className})}function __(){const{t:e}=ja(),t=cn(),n=r=>{t("/",{state:{message:e("patient.registrationSuccess"),patientId:r}})},s=()=>{t("/")};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[a.jsx("button",{onClick:()=>t("/"),className:"p-3 rounded-lg hover:bg-gray-100 transition-colors touch-target-large",children:a.jsx(bn,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("patient.register")}),a.jsx("p",{className:"text-lg text-gray-600",children:e("simple.registerDescription")})]})]}),a.jsx(S_,{onSuccess:n,onCancel:s})]})})}const E_=x.lazy(()=>Ut(()=>import("./PharmacyMenu-nxi_-Ef5.js"),[])),C_=x.lazy(()=>Ut(()=>Promise.resolve().then(()=>j3),void 0)),A_=x.lazy(()=>Ut(()=>import("./TriageSprint-D4WCmaX4.js"),[])),ug=x.lazy(()=>Ut(()=>import("./VitalsPrecisionGame-DhmoC-eU.js"),[])),P_=x.lazy(()=>Ut(()=>import("./QuickTriage-BlrMkQf8.js"),[]));x.lazy(()=>Ut(()=>import("./FEFODispenser-C34-cMpU.js"),[]));const I_=x.lazy(()=>Ut(()=>import("./EnhancedPharmacy-BZq8WjOs.js"),[]));function D_({children:e}){const{isAuthenticated:t}=De();return t?a.jsx(a.Fragment,{children:e}):a.jsx(Qb,{to:"/login",replace:!0})}function T_(){return x.useEffect(()=>{vv().catch(console.error)},[]),a.jsx(oj,{children:a.jsxs(ip,{children:[a.jsx(de,{path:"/login",element:a.jsx(Hk,{})}),a.jsx(de,{path:"/*",element:a.jsx(D_,{children:a.jsx(x.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),children:a.jsx(zk,{children:a.jsxs(ip,{children:[a.jsx(de,{path:"/",element:a.jsx(nS,{})}),a.jsx(de,{path:"/register",element:a.jsx(O5,{})}),a.jsx(de,{path:"/patients",element:a.jsx(L5,{})}),a.jsx(de,{path:"/patients/:id",element:a.jsx($5,{})}),a.jsx(de,{path:"/queue",element:a.jsx(z5,{})}),a.jsx(de,{path:"/inventory",element:a.jsx(G5,{})}),a.jsx(de,{path:"/users",element:a.jsx(Y5,{})}),a.jsx(de,{path:"/vitals",element:a.jsx(ig,{})}),a.jsx(de,{path:"/vitals/:visitId",element:a.jsx(ig,{})}),a.jsx(de,{path:"/consult",element:a.jsx(lg,{})}),a.jsx(de,{path:"/consult/:visitId",element:a.jsx(lg,{})}),a.jsx(de,{path:"/pharmacy",element:a.jsx(og,{})}),a.jsx(de,{path:"/pharmacy/:visitId",element:a.jsx(og,{})}),a.jsx(de,{path:"/inv/game",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(X5,{})})}),a.jsx(de,{path:"/inv/prizes",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(t_,{})})}),a.jsx(de,{path:"/rx/stock",element:a.jsx(Ke,{roles:["pharmacist","admin"],children:a.jsx(n_,{})})}),a.jsx(de,{path:"/rx/new",element:a.jsx(Ke,{roles:["doctor","nurse","admin"],children:a.jsx(s_,{})})}),a.jsx(de,{path:"/rx/dispense",element:a.jsx(Ke,{roles:["pharmacist","admin"],children:a.jsx(r_,{})})}),a.jsx(de,{path:"/tickets/queue",element:a.jsx(Ke,{roles:["nurse","doctor","admin"],children:a.jsx(a_,{})})}),a.jsx(de,{path:"/tickets/issue",element:a.jsx(Ke,{roles:["volunteer","nurse","doctor","admin"],children:a.jsx(i_,{})})}),a.jsx(de,{path:"/inv/leaderboard",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(l_,{})})}),a.jsx(de,{path:"/display",element:a.jsx(c_,{})}),a.jsx(de,{path:"/quests",element:a.jsx(p_,{})}),a.jsx(de,{path:"/games/queue-maestro",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(x_,{})})}),a.jsx(de,{path:"/games",element:a.jsx(y_,{})}),a.jsx(de,{path:"/games/vitals-precision",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(ug,{})})}),a.jsx(de,{path:"/games/knowledge-blitz",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(v_,{})})}),a.jsx(de,{path:"/games/triage-sprint",element:a.jsx(Ke,{roles:["nurse","doctor","admin"],children:a.jsx(A_,{})})}),a.jsx(de,{path:"/games/vitals-precision-enhanced",element:a.jsx(Ke,{roles:["volunteer","nurse","admin"],children:a.jsx(ug,{})})}),a.jsx(de,{path:"/analytics",element:a.jsx(Ke,{roles:["admin"],children:a.jsx(b_,{})})}),a.jsx(de,{path:"/admin/approvals",element:a.jsx(Ke,{roles:["admin"],children:a.jsx(j_,{})})}),a.jsx(de,{path:"/simple/register",element:a.jsx(__,{})}),a.jsx(de,{path:"/pharmacy",element:a.jsx(E_,{})}),a.jsx(de,{path:"/pharmacy/reports",element:a.jsx(Ke,{roles:["pharmacist","admin"],children:a.jsx(C_,{})})}),a.jsx(de,{path:"/pharmacy/enhanced/:visitId",element:a.jsx(Ke,{roles:["pharmacist","admin"],children:a.jsx(I_,{patientId:"",visitId:"",onSuccess:()=>{}})})}),a.jsx(de,{path:"/triage/quick",element:a.jsx(Ke,{roles:["nurse","doctor","admin"],children:a.jsx(P_,{onComplete:()=>{}})})})]})})})})})]})})}const ae=e=>typeof e=="string",La=()=>{let e,t;const n=new Promise((s,r)=>{e=s,t=r});return n.resolve=e,n.reject=t,n},mg=e=>e==null?"":""+e,O_=(e,t,n)=>{e.forEach(s=>{t[s]&&(n[s]=t[s])})},L_=/###/g,fg=e=>e&&e.indexOf("###")>-1?e.replace(L_,"."):e,hg=e=>!e||ae(e),ci=(e,t,n)=>{const s=ae(t)?t.split("."):t;let r=0;for(;r<s.length-1;){if(hg(e))return{};const i=fg(s[r]);!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++r}return hg(e)?{}:{obj:e,k:fg(s[r])}},pg=(e,t,n)=>{const{obj:s,k:r}=ci(e,t,Object);if(s!==void 0||t.length===1){s[r]=n;return}let i=t[t.length-1],l=t.slice(0,t.length-1),o=ci(e,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=ci(e,l,Object),o&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},R_=(e,t,n,s)=>{const{obj:r,k:i}=ci(e,t,Object);r[i]=r[i]||[],r[i].push(n)},tc=(e,t)=>{const{obj:n,k:s}=ci(e,t);if(n)return n[s]},M_=(e,t,n)=>{const s=tc(e,n);return s!==void 0?s:tc(t,n)},wv=(e,t,n)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in e?ae(e[s])||e[s]instanceof String||ae(t[s])||t[s]instanceof String?n&&(e[s]=t[s]):wv(e[s],t[s],n):e[s]=t[s]);return e},br=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const F_=e=>ae(e)?e.replace(/[&<>"'\/]/g,t=>$_[t]):e;class B_{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const V_=[" ",",","?","!",";"],U_=new B_(20),z_=(e,t,n)=>{t=t||"",n=n||"";const s=V_.filter(l=>t.indexOf(l)<0&&n.indexOf(l)<0);if(s.length===0)return!0;const r=U_.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!r.test(e);if(!i){const l=e.indexOf(n);l>0&&!r.test(e.substring(0,l))&&(i=!0)}return i},um=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const s=t.split(n);let r=e;for(let i=0;i<s.length;){if(!r||typeof r!="object")return;let l,o="";for(let c=i;c<s.length;++c)if(c!==i&&(o+=n),o+=s[c],l=r[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&c<s.length-1)continue;i+=c-i+1;break}r=l}return r},nc=e=>e&&e.replace("_","-"),H_={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class sc{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||H_,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,s,r){return r&&!this.debug?null:(ae(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new sc(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new sc(this.logger,t)}}var xn=new sc;class Mc{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(n)||0;this.observers[s].set(n,r+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(l=>{let[o,c]=l;for(let d=0;d<c;d++)o(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[o,c]=l;for(let d=0;d<c;d++)o.apply(o,[t,...s])})}}class gg extends Mc{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,n],s&&(Array.isArray(s)?o.push(...s):ae(s)&&i?o.push(...s.split(i)):o.push(s)));const c=tc(this.data,o);return!c&&!n&&!s&&t.indexOf(".")>-1&&(t=o[0],n=o[1],s=o.slice(2).join(".")),c||!l||!ae(s)?c:um(this.data&&this.data[t]&&this.data[t][n],s,i)}addResource(t,n,s,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[t,n];s&&(o=o.concat(l?s.split(l):s)),t.indexOf(".")>-1&&(o=t.split("."),r=n,n=o[1]),this.addNamespaces(n),pg(this.data,o,r),i.silent||this.emit("added",t,n,s,r)}addResources(t,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in s)(ae(s[i])||Array.isArray(s[i]))&&this.addResource(t,n,i,s[i],{silent:!0});r.silent||this.emit("added",t,n,s)}addResourceBundle(t,n,s,r,i){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[t,n];t.indexOf(".")>-1&&(o=t.split("."),r=s,s=n,n=o[1]),this.addNamespaces(n);let c=tc(this.data,o)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?wv(c,s,i):c={...c,...s},pg(this.data,o,c),l.silent||this.emit("added",t,n,s)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var bv={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,s,r){return e.forEach(i=>{this.processors[i]&&(t=this.processors[i].process(t,n,s,r))}),t}};const xg={};class rc extends Mc{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),O_(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=xn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const s=this.resolve(t,n);return s&&s.res!==void 0}extractFromKey(t,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const l=s&&t.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!z_(t,s,r);if(l&&!o){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:ae(i)?[i]:i};const d=t.split(s);(s!==r||s===r&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),t=d.join(r)}return{key:t,namespaces:ae(i)?[i]:i}}translate(t,n,s){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const r=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:l,namespaces:o}=this.extractFromKey(t[t.length-1],n),c=o[o.length-1],d=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(u){const N=n.nsSeparator||this.options.nsSeparator;return r?{res:`${c}${N}${l}`,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${N}${l}`}return r?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:l}const h=this.resolve(t,n);let m=h&&h.res;const g=h&&h.usedKey||l,j=h&&h.exactUsedKey||l,v=Object.prototype.toString.apply(m),w=["[object Number]","[object Function]","[object RegExp]"],p=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,f=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!ae(m)&&typeof m!="boolean"&&typeof m!="number";if(f&&m&&y&&w.indexOf(v)<0&&!(ae(p)&&Array.isArray(m))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,{...n,ns:o}):`key '${l} (${this.language})' returned an object instead of string.`;return r?(h.res=N,h.usedParams=this.getUsedParamsDetails(n),h):N}if(i){const N=Array.isArray(m),b=N?[]:{},S=N?j:g;for(const k in m)if(Object.prototype.hasOwnProperty.call(m,k)){const E=`${S}${i}${k}`;b[k]=this.translate(E,{...n,joinArrays:!1,ns:o}),b[k]===E&&(b[k]=m[k])}m=b}}else if(f&&ae(p)&&Array.isArray(m))m=m.join(p),m&&(m=this.extendTranslation(m,t,n,s));else{let N=!1,b=!1;const S=n.count!==void 0&&!ae(n.count),k=rc.hasDefaultValue(n),E=S?this.pluralResolver.getSuffix(d,n.count,n):"",_=n.ordinal&&S?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",I=S&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),T=I&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${E}`]||n[`defaultValue${_}`]||n.defaultValue;!this.isValidLookup(m)&&k&&(N=!0,m=T),this.isValidLookup(m)||(b=!0,m=l);const z=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&b?void 0:m,H=k&&T!==m&&this.options.updateMissing;if(b||N||H){if(this.logger.log(H?"updateKey":"missingKey",d,c,l,H?T:m),i){const R=this.resolve(l,{...n,keySeparator:!1});R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ee=[];const re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(let R=0;R<re.length;R++)ee.push(re[R]);else this.options.saveMissingTo==="all"?ee=this.languageUtils.toResolveHierarchy(n.lng||this.language):ee.push(n.lng||this.language);const ie=(R,A,M)=>{const oe=k&&M!==m?M:z;this.options.missingKeyHandler?this.options.missingKeyHandler(R,c,A,oe,H,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(R,c,A,oe,H,n),this.emit("missingKey",R,c,A,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?ee.forEach(R=>{const A=this.pluralResolver.getSuffixes(R,n);I&&n[`defaultValue${this.options.pluralSeparator}zero`]&&A.indexOf(`${this.options.pluralSeparator}zero`)<0&&A.push(`${this.options.pluralSeparator}zero`),A.forEach(M=>{ie([R],l+M,n[`defaultValue${M}`]||T)})}):ie(ee,l,T))}m=this.extendTranslation(m,t,n,h,s),b&&m===l&&this.options.appendNamespaceToMissingKey&&(m=`${c}:${l}`),(b||N)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${l}`:l,N?m:void 0):m=this.options.parseMissingKeyHandler(m))}return r?(h.res=m,h.usedParams=this.getUsedParamsDetails(n),h):m}extendTranslation(t,n,s,r,i){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=ae(t)&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const m=t.match(this.interpolator.nestingRegexp);u=m&&m.length}let h=s.replace&&!ae(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,s.lng||this.language||r.usedLng,s),d){const m=t.match(this.interpolator.nestingRegexp),g=m&&m.length;u<g&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var m=arguments.length,g=new Array(m),j=0;j<m;j++)g[j]=arguments[j];return i&&i[0]===g[0]&&!s.context?(l.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):l.translate(...g,n)},s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,c=ae(o)?[o]:o;return t!=null&&c&&c.length&&s.applyPostProcessor!==!1&&(t=bv.handle(c,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,r,i,l,o;return ae(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(s))return;const d=this.extractFromKey(c,n),u=d.key;r=u;let h=d.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const m=n.count!==void 0&&!ae(n.count),g=m&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),j=n.context!==void 0&&(ae(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(w=>{this.isValidLookup(s)||(o=w,!xg[`${v[0]}-${w}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(xg[`${v[0]}-${w}`]=!0,this.logger.warn(`key "${r}" for languages "${v.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(p=>{if(this.isValidLookup(s))return;l=p;const f=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(f,u,p,w,n);else{let N;m&&(N=this.pluralResolver.getSuffix(p,n.count,n));const b=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(f.push(u+N),n.ordinal&&N.indexOf(S)===0&&f.push(u+N.replace(S,this.options.pluralSeparator)),g&&f.push(u+b)),j){const k=`${u}${this.options.contextSeparator}${n.context}`;f.push(k),m&&(f.push(k+N),n.ordinal&&N.indexOf(S)===0&&f.push(k+N.replace(S,this.options.pluralSeparator)),g&&f.push(k+b))}}let y;for(;y=f.pop();)this.isValidLookup(s)||(i=y,s=this.getResource(p,w,y,n))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,s,r):this.resourceStore.getResource(t,n,s,r)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!ae(t.replace);let r=s?t.replace:t;if(s&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const i of n)delete r[i]}return r}static hasDefaultValue(t){const n="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n===s.substring(0,n.length)&&t[s]!==void 0)return!0;return!1}}const Pd=e=>e.charAt(0).toUpperCase()+e.slice(1);class yg{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=xn.create("languageUtils")}getScriptPartFromCode(t){if(t=nc(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=nc(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(ae(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(t)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let s=t.split("-");return this.options.lowerCaseLng?s=s.map(r=>r.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),n.indexOf(s[1].toLowerCase())>-1&&(s[1]=Pd(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),n.indexOf(s[1].toLowerCase())>-1&&(s[1]=Pd(s[1].toLowerCase())),n.indexOf(s[2].toLowerCase())>-1&&(s[2]=Pd(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(s=>{if(n)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&t.forEach(s=>{if(n)return;const r=this.getLanguagePartFromCode(s);if(this.isSupportedCode(r))return n=r;n=this.options.supportedLngs.find(i=>{if(i===r)return i;if(!(i.indexOf("-")<0&&r.indexOf("-")<0)&&(i.indexOf("-")>0&&r.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===r||i.indexOf(r)===0&&r.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),ae(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let s=t[n];return s||(s=t[this.getScriptPartFromCode(n)]),s||(s=t[this.formatLanguageCode(n)]),s||(s=t[this.getLanguagePartFromCode(n)]),s||(s=t.default),s||[]}toResolveHierarchy(t,n){const s=this.getFallbackCodes(n||this.options.fallbackLng||[],t),r=[],i=l=>{l&&(this.isSupportedCode(l)?r.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ae(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):ae(t)&&i(this.formatLanguageCode(t)),s.forEach(l=>{r.indexOf(l)<0&&i(this.formatLanguageCode(l))}),r}}let q_=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],K_={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const W_=["v1","v2","v3"],Q_=["v4"],vg={zero:0,one:1,two:2,few:3,many:4,other:5},Z_=()=>{const e={};return q_.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:K_[t.fc]}})}),e};class G_{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=xn.create("pluralResolver"),(!this.options.compatibilityJSON||Q_.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Z_(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const s=nc(t==="dev"?"en":t),r=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(s,{type:r})}catch{if(!t.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(c,n)}return this.pluralRulesCache[i]=l,l}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(t,n);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,s).map(r=>`${n}${r}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=this.getRule(t,n);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((r,i)=>vg[r]-vg[i]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):s.numbers.map(r=>this.getSuffix(t,r,n)):[]}getSuffix(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(t,s);return r?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:this.getSuffixRetroCompatible(r,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const s=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let r=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?i():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!W_.includes(this.options.compatibilityJSON)}}const wg=function(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=M_(e,t,n);return!i&&r&&ae(n)&&(i=um(e,n,s),i===void 0&&(i=um(t,n,s))),i},Id=e=>e.replace(/\$/g,"$$$$");class J_{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=xn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:m,nestingPrefixEscaped:g,nestingSuffix:j,nestingSuffixEscaped:v,nestingOptionsSeparator:w,maxReplaces:p,alwaysFormat:f}=t.interpolation;this.escape=n!==void 0?n:F_,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?br(i):l||"{{",this.suffix=o?br(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=m?br(m):g||br("$t("),this.nestingSuffix=j?br(j):v||br(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=p||1e3,this.alwaysFormat=f!==void 0?f:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,s)=>n&&n.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,s,r){let i,l,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=g=>{if(g.indexOf(this.formatSeparator)<0){const p=wg(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(p,void 0,s,{...r,...n,interpolationkey:g}):p}const j=g.split(this.formatSeparator),v=j.shift().trim(),w=j.join(this.formatSeparator).trim();return this.format(wg(n,c,v,this.options.keySeparator,this.options.ignoreJSONStructure),w,s,{...r,...n,interpolationkey:v})};this.resetRegExp();const u=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>Id(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?Id(this.escape(g)):Id(g)}].forEach(g=>{for(o=0;i=g.regex.exec(t);){const j=i[1].trim();if(l=d(j),l===void 0)if(typeof u=="function"){const w=u(t,i,r);l=ae(w)?w:""}else if(r&&Object.prototype.hasOwnProperty.call(r,j))l="";else if(h){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${t}`),l="";else!ae(l)&&!this.useRawValueToEscape&&(l=mg(l));const v=g.safeValue(l);if(t=t.replace(i[0],v),h?(g.regex.lastIndex+=l.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,i,l;const o=(c,d)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const h=c.split(new RegExp(`${u}[ ]*{`));let m=`{${h[1]}`;c=h[0],m=this.interpolate(m,l);const g=m.match(/'/g),j=m.match(/"/g);(g&&g.length%2===0&&!j||j.length%2!==0)&&(m=m.replace(/'/g,'"'));try{l=JSON.parse(m),d&&(l={...d,...l})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,v),`${c}${u}${m}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,c};for(;r=this.nestingRegexp.exec(t);){let c=[];l={...s},l=l.replace&&!ae(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let d=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const u=r[1].split(this.formatSeparator).map(h=>h.trim());r[1]=u.shift(),c=u,d=!0}if(i=n(o.call(this,r[1].trim(),l),l),i&&r[0]===t&&!ae(i))return i;ae(i)||(i=mg(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),i=""),d&&(i=c.reduce((u,h)=>this.format(u,h,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),t=t.replace(r[0],i),this.regexp.lastIndex=0}return t}}const Y_=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);t==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(l=>{if(l){const[o,...c]=l.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();n[u]||(n[u]=d),d==="false"&&(n[u]=!1),d==="true"&&(n[u]=!0),isNaN(d)||(n[u]=parseInt(d,10))}})}return{formatName:t,formatOptions:n}},jr=e=>{const t={};return(n,s,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const l=s+JSON.stringify(i);let o=t[l];return o||(o=e(nc(s),r),t[l]=o),o(n)}};class X_{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=xn.create("formatter"),this.options=t,this.formats={number:jr((n,s)=>{const r=new Intl.NumberFormat(n,{...s});return i=>r.format(i)}),currency:jr((n,s)=>{const r=new Intl.NumberFormat(n,{...s,style:"currency"});return i=>r.format(i)}),datetime:jr((n,s)=>{const r=new Intl.DateTimeFormat(n,{...s});return i=>r.format(i)}),relativetime:jr((n,s)=>{const r=new Intl.RelativeTimeFormat(n,{...s});return i=>r.format(i,s.range||"day")}),list:jr((n,s)=>{const r=new Intl.ListFormat(n,{...s});return i=>r.format(i)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=jr(n)}format(t,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{const{formatName:d,formatOptions:u}=Y_(c);if(this.formats[d]){let h=o;try{const m=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},g=m.locale||m.lng||r.locale||r.lng||s;h=this.formats[d](o,g,{...u,...r,...m})}catch(m){this.logger.warn(m)}return h}else this.logger.warn(`there was no format function for ${d}`);return o},t)}}const e3=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class t3 extends Mc{constructor(t,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=xn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,r.backend,r)}queueLoad(t,n,s,r){const i={},l={},o={},c={};return t.forEach(d=>{let u=!0;n.forEach(h=>{const m=`${d}|${h}`;!s.reload&&this.store.hasResourceBundle(d,h)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?l[m]===void 0&&(l[m]=!0):(this.state[m]=1,u=!1,l[m]===void 0&&(l[m]=!0),i[m]===void 0&&(i[m]=!0),c[h]===void 0&&(c[h]=!0)))}),u||(o[d]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(t,n,s){const r=t.split("|"),i=r[0],l=r[1];n&&this.emit("failedLoading",i,l,n),!n&&s&&this.store.addResourceBundle(i,l,s,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&s&&(this.state[t]=0);const o={};this.queue.forEach(c=>{R_(c.loaded,[i],l),e3(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const u=c.loaded[d];u.length&&u.forEach(h=>{o[d][h]===void 0&&(o[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(t,n,s){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:s,tried:r,wait:i,callback:l});return}this.readingCalls++;const o=(d,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&u&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,s,r+1,i*2,l)},i);return}l(d,u)},c=this.backend[s].bind(this.backend);if(c.length===2){try{const d=c(t,n);d&&typeof d.then=="function"?d.then(u=>o(null,u)).catch(o):o(null,d)}catch(d){o(d)}return}return c(t,n,o)}prepareLoading(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();ae(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ae(n)&&(n=[n]);const i=this.queueLoad(t,n,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(t,n,s){this.prepareLoading(t,n,{},s)}reload(t,n,s){this.prepareLoading(t,n,{reload:!0},s)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=t.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${n}loading namespace ${i} for language ${r} failed`,l),!l&&o&&this.logger.log(`${n}loaded namespace ${i} for language ${r}`,o),this.loaded(t,l,o)})}saveMissing(t,n,s,r,i){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){const c={...l,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let u;d.length===5?u=d(t,n,s,r,c):u=d(t,n,s,r),u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}else d(t,n,s,r,o,c)}!t||!t[0]||this.store.addResource(t[0],n,s,r)}}}const bg=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ae(e[1])&&(t.defaultValue=e[1]),ae(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(s=>{t[s]=n[s]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),jg=e=>(ae(e.ns)&&(e.ns=[e.ns]),ae(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ae(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Ul=()=>{},n3=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Xi extends Mc{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=jg(t),this.services={},this.logger=xn,this.modules={external:[]},n3(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(s=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ae(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const r=bg();this.options={...r,...this.options,...jg(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?xn.init(i(this.modules.logger),this.options):xn.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=X_);const h=new yg(this.options);this.store=new gg(this.options.resources,this.options);const m=this.services;m.logger=xn,m.resourceStore=this.store,m.languageUtils=h,m.pluralResolver=new G_(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(m.formatter=i(u),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new J_(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new t3(i(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(g){for(var j=arguments.length,v=new Array(j>1?j-1:0),w=1;w<j;w++)v[w-1]=arguments[w];t.emit(g,...v)}),this.modules.languageDetector&&(m.languageDetector=i(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=i(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new rc(this.services,this.options),this.translator.on("*",function(g){for(var j=arguments.length,v=new Array(j>1?j-1:0),w=1;w<j;w++)v[w-1]=arguments[w];t.emit(g,...v)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,s||(s=Ul),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const c=La(),d=()=>{const u=(h,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(m),s(h,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ul;const r=ae(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),this.options.preload&&this.options.preload.forEach(o=>l(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(o)})}else s(null)}reloadResources(t,n,s){const r=La();return typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),s||(s=Ul),this.services.backendConnector.reload(t,n,i=>{r.resolve(),s(i)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&bv.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(t,n){var s=this;this.isLanguageChangingTo=t;const r=La();this.emit("languageChanging",t);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},l=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve(function(){return s.t(...arguments)}),n&&n(c,function(){return s.t(...arguments)})},o=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=ae(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,u=>{l(u,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,n,s){var r=this;const i=function(l,o){let c;if(typeof o!="object"){for(var d=arguments.length,u=new Array(d>2?d-2:0),h=2;h<d;h++)u[h-2]=arguments[h];c=r.options.overloadTranslationOptionHandler([l,o].concat(u))}else c={...o};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||s||i.keyPrefix);const m=r.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(l)?g=l.map(j=>`${c.keyPrefix}${m}${j}`):g=c.keyPrefix?`${c.keyPrefix}${m}${l}`:l,r.t(g,c)};return ae(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=s,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const o=n.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,t)&&(!r||l(i,t)))}loadNamespaces(t,n){const s=La();return this.options.ns?(ae(t)&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),n&&n(r)}),s):(n&&n(),Promise.resolve())}loadLanguages(t,n){const s=La();ae(t)&&(t=[t]);const r=this.options.preload||[],i=t.filter(l=>r.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=r.concat(i),this.loadResources(l=>{s.resolve(),n&&n(l)}),s):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new yg(bg());return n.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Xi(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ul;const s=t.forkResourceStore;s&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},i=new Xi(r);return(t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s&&(i.store=new gg(this.store.data,r),i.services.resourceStore=i.store),i.translator=new rc(i.services,r),i.translator.on("*",function(o){for(var c=arguments.length,d=new Array(c>1?c-1:0),u=1;u<c;u++)d[u-1]=arguments[u];i.emit(o,...d)}),i.init(r,n),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ot=Xi.createInstance();ot.createInstance=Xi.createInstance;ot.createInstance;ot.dir;ot.init;ot.loadResources;ot.reloadResources;ot.use;ot.changeLanguage;ot.getFixedT;ot.t;ot.exists;ot.setDefaultNamespace;ot.hasLoadedNamespace;ot.loadNamespaces;ot.loadLanguages;const{slice:s3,forEach:r3}=[];function a3(e){return r3.call(s3.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function i3(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const Ng=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,l3=function(e,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(t);let i=`${e}=${r}`;if(s.maxAge>0){const l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(s.domain){if(!Ng.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!Ng.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},kg={create(e,t,n,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+n*60*1e3)),s&&(r.domain=s),document.cookie=l3(e,t,r)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let r=n[s];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var o3={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return kg.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:r,cookieOptions:i}=t;n&&typeof document<"u"&&kg.create(n,e,s,r,i)}},c3={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const l=r.substring(1).split("&");for(let o=0;o<l.length;o++){const c=l[o].indexOf("=");c>0&&l[o].substring(0,c)===t&&(n=l[o].substring(c+1))}}return n}},d3={name:"hash",lookup(e){var r;let{lookupHash:t,lookupFromHashIndex:n}=e,s;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const l=i.substring(1);if(t){const o=l.split("&");for(let c=0;c<o.length;c++){const d=o[c].indexOf("=");d>0&&o[c].substring(0,d)===t&&(s=o[c].substring(d+1))}}if(s)return s;if(!s&&n>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(r=o[typeof n=="number"?n:0])==null?void 0:r.replace("/",""):void 0}}}return s}};let Nr=null;const Sg=()=>{if(Nr!==null)return Nr;try{if(Nr=typeof window<"u"&&window.localStorage!==null,!Nr)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Nr=!1}return Nr};var u3={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Sg())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Sg()&&window.localStorage.setItem(n,e)}};let kr=null;const _g=()=>{if(kr!==null)return kr;try{if(kr=typeof window<"u"&&window.sessionStorage!==null,!kr)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{kr=!1}return kr};var m3={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&_g())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&_g()&&window.sessionStorage.setItem(n,e)}},f3={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:r}=navigator;if(n)for(let i=0;i<n.length;i++)t.push(n[i]);s&&t.push(s),r&&t.push(r)}return t.length>0?t:void 0}},h3={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},p3={name:"path",lookup(e){var r;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(r=n[typeof t=="number"?t:0])==null?void 0:r.replace("/",""):void 0}},g3={name:"subdomain",lookup(e){var r,i;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,s=typeof window<"u"&&((i=(r=window.location)==null?void 0:r.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[n]}};let jv=!1;try{document.cookie,jv=!0}catch{}const Nv=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];jv||Nv.splice(1,1);const x3=()=>({order:Nv,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class kv{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=a3(n,this.options||{},x3()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(o3),this.addDetector(c3),this.addDetector(u3),this.addDetector(m3),this.addDetector(f3),this.addDetector(h3),this.addDetector(p3),this.addDetector(g3),this.addDetector(d3)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(s=>{if(this.detectors[s]){let r=this.detectors[s].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(n=n.concat(r))}}),n=n.filter(s=>s!=null&&!i3(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}kv.type="languageDetector";const y3={en:{translation:{"common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.edit":"Edit","common.search":"Search","common.loading":"Loading...","common.error":"Error","common.success":"Success","auth.login":"Login","auth.logout":"Logout","auth.pin":"PIN","auth.enterPin":"Enter your PIN","auth.invalidPin":"Invalid PIN","auth.lockedOut":"Too many failed attempts. Try again later.","nav.dashboard":"Dashboard","nav.patients":"Patients","nav.queue":"Queue","nav.inventory":"Inventory","patient.register":"Register Patient","patient.givenName":"Given Name","patient.familyName":"Family Name","patient.phone":"Phone Number","patient.address":"Address","patient.state":"State","patient.lga":"LGA","vitals.height":"Height (cm)","vitals.weight":"Weight (kg)","vitals.temperature":"Temperature (C)","vitals.pulse":"Pulse (bpm)","vitals.bloodPressure":"Blood Pressure","vitals.systolic":"Systolic","vitals.diastolic":"Diastolic","app.title":"Med Bridge Health Reach","app.subtitle":"Powered by Dr. Isioma Okobah Foundation","app.offline":"Offline","app.online":"Online"}},ha:{translation:{"common.save":"Ajiye","common.cancel":"Soke","auth.login":"Shiga","patient.register":"Rubuta Majiyyaci"}},yo:{translation:{"common.save":"Fi pam","common.cancel":"Fagilee","auth.login":"Wle","patient.register":"Foruksil Alaisan"}},ig:{translation:{"common.save":"Chekwaa","common.cancel":"Kagbuo","auth.login":"Banye","patient.register":"Debanye Onye ra"}}};ot.use(kv).use(wj).init({resources:y3,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const Eg=[{itemName:"Paracetamol 500mg",unit:"tablets",onHandQty:1e3,reorderThreshold:100},{itemName:"Ibuprofen 400mg",unit:"tablets",onHandQty:500,reorderThreshold:50},{itemName:"Amoxicillin 250mg",unit:"capsules",onHandQty:200,reorderThreshold:30},{itemName:"ORS Sachets",unit:"sachets",onHandQty:150,reorderThreshold:25},{itemName:"Multivitamin",unit:"tablets",onHandQty:300,reorderThreshold:50},{itemName:"Antacid Tablets",unit:"tablets",onHandQty:250,reorderThreshold:40},{itemName:"Cough Syrup",unit:"bottles",onHandQty:50,reorderThreshold:10},{itemName:"Antiseptic Solution",unit:"bottles",onHandQty:30,reorderThreshold:5},{itemName:"Bandages",unit:"rolls",onHandQty:100,reorderThreshold:20},{itemName:"Thermometer Strips",unit:"strips",onHandQty:200,reorderThreshold:30}];async function v3(){try{console.log(" Starting database seeding...");const[e,t]=await Promise.all([D.users.count(),D.inventory.count()]);if(console.log("Existing counts - Users:",e,"Inventory:",t),e===0){console.log(" Creating demo users...");const i=[{fullName:"Admin User",role:"admin",pin:"123456",adminAccess:!0,adminPermanent:!1},{fullName:"Dr. Sarah Johnson",role:"doctor",pin:"234567",adminAccess:!1,adminPermanent:!1},{fullName:"Nurse Mary",role:"nurse",pin:"345678",adminAccess:!1,adminPermanent:!1},{fullName:"Pharmacist John",role:"pharmacist",pin:"456789",adminAccess:!1,adminPermanent:!1},{fullName:"Volunteer Mike",role:"volunteer",pin:"567890",adminAccess:!1,adminPermanent:!1},{fullName:"Kristopher Okobah",role:"admin",pin:"070398",adminAccess:!0,adminPermanent:!0}];for(const l of i){const o=F0(),c=await Cc(l.pin,o);await D.users.add({id:Be(),fullName:l.fullName,role:l.role,email:`${l.role}@local`,pinHash:c,pinSalt:o,adminAccess:l.adminAccess,adminPermanent:l.adminPermanent,isActive:1,createdAt:new Date,updatedAt:new Date})}console.log(" Users created with PINs: 123456, 234567, 345678, 456789, 567890, 070398")}if(t===0){console.log(" Adding inventory items...");for(const i of Eg)await D.inventory.add({id:Be(),...i,updatedAt:new Date});console.log(" Inventory items created:",Eg.length)}if(await D.gamificationWallets.count()===0){console.log(" Creating demo gamification wallets...");const i=await D.users.where("isActive").equals(1).toArray();for(const l of i)await D.gamificationWallets.add({volunteerId:l.id,tokens:Math.floor(Math.random()*200)+50,badges:["first_quest"],level:1,streakDays:Math.floor(Math.random()*7),lifetimeTokens:Math.floor(Math.random()*500)+100,lastActiveDate:new Date,updatedAt:new Date,_dirty:1});console.log(" Gamification wallets created for",i.length,"users")}if(await D.vitalsRanges.count()===0){console.log(" Adding vitals ranges...");const i=[{sex:"M",metric:"hr",ageMin:18,ageMax:65,min:60,max:100,source:"AHA Guidelines"},{sex:"F",metric:"hr",ageMin:18,ageMax:65,min:60,max:100,source:"AHA Guidelines"},{sex:"M",metric:"temp",ageMin:18,ageMax:65,min:36.1,max:37.2,source:"Clinical Standard"},{sex:"F",metric:"temp",ageMin:18,ageMax:65,min:36.1,max:37.2,source:"Clinical Standard"},{sex:"M",metric:"sbp",ageMin:18,ageMax:65,min:90,max:140,source:"AHA Guidelines"},{sex:"F",metric:"sbp",ageMin:18,ageMax:65,min:90,max:140,source:"AHA Guidelines"},{sex:"M",metric:"dbp",ageMin:18,ageMax:65,min:60,max:90,source:"AHA Guidelines"},{sex:"F",metric:"dbp",ageMin:18,ageMax:65,min:60,max:90,source:"AHA Guidelines"},{sex:"M",metric:"rr",ageMin:18,ageMax:65,min:12,max:20,source:"Clinical Standard"},{sex:"F",metric:"rr",ageMin:18,ageMax:65,min:12,max:20,source:"Clinical Standard"},{sex:"M",metric:"spo2",ageMin:18,ageMax:65,min:95,max:100,source:"Clinical Standard"},{sex:"F",metric:"spo2",ageMin:18,ageMax:65,min:95,max:100,source:"Clinical Standard"},{sex:"M",metric:"hr",ageMin:1,ageMax:17,min:80,max:120,source:"Pediatric Guidelines"},{sex:"F",metric:"hr",ageMin:1,ageMax:17,min:80,max:120,source:"Pediatric Guidelines"},{sex:"M",metric:"temp",ageMin:1,ageMax:17,min:36.1,max:37.2,source:"Pediatric Guidelines"},{sex:"F",metric:"temp",ageMin:1,ageMax:17,min:36.1,max:37.2,source:"Pediatric Guidelines"},{sex:"M",metric:"sbp",ageMin:1,ageMax:17,min:85,max:110,source:"Pediatric Guidelines"},{sex:"F",metric:"sbp",ageMin:1,ageMax:17,min:85,max:110,source:"Pediatric Guidelines"},{sex:"M",metric:"dbp",ageMin:1,ageMax:17,min:50,max:70,source:"Pediatric Guidelines"},{sex:"F",metric:"dbp",ageMin:1,ageMax:17,min:50,max:70,source:"Pediatric Guidelines"},{sex:"M",metric:"rr",ageMin:1,ageMax:17,min:20,max:30,source:"Pediatric Guidelines"},{sex:"F",metric:"rr",ageMin:1,ageMax:17,min:20,max:30,source:"Pediatric Guidelines"},{sex:"M",metric:"spo2",ageMin:1,ageMax:17,min:95,max:100,source:"Pediatric Guidelines"},{sex:"F",metric:"spo2",ageMin:1,ageMax:17,min:95,max:100,source:"Pediatric Guidelines"}];for(const l of i)await D.vitalsRanges.add({id:Be(),sex:l.sex,metric:l.metric,ageMin:l.ageMin,ageMax:l.ageMax,min:l.min,max:l.max,source:l.source,updatedAt:new Date});console.log(" Vitals ranges created:",i.length)}if(await D.dailyCounts.count()===0){console.log(" Creating demo daily counts...");for(let i=6;i>=0;i--){const l=new Date;l.setDate(l.getDate()-i);const o=Vn(l),c=Math.floor(Math.random()*20)+10,d=Math.floor(c*.8),u=Math.floor(d*.9),h=Math.floor(u*.7),m=c;await D.dailyCounts.add({day:o,registrations:c,vitals:d,consultations:u,dispenses:h,visits:m})}console.log(" Daily counts seeded for last 7 days")}console.log(" Database seeded successfully")}catch(e){throw console.error(" Seeding failed:",e),e}}async function w3(){try{await D.open()}catch(e){if((e==null?void 0:e.name)==="UpgradeError"||(e==null?void 0:e.name)==="SchemaError")console.warn("Schema migration incompatible. Deleting local DB and recreating"),await Dt.delete(D.name),await D.open();else throw e}}window.addEventListener("error",e=>console.error("[global error]",e.message,e.error));window.addEventListener("unhandledrejection",e=>console.error("[unhandledrejection]",e.reason));function b3(e){const t=document.getElementById("root");t&&(t.innerHTML=`
      <div style="font-family: system-ui; padding:24px; max-width:720px; margin:40px auto;">
        <h1 style="margin:0 0 12px;color:#0A7A3B;">Med Bridge Health Reach</h1>
        <h2 style="margin:0 0 16px;">Startup error</h2>
        <p style="margin:0 0 8px;">${e}</p>
        <p style="color:#555">Open the browser console for details.</p>
      </div>
    `)}(async()=>{try{console.log("[db] opening"),await w3(),console.log("[db] opened OK");const t=await D.patients.count(),n=await D.users.count();console.log("[db] Current counts - Patients:",t,"Users:",n)}catch(t){console.error("Failed to initialize database:",t),b3("Could not open the local database.");return}try{console.log("[seed] starting"),await v3(),await vv(),await h_(),console.log("[seed] done")}catch(t){console.error("[seed] failed",t),console.warn("Seeding failed but continuing with app startup")}console.log("Application fully initialized and rendered."),Dd.createRoot(document.getElementById("root")).render(a.jsx(Se.StrictMode,{children:a.jsx(nj,{children:a.jsx(T_,{})})}))})();const j3=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{bn as F,oi as G,As as L,qt as a,Mi as b,Tp as c,De as d,cn as e,D as f,Ge as g,jn as h,Qn as i,a as j,Ss as k,Nn as l,K0 as m,Be as n,eS as o,dn as p,x as r,ja as u};
